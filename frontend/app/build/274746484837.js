!function(a){"use strict";angular.module("mailtasticApp.factories").factory("StorageFactory",["localStorageService",function(a){return{prefix:"webapp",keys:["tokenType","accessToken","email","refreshToken","logged_in","dbname","userId","permission"],get:function(b){if("string"==typeof b)return a.get(this.prefix+"."+b);var c=0,d={};for(c;c<b.length;c+=1)d[b[c]]=a.get(this.prefix+"."+b[c]);return d},add:function(b,c){if("string"==typeof b)return a.add(this.prefix+"."+b,c),c;var d;for(d in b)b.hasOwnProperty(d)&&(a.add?a.add(this.prefix+"."+d,b[d]):a.set(this.prefix+"."+d,b[d]));return b},remove:function(b){if("string"==typeof b)return a.remove(this.prefix+"."+b);var c=0;for(c;c<b.length;c+=1)a.remove(this.prefix+"."+b[c])},saveEmployeeGroupData:function(a){var b=[];if(null!=a.data.selectedEmployees)for(var c=0;c<a.data.selectedEmployees.length;c++)b.push(a.data.selectedEmployees[c].id);var d=[];if(null!=a.data.selectedGroups)for(var c=0;c<a.data.selectedGroups.length;c++)d.push(a.data.selectedGroups[c].id);var e={};e.selectedEmployees=b,e.selectedGroups=d,window.localStorage.setItem("employeeGroupData",JSON.stringify(e))},loadEmployeeGroupData:function(a){var b=window.localStorage.getItem("employeeGroupData");if(null!=b&&""!=b){try{var c=JSON.parse(b)}catch(d){return}if(a.data.selectedEmployees=[],null!==c.selectedEmployees&&Array.isArray(c.selectedEmployees)){for(var e=0;e<c.selectedEmployees.length;e++){var f=jQuery.grep(a.data.employees,function(a,b){return a.id===c.selectedEmployees[e]});1===f.length&&a.data.selectedEmployees.push(f[0])}1===a.data.selectedEmployees.length?a.selected.selectedGroupForEmp=a.data.selectedEmployees[0].currentGroup.toString():a.data.selectedEmployees.length>1&&(a.selected.selectedGroupForEmp="selectGroupForEmp")}if(a.data.selectedGroups=[],null!==c.selectedGroups&&Array.isArray(c.selectedGroups)){for(var e=0;e<c.selectedGroups.length;e++){var f=jQuery.grep(a.data.groups,function(a,b){return a.id===c.selectedGroups[e]});1===f.length&&a.data.selectedGroups.push(f[0])}1===a.data.selectedGroups.length?a.selectedCampaign.selected={title:a.data.selectedGroups[0].campaignTitle,id:a.data.selectedGroups[0].campaignId,color:a.data.selectedGroups[0].campaignColor}:a.data.selectedGroups.length>1&&(a.selectedCampaign.selected={title:"Kampagne wählen..."})}}},saveCampaignData:function(a){for(var b=[],c=0;c<a.data.selectedCampaigns.length;c++)b.push(a.data.selectedCampaigns[c].id);var d={};d.selectedCampaigns=b,window.localStorage.setItem("campaignData",JSON.stringify(d))},loadCampaignData:function(a){var b=window.localStorage.getItem("campaignData");if(null!=b&&""!=b){try{var c=JSON.parse(b)}catch(d){return}if(a.data.selectedCampaigns=[],null!==c.selectedCampaigns&&Array.isArray(c.selectedCampaigns))for(var e=0;e<c.selectedCampaigns.length;e++){var f=jQuery.grep(a.data.campaigns,function(a,b){return a.id===c.selectedCampaigns[e]});1===f.length&&a.data.selectedCampaigns.push(f[0])}}},clearSelectedListData:function(a){if(a)switch(a){case"all":window.localStorage.setItem("campaignData",JSON.stringify([])),window.localStorage.setItem("employeeGroupData",JSON.stringify([]));break;case"group":var b=window.localStorage.getItem("employeeGroupData");try{var b=JSON.parse(b);b.selectedGroups=[],window.localStorage.setItem("employeeGroupData",JSON.stringify(b))}catch(c){return}break;case"employee":var b=window.localStorage.getItem("employeeGroupData");try{var b=JSON.parse(b);b.selectedEmployees=[],window.localStorage.setItem("employeeGroupData",JSON.stringify(b))}catch(c){return}break;case"campaign":window.localStorage.setItem("campaignData",JSON.stringify([]))}}}}]),a.factory("XLSXReaderService",["$q","$rootScope",function(a,b){var c=function(a){angular.extend(this,a)};return c.readFile=function(c,d){var e=a.defer();return XLSXReader(c,d,!0,function(a){b.$apply(function(){e.resolve(a)})}),e.promise},c}])}(angular.module("mailtasticApp.factories",[])),function(a){"use strict";angular.module("mailtasticApp.services").service("requestService",["$q","$rootScope","$http","StorageFactory",function(a,b,c,d){function e(e,f){var g,k={},l="",n="",o={},p=a.defer();return h+=1,b.loading=!0,e.authorization&&(o=d.get(["tokenType","accessToken"]),k.Authorization=o.accessToken),e.resetContentType&&(k["Content-Type"]=void 0),e.store&&(k.Store=e.store),g={url:i,method:e.method,data:e.data||"",headers:k},e.transformRequest&&(g.transformRequest=e.transformRequest),f||(l=e.version?"/"+e.version:"/v1"),e.timeout&&(g.timeout=e.timeout),g.url=g.url+n+e.url,c(g).then(function(a){if(h-=1,e.success){var a;try{a=JSON.parse(a.data)}catch(c){a=a.data}e.success(a,p)}else p.resolve(a.data);h||(b.loading=!1)},function(a){if(h-=1,h||(b.loading=!1),500===a.status||503===a.status||502===a.status)m||j||(m=!0);else if(403===a.status&&a.data&&"invalid_authorization"===a.data.error)b.clearLogin?b.clearLogin():(d.remove(d.keys),delete b.loggedIn,delete b.user,browseService.go("start"));else if(400!==a.status||j||m||(j=!0),e.error)return e.error(a,p);p.reject(a)}),p.promise}function f(a){e(a.params).then(a.promise.resolve,function(b){a.promise.reject(b.data)})}function g(a,c){e(a).then(c.resolve,function(g){if(401===g.status){if(a.retryIndex=h.length,k.push({promise:c,params:a}),!l){l=!0;var i=d.get(["dbname","accessToken","refreshToken","expirationTime"]);e({method:"post",url:"/authentication/refresh",database:i.dbname,data:{accessToken:i.accessToken,refreshToken:i.refreshToken},success:function(a,b){return d.add({tokenType:a.tokenType,accessToken:a.accessToken,refreshToken:a.refreshToken,expirationTime:Date.now()+60*a.expiresInMinutes*1e3-1e3*(a.expiresInMinutes-1)*60,dbname:a.db}),b.resolve(a)},error:function(a,c){b.online&&!m&&b.clearLogin&&b.clearLogin(),c.reject(a)}}).then(function(){angular.forEach(k,function(a){f(a)}),l=!1,k.length=0},function(){l=!1,k.length=0,b.online&&!m&&b.clearLogin&&b.clearLogin()})}}else c.reject(g)})}var h=0,i=GlobalConfig.config.apiUrl,j=!1,k=[],l=!1,m=!1;this.send=function(c){var e=a.defer(),f=[];return l?(c.retryIndex=h.length,k.push({promise:e,params:c})):a.all(f).then(function(){g(c,e)},function(a){b.online&&!m&&(b.clearLogin?b.clearLogin():(d.remove(d.keys),delete b.loggedIn,delete b.user,browseService.go("start")),e.reject(a.data))}),e.promise},this.validateDate=function(a,b){angular.forEach(a.filter,function(c,d){isNaN(Date.parse(c))||b.indexOf(d)===-1||(a.filter[d]=Date.parse(c))})},this.buildFilterURI=function(a,b,c){var d,e="",f=void 0!==a;a=a||{},b&&!a.limit&&(a.limit=10),c&&c.length&&this.validateDate(a,c),d=a.page?"?page="+a.page:"?page=1";var g=a.limit?"&limit="+a.limit:"",h=void 0!==a.orderBy?"&orderBy="+a.orderBy:"",i=void 0!==a.orderDesc?a.orderDesc?"&orderDesc=true":"&orderDesc=false":"";return f?(angular.forEach(a.filter,function(a,b){(a||a===!1||0===a)&&(e=e+"&filter="+b+"&value="+a)}),d+g+e+h+i):d+g},this.setPagerDates=function(a,b,c){return b.filter&&a.filter&&angular.forEach(c,function(c){isNaN(Date.parse(b.filter[c]))||void 0===b.filter[c]||void 0===a.filter[c]||(a.filter[c]=new Date(a.filter[c]))}),a}}]),a.service("alertService",["$state",function(a){this.addemployee=function(a,b,c){var d=0;"monthly"===a.billing_interval?(a.billing_interval="1 Monat",d=3):"yearly"===a.billing_interval&&(a.billing_interval="12 Monate",d=2.49),a.customPrice&&(d=a.customPrice/100);var e=a.amount*d;e=(Math.round(100*e)/100).toFixed(2),bootbox.dialog({title:"",message:'<div class="row">  <div class="col-md-12"> <div class="innerheadline">Möchten Sie den Mitarbeiter "'+a.firstname+" "+a.lastname+'" jetzt kostenpflichtig zu Mailtastic hinzufügen?</div><div class="employeeprice">('+e+'€/Monat, bis zum Ende der vereinbarten Vertragslaufzeit)</div><div class="checkbox"><label><input id="createempmodalcheckbox" onclick="enablebuybutton()" type="checkbox" value="true" required="true">Ja, ich möchte "'+a.firstname+" "+a.lastname+'"  kostenpflichtig hinzufügen und habe die <a target="_blank" href="https://www.mailtastic.de/agb"><span class="text-underline">AGB</span></a> gelesen und akzeptiert.</label></div> </div>  </div>',buttons:{abort:{label:"Abbrechen",className:"ownbtn btngrau",callback:c},success:{label:"Hinzufügen",className:"ownbtn btnblau employeebuybutton disabled",callback:b}}})},this.subscriptionCompleted=function(a){bootbox.dialog({title:"",message:'<div class="row">  <div class="col-md-12 import"> <div style="font-family:roboto_bold;font-size : 18px;color:#363f48;">Herzlichen Glückwunsch - <br> Ihr Abo wurde erfolgreich aktiviert!</div><div style="font-family:roboto_regular;font-size : 14px;color:#828282;margin-top:15px;">Alle Informationen rund um Ihr Abo erreichen Sie jederzeit<br>unter dem Menüpunkt "Konto".</div><div class="schrift_blau" style="font-family:roboto_regular;font-size : 14px;margin-top:15px;">Lassen Sie uns wissen, wenn Sie Hilfe brauchen!<br>Wir sind jederzeit für Sie da. Ihr Mailtastic-Team.</div></div></div>  </div>',buttons:{success:{label:"Zur Übersicht",className:"ownbtn btnblau ",callback:a}}})},this.importEmployeeFree=function(a,b,c){var d="";a.alreadyExistant>0&&(d='<div class="">- '+a.alreadyExistant+' Mitarbeiter sind bereits vorhanden und werden nicht erneut importiert: </div><div class="">('+a.emailsAsString+")</div>");var e="",f="";a.validAmount<=0?(e="Schließen",f='<div class="">Bitte verwenden Sie eine andere Datei zum Importieren.</div>',document.getElementById("employeeimport").value=null):(e="Hinzufügen",f='<div class="">Möchten Sie '+a.validAmount+" Mitarbeiter jetzt zu Mailtastic hinzufügen?</div>"),bootbox.dialog({title:"",message:'<div class="row">  <div class="col-md-12 import"> <div class="innerheadline">Prüfung abgeschlossen</div><div class="">Dokument: <span class="schrift_blau">'+a.filename+'</span></div><div class="">- Die Datei enthält insgesamt '+a.totalAmount+" Mitarbeiter</div>"+d+'<div class="innerheadline down">Importierbare Mitarbeiter: '+a.validAmount+" </div>"+f+" </div>  </div>",buttons:{abort:{label:"Abbrechen",className:"ownbtn btngrau",callback:c},success:{label:e,className:"ownbtn btnblau employeebuybutton",callback:b}}})},this.importVersaCommerce=function(a,b,c){var d=0;"monthly"===a.billing_interval?(a.billing_interval="1 Monat",d=3):"yearly"===a.billing_interval&&(a.billing_interval="12 Monate",d=2.49),a.customPrice&&(d=a.customPrice/100);var e="",f=a.validAmount-a.freeAmount;a.alreadyExistant>0&&(e='<div class="">- '+a.alreadyExistant+' Mitarbeiter sind bereits vorhanden und werden nicht erneut importiert: </div><div class="">('+a.emailsAsString+")</div>");var g="",h="";if(a.validAmount<=0)g='<div class="">Bitte verwenden Sie eine andere Datei zum Importieren.</div>',h="Schließen";else{var i=f*d;i=(Math.round(100*i)/100).toFixed(2),h="Hinzufügen",g='<div class="">Möchten Sie '+f+' Mitarbeiter-Lizenzen jetzt kostenpflichtig zu Mailtastic hinzufügen?</div><div class="">('+i+'€/Monat, bis zum Ende der vereinbarten Vertragslaufzeit)</div><div class="checkbox"><label><input id="versamodalcheckbox" onclick="enablebuybutton()" type="checkbox" value="true" required="true">Ja, ich möchte '+f+' Mitarbeiter-Lizenzen  kostenpflichtig hinzufügen und habe die <a target="_blank" href="https://www.mailtastic.de/agb"><span class="text-underline">AGB</span></a> gelesen und akzeptiert.</label>'}bootbox.dialog({title:"",message:'<div class="row">  <div class="col-md-12 import"> <div class="innerheadline">Verca Commerce Integration</div><div class="">- Es werden insgesamt '+a.totalAmount+' Mitarbeiter-Lizenzen hinzugefügt</div><div class="innerheadline down">Benötigte Lizenzen: '+a.validAmount+' </div><div class="">Noch frei im Rahmen Ihrer Basislizenz: '+a.freeAmount+" </div>"+g+"</div></div>  </div>",buttons:{abort:{label:"Abbrechen",className:"ownbtn btngrau",callback:c},success:{label:h,className:"ownbtn btnblau employeebuybutton disabled",callback:b}}})},this.importGoogleSyncUsers=function(a,b,c){var d=0;"monthly"===a.billing_interval?(a.billing_interval="1 Monat",d=3):"yearly"===a.billing_interval&&(a.billing_interval="12 Monate",d=2.49),a.customPrice&&(d=a.customPrice/100);var e="",f=a.validAmount-a.freeAmount;a.alreadyExistant>0&&(e='<div class="">- '+a.alreadyExistant+' Mitarbeiter sind bereits vorhanden und werden nicht erneut importiert: </div><div class="">('+a.emailsAsString+")</div>");var g="",h="",i=f*d;i=(Math.round(100*i)/100).toFixed(2),h="Hinzufügen",g='<div class="">Möchten Sie '+f+' Mitarbeiter-Lizenzen jetzt kostenpflichtig zu Mailtastic hinzufügen?</div><div class="">('+i+'€/Monat, bis zum Ende der vereinbarten Vertragslaufzeit)</div><div class="checkbox"><label><input id="googlemodalcheckbox" onclick="enablebuybutton()" type="checkbox" value="true" required="true">Ja, ich möchte '+f+' Mitarbeiter-Lizenzen  kostenpflichtig hinzufügen und habe die <a target="_blank" href="https://www.mailtastic.de/agb"><span class="text-underline">AGB</span></a> gelesen und akzeptiert.</label>',bootbox.dialog({title:"",message:'<div class="row">  <div class="col-md-12 import"> <div class="innerheadline">Google Apps for Work Integration</div><div class="">- Es werden insgesamt '+a.totalAmount+' Mitarbeiter-Lizenzen hinzugefügt</div><div class="innerheadline down">Benötigte Lizenzen: '+a.validAmount+' </div><div class="">Noch frei im Rahmen Ihrer Basislizenz: '+a.freeAmount+" </div>"+g+"</div></div>  </div>",buttons:{abort:{label:"Abbrechen",className:"ownbtn btngrau",callback:c},success:{label:h,className:"ownbtn btnblau employeebuybutton disabled",callback:b}}})},this.importEmployeeBuy=function(a,b,c){var d=0;"monthly"===a.billing_interval?(a.billing_interval="1 Monat",d=3):"yearly"===a.billing_interval&&(a.billing_interval="12 Monate",d=2.49),a.customPrice&&(d=a.customPrice/100);var e="",f=a.validAmount-a.freeAmount;a.alreadyExistant>0&&(e='<div class="">- '+a.alreadyExistant+' Mitarbeiter sind bereits vorhanden und werden nicht erneut importiert: </div><div class="">('+a.emailsAsString+")</div>");var g="",h="";if(a.validAmount<=0)g='<div class="">Bitte verwenden Sie eine andere Datei zum Importieren.</div>',h="Schließen";else{h="Hinzufügen";var i=f*d;i=(Math.round(100*i)/100).toFixed(2),g='<div class="">Möchten Sie '+f+' Mitarbeiter jetzt kostenpflichtig zu Mailtastic hinzufügen?</div><div class="">('+i+'€/Monat, bis zum Ende der vereinbarten Vertragslaufzeit)</div><div class="checkbox"><label><input id="importmodalcheckbox" onclick="enablebuybutton()" type="checkbox" value="true" required="true">Ja, ich möchte '+f+' Mitarbeiter  kostenpflichtig hinzufügen und habe die <a target="_blank" href="https://www.mailtastic.de/agb"><span class="text-underline">AGB</span></a> gelesen und akzeptiert.</label>'}bootbox.dialog({title:"",message:'<div class="row">  <div class="col-md-12 import"> <div class="innerheadline">Prüfung abgeschlossen</div><div class="">Dokument: <span class="schrift_blau">'+a.filename+'</span></div><div class="">- Die Datei enthält insgesamt '+a.totalAmount+" Mitarbeiter</div>"+e+'<div class="innerheadline down">Importierbare Mitarbeiter: '+a.validAmount+' </div><div class="">Noch frei im Rahmen Ihrer Basislizenz: '+a.freeAmount+" </div>"+g+"</div></div>  </div>",buttons:{abort:{label:"Abbrechen",className:"ownbtn btngrau",callback:c},success:{label:h,className:"ownbtn btnblau employeebuybutton disabled",callback:b}}})},this.otherImportPos=function(){bootbox.dialog({title:"",message:'<div class="othermethod"><h4 class="importsupportheadline">Andere Quellen</h4><div class="importsupportdesc">In Kürze können Sie Mitarbeiter automatisch aus verschiedenen Quellen wir z.B. Active Directory importieren. Bis es soweit ist, importiere ich Ihre Mitarbeiter selbstverständlich gerne manuell für Sie. <br><br>Bitte sprechen Sie mich an:</div><div class="flex-center-all supportarea"><img src="../../../img/profile/Avatar_Andi.png"><div class="importsupportcontact"><div class="name">Andreas Schröder</div> <div class="desc">Leiter Entwicklung</div><div class="tel"><span class="glyphicon glyphicon-earphone" aria-hidden="true"></span> '+Strings.supportdata.supporttelnr+"</div> </div></div></div>",buttons:{success:{label:"Schließen",className:"ownbtn btnblau employeebuybutton"}}})};var b='<div class="infobox  infobox-success" ><span class="symbol glyphicon glyphicon-check"></span><div><div class="text">Die Abteilung <strong>$$$GROUPTITLE$$$</strong> wurde erfolgreich erstellt.</div></div></div>',c='<div class="infobox  infobox-error" ><span class="symbol glyphicon glyphicon-alert"></span><div><div class="text"><strong>Ihre neue Abteilung ist leer. Fügen Sie jetzt Mitarbeiter zur Abteilung hinzu.</strong></div></div></div>',d='<div class="infobox  infobox-success" ><span class="symbol glyphicon glyphicon-check"></span><div><div class="text">Die Kampagne <strong>$$$CAMPAIGNTITLE$$$</strong> wurde der Abteilung <strong>$$$GROUPTITLE$$$</strong> zugewiesen.</div></div></div>',e='<div class="infobox  infobox-error" ><span class="symbol glyphicon glyphicon-alert"></span><div><div class="text"> <strong>Aktuell wird keine Kampagne in den E-Mails der eingeladenen Mitarbeiter angezeigt.</strong> <div class="additionaltext">Weisen Sie der Abteilung <strong>$$$GROUPTITLE$$$</strong> eine Kampagne zu, um festzulegenwelcher Kampagnen-Banner in den E-Mails der Mitglieder angezeigt werden soll.</div></div></div></div>',f='<div class="infobox  infobox-error" ><span class="symbol glyphicon glyphicon-alert"></span><div><div class="text"> <strong>Aktuell wird keine Signatur in den E-Mails der eingeladenen Mitarbeiter angezeigt.</strong> <div class="additionaltext">Weisen Sie der Abteilung <strong>$$$GROUPTITLE$$$</strong> eine Signatur zu, um festzulegenwelche Signatur in den E-Mails der Mitglieder angezeigt werden soll.</div></div></div></div>',g='<div class="infobox  infobox-success" ><span class="symbol glyphicon glyphicon-check"></span><div><div class="text"><strong>$$$AMOUNTOFEMPS$$$ Mitarbeiter wurde$$$MOREEMPS$$$  erfolgreich zur Abteilung $$$GROUPTITLE$$$ hinzugefügt</strong> </div></div></div>',h='<div class="infobox  infobox-success" ><span class="symbol glyphicon glyphicon-check"></span><div><div class="text">Die Kampagne <strong>$$$CAMPAIGNTITLE$$$</strong> wurde erfolgreich erstellt.</div></div></div>',i='<div class="infobox  infobox-success" ><span class="symbol glyphicon glyphicon-check"></span><div><div class="text">   Die Kampagne <strong>$$$CAMPAIGNTITLE$$$</strong> wurde $$$AMOUNTOFGROUPS$$$ Abteilungen ($$$AMOUNTOFMEMBERS$$$ Mitarbeitern) zugewiesen: <strong>$$$GROUPTITLESADDED$$$</strong></div></div></div>',j='<div class="infobox  infobox-error" ><span class="symbol glyphicon glyphicon-alert"></span><div><div class="text"> <strong>Diese Kampagne ist noch nicht aktiv! Weisen Sie die Kampagne jetzt einer Abteilung zu.</strong> <div class="additionaltext">Damit der Kampagnen-Banner in den E-Mails Ihrer Mitarbeiter angezeigt wird, müssen Sie die Kampagne den Abteilungen zuweisen, in denen sich die entsprechenden Mitarbeiter befinden.</div></div></div></div>',k='<div class="infobox  infobox-error" ><span class="symbol glyphicon glyphicon-alert"></span><div><div class="text"> <strong>Die zugewiesenen Abteilungen sind leer!</strong> <div class="additionaltext"> Derzeit wird der Kampagnen-Banner noch bei keinem Mitarbeiter angezeigt. Fügen Sie jetzt Mitarbeiter zu den entsprechenden Abteilungen hinzu: <strong>$$$GROUPTITLESADDED$$$</strong></div></div></div></div>',l='<div class="infobox  infobox-success" ><span class="symbol glyphicon glyphicon-check"></span><div><div class="text">   Die Signatur <strong>$$$SIGNATURETITLE$$$</strong> wurde erfolgreich zugewiesen.</div></div></div>',m='<div  class="infobox infobox-error" ><span class="symbol glyphicon glyphicon-alert"></span><div class="contentarea"><div class="text"><strong>Benachrichtigen Sie Ihre Mitarbeiter</strong></div><div class="additionaltext">Damit die zugewiesene Mailtastic-Signatur, bzw. der Kampagnen-Banner bei Ihren Mitarbeitern angezeigt wird, müssen diese Mailtastic in Ihren E-Mail-Client integrieren, bzw aktualisieren. Möchten Sie die betroffenen Mitarbeitern jetzt benachrichtigen?</div></div></div>';this.assistantAbortEmployeee=function(a,c,h){var i='<div style="margin-bottom : 15px;" class="innerheadline">Wollen Sie den Prozess wirklich vorzeitig beenden?</div>';a.groupCreated&&(i+=b),i+=g,i=i.replaceAll("$$$AMOUNTOFEMPS$$$",a.employee.amountOfImported),i=a.employee.amountOfImported>1?i.replaceAll("$$$MOREEMPS$$$","n"):i.replaceAll("$$$MOREEMPS$$$",""),i+=a.signature.signatureAssigned?l:f,i+=a.group.activeCampaign?d:e,a.rolloutDone||(i+=m),i=i.replaceAll("$$$GROUPTITLE$$$",a.group.title),i=i.replaceAll("$$$SIGNATURETITLE$$$",a.signature.signatureAssignedTitle),i=i.replaceAll("$$$CAMPAIGNTITLE$$$",a.group.campaignTitle),bootbox.dialog({title:"",message:i,buttons:{abort:{label:"Prozess vorzeitig beenden",className:"ownbtn btngrau",callback:c},success:{label:"Zurück",className:"ownbtn btnblau",callback:h}}})},this.integrationHelpModal=function(a){var b='<div style="margin-bottom : 15px;" class="innerheadline">Sie haben Fragen?</div><div class="line"></div><div class="text">Ihr Ansprechpartner in Ihrem Unternehmen: </div><div style="font-family: roboto_bold;" class="text">$$$COMPANYCONTACT$$$</div><br><div class="text">Bei technischen Fragen steht Ihnen das Mailtastic-Team gerne jederzeit kostenlos zur Verfügung:</div><div  class="flex-center-left martop15"><img style="width : 70px;height : 75px;" src="img/profile/Avatar_Peer.png" /><div style="margin-left : 15px;" class="schrift_blau"><div style="font-size: 18px; font-weight: bold;">Peer Wierzbitzki</div><div><span style="font-size : 12px;" class="glyphicon glyphicon-earphone" aria-hidden="true"></span> 06182 955 70 02</div</div></div>';b=b.replaceAll("$$$COMPANYCONTACT$$$",a),bootbox.dialog({title:"",message:b})},this.assistantAbortCampaign=function(a,b,c){var d='<div style="margin-bottom : 15px;" class="innerheadline">Wollen Sie den Prozess wirklich vorzeitig beenden?</div>';a.campaign.title&&(d+=h),a.campaign.groupSet?(d+=i,d=d.replaceAll("$$$AMOUNTOFGROUPS$$$",a.campaign.amountOfGroupsSet),d=d.replaceAll("$$$AMOUNTOFMEMBERS$$$",a.campaign.amountOfMembersGroupsSet)):d+=j,a.campaign.groupSet&&0===a.campaign.amountOfMembersGroupsSet&&(d+=k),a.employee.amountOfImported>0&&!a.rolloutDone&&(d+=m),d=d.replaceAll("$$$CAMPAIGNTITLE$$$",a.campaign.title),d=d.replaceAll("$$$GROUPTITLESADDED$$$",a.campaign.groupTitlesAdded),bootbox.dialog({title:"",message:d,buttons:{abort:{label:"Prozess vorzeitig beenden",className:"ownbtn btngrau",callback:b},success:{label:"Zurück",className:"ownbtn btnblau",callback:c}}})},this.assistantAbortGroup=function(a,h,i){var j='<div style="margin-bottom : 15px;" class="innerheadline">Wollen Sie den Prozess wirklich vorzeitig beenden?</div>';a.group.title&&(j+=b),a.group.amountOfEmployeesAdded>0?(j+=g,j=j.replaceAll("$$$AMOUNTOFEMPS$$$",a.group.amountOfEmployeesAdded),j=a.group.amountOfEmployeesAdded>1?j.replaceAll("$$$MOREEMPS$$$","n"):j.replaceAll("$$$MOREEMPS$$$","")):j+=c,a.signature.signatureAssigned?(j+=l,j=j.replaceAll("$$$SIGNATURETITLE$$$",a.signature.signatureAssignedTitle)):(j+=f,j=j.replaceAll("$$$SIGNATURETITLE$$$",a.signature.signatureAssignedTitle)),j+=a.group.campaignAdded===!0?d:e,a.employee.idsAdded&&a.employee.idsAdded.length>0&&!a.rolloutDone&&(j+=m),j=j.replaceAll("$$$GROUPTITLE$$$",a.group.title),j=j.replaceAll("$$$CAMPAIGNTITLE$$$",a.campaign.title),bootbox.dialog({title:"",message:j,buttons:{abort:{label:"Prozess vorzeitig beenden",className:"ownbtn btngrau",callback:h},success:{label:"Zurück",className:"ownbtn btnblau",callback:i}}})},this.assistantAbortSignatureRollout=function(a,b,c){var d='<div class="infobox  infobox-success" ><span class="symbol glyphicon glyphicon-check"></span><div><div class="text"> <strong>Die Signatur $$$SIGTITLE$$$ wurde erfolgreich erstellt.</strong> </div></div></div>',e='<div class="infobox  infobox-success" ><span class="symbol glyphicon glyphicon-check"></span><div><div class="text"> <strong>Die Signatur $$$SIGTITLE$$$ wurde erfolgreich gespeichert.</strong> </div></div></div>',f='<div class="infobox infobox-success" ><span class="symbol glyphicon glyphicon-check"></span><div><div class="text">Die Signatur <strong>$$$SIGTITLE$$$</strong> wurde $$$AMOUNTOFGROUPS$$$ Abteilungen ($$$AMOUNTOFEMPS$$$) Mitarbeiter) zugewiesen:<div><strong>$$$GROUPTITLESADDED$$$</strong></div></div></div></div>',g='<div class="infobox infobox-error" ><span class="symbol glyphicon glyphicon-alert"></span><div class="contentarea"><div class="text"><strong>Diese Signatur ist noch nicht aktiv. Weisen Sie die Signatur jetzt einer Abteilung zu.</strong></div><div class="additionaltext">Damit die Signatur in den E-Mails Ihrer Mitarbeiter angzeigt wird, müssen Sie die Signatur den Abteilungen zuweisen, in denen sich die entsprechenden Mitarbeiter befinden.</div></div></div>',h='<div  class="infobox infobox-error" ><span class="symbol glyphicon glyphicon-alert"></span><div class="contentarea"><div class="text"><strong>Die zugewiesenen Abteilungen sind leer!</strong></div><div class="additionaltext">Derzeit wird die Signatur noch bei keinem Mitarbeiter angezeigt. Fügen Sie jetzt Mitarbeiter zu den entsprechenden Abteilungen hinzu.</div></div></div>',i='<div  class="infobox infobox-error" ><span class="symbol glyphicon glyphicon-alert"></span><div class="contentarea"><div class="text"><strong>Nicht alle Mitarbeiter verfügen über die aktuellste Signatur!</strong></div><div class="additionaltext">Damit der bearbeitete Stand der Signatur bei Ihren Mitarbeitern angezeigt wird, müssen diese Mailtastic in Ihren E-Mail-Client integrieren. Möchten Sie die betroffenen Mitarbeiter jetzt informieren und Ihnen eine kurze Integrationsanleitung zusenden?</div></div></div>',j='<div class="infobox infobox-info"  ><span class="symbol glyphicon glyphicon-info-sign"></span><div><div class="text">Die Signatur <strong>$$$SIGTITLE$$$</strong> ist <strong>$$$ACTIVEINGROUPS$$$</strong> Abteilungen (<strong>$$$MEMBERSOFASSIGNEDGROUP$$$</strong> Mitarbeiter) zugewiesen</div></div></div>',k='<div ng-show="resultData.employee.amountOfAddedEmployees && resultData.employee.amountOfAddedEmployees > 0" class="infobox infobox-success"><span class="symbol glyphicon glyphicon-check"></span><div><div class="text"><strong>$$$AMOUNTOFADDEDEMPLOYEES$$$ Mitarbeiter wurde(n) erfolgreich zur Abteilung $$$GROUPTITLE$$$ hinzugefügt</strong></div></div></div>',l='<div style="margin-bottom : 15px;" class="innerheadline">Wollen Sie den Prozess wirklich vorzeitig beenden?</div>',m=!1,n=!1;if("created"===a.signature.signatureCreatedOrUpdated)l+=d,a.group.amountOfGroupsSet&&a.group.amountOfGroupsSet>0?(l+=f,n=!0,a.group.amountOfMembersGroupsSet&&a.group.amountOfMembersGroupsSet>0?m=!0:a.employee.amountOfAddedEmployees>0?(m=!0,l+=k):l+=h):l+=g;else if("updated"===a.signature.signatureCreatedOrUpdated)if(l+=e,0===a.signature.activeInGroups.length)l+=g;else{n=!0;for(var o=0,p=0;p<a.signature.activeInGroups.length;p++)o+=a.signature.activeInGroups[p].amountOfMembers;o>0?(m=!0,l+=j,l=l.replaceAll("$$$MEMBERSOFASSIGNEDGROUP$$$",o),l=l.replaceAll("$$$ACTIVEINGROUPS$$$",a.signature.activeInGroups.length)):l+=g}a.signature.rolledout===!1&&(l+=i),l=l.replaceAll("$$$SIGTITLE$$$",a.signature.title),l=l.replaceAll("$$$AMOUNTOFGROUPS$$$",a.group.amountOfGroupsSet),l=l.replaceAll("$$$AMOUNTOFEMPS$$$",a.group.amountOfMembersGroupsSet),l=l.replaceAll("$$$GROUPTITLESADDED$$$",a.group.groupTitlesAdded),l=l.replaceAll("$$$AMOUNTOFADDEDEMPLOYEES$$$",a.employee.amountOfAddedEmployees),l=l.replaceAll("$$$GROUPTITLE$$$",a.employee.groupTitleToWhichTheEmpsWereAdded),bootbox.dialog({title:"",message:l,buttons:{abort:{label:"Prozess vorzeitig beenden",className:"ownbtn btngrau",callback:b},success:{label:"Zurück",className:"ownbtn btnblau",callback:c}}})},this.defaultConfirmPrompt=function(a){return new Promise(function(b,c){bootbox.confirm({title:"",message:'<div class="othermethod"><h3 class="modal-title">Sind sie sicher?</h3><div style="margin-top:20px;" class="infobox full-width-imp  infobox-info" ><span class="symbol glyphicon glyphicon-question-sign"></span><div><div class="text">'+a+"</div></div></div>",callback:function(a){a===!0?b():c()}})})},this.defaultSuccessMessage=function(a){bootbox.dialog({title:"",message:'<div class="othermethod"><h3 class="modal-title">Fertig</h3><div style="margin-top:20px;" class="infobox full-width-imp  infobox-success" ><span class="symbol glyphicon glyphicon-check"></span><div><div class="text">'+a+"</div></div></div>",buttons:{success:{label:"Schließen",className:"ownbtn btnblau employeebuybutton"}}})},this.defaultErrorMessage=function(a){bootbox.dialog({title:"",message:'<div class="othermethod"><h3 class="modal-title">Das hat leider nicht geklappt...</h3><div style="margin-top:20px;" class="infobox full-width-imp  infobox-error" ><span style="min-width : 25px;" class="symbol glyphicon glyphicon-alert"></span><div><div class="text">'+a+"</div></div></div>",buttons:{success:{label:"Schließen",className:"ownbtn btnblau"}}})},this.rolloutDeniedNoSubscription=function(a,b){var c='<div style="margin-bottom : 15px;" class="innerheadline">Bitte buchen Sie einen Mailtastic-Tarif.</div>',d='<div class="infobox infobox-error full-width-imp" > <span class="symbol glyphicon glyphicon-info-sign"></span> <div class="contentarea">    <div class="text"><strong>Um die einheitliche Signatur auf Ihre Mitarbeiter auszurollen, benötigen Sie einen aktiven Mailtastic-Tarif.</strong></div>    <div class="sigpreview previewfield martop20 marbot20">'+a+'    </div>    <div class="additionaltext">Möchten Sie jetzt einen Mailtastic-Tarif aktivieren um Ihre neue Signatur uneingeschränkt nutzen zu können?</div> </div> </div>';bootbox.dialog({title:"",message:c+d,buttons:{success:{label:"Maitlastic Tarif jetzt buchen",className:"ownbtn btnblau",callback:b},abort:{label:"Später ausrollen",className:"ownbtn btngrau"}}})},this.integrationAdditionalInfoForAdminModal=function(a){var b='<div style="margin-bottom : 15px;line-height : 1.5;" class="innerheadline">Wichtiger Hinweis:</div><div class="line"></div><div class="roboto_bold schrift_blau">Mailtastic muss einmalig in die E-Mail-Signaturen Ihrer Mitarbeiter integriert werden.</div><br><div >Dies kann jeder Mitarbeiter i.d.R. schnell und selbstständigt vornehmen. Wir verschicken an jeden Mitarbeiter eine kurze Anleitung.</div><br><div>Einmal integriert, werden neue Mailtastic-Signaturen bzw. Kampagnen-Banner bei Ihren Mitarbeitern entweder automatisch aktualisiert, oder die Mitarbeiter erhalten eine E-Mail mit Handlungsanweisungen.</div><br><div class="roboto_bold martop15  flex"><span  style="font-size : 12px;margin-right : 10px;margin-top : 3px;" class="glyphicon glyphicon-alert schrift_rot" aria-hidden="true"></span><div><span class="schrift_rot">ACHTUNG:<br> Verwaltet Ihr Unternehmen die E-Mail-Signaturen bereits zentral?</span>Kontaktieren Sie uns. Wir helfen Ihnen gerne weiter:</div></div><div  class="flex-center-left martop25" style="margin-bottom : 7px;"><img style="width : 70px;height : 75px;" src="img/profile/Avatar_Andi.png" /><div style="margin-left : 15px;" class="schrift_blau"><div style="font-size: 18px; font-weight: bold;">Andreas Schröder</div><div><span style="font-size : 12px;" class="glyphicon glyphicon-earphone" aria-hidden="true"></span> 06182 955 70 00</div><div><span style="font-size : 12px;" class="glyphicon glyphicon-envelope" aria-hidden="true"></span> <a href="mailto:support@mailtastic.de" class="schrift_blau_imp link">support@mailtastic.de</a></div</div></div>';bootbox.dialog({title:"",message:b,buttons:{success:{label:"<span class='roboto_medium'>Zur Anleitung</span> <span class='roboto_light'>(Diese erhalten auch Ihre Mitarbeiter)</span>",className:"ownbtn btnblau",callback:a}}})}}]),a.service("assistantconfigService",["$rootScope","alertService","employeeService",function(a,b,c){var d={currentStep:"",entryPoint:"",breadcrumps:[],breadcrumpsdone:[],headline:"",resultdata:{
campaign:{},group:{},employee:{},signature:{}}};return d.reset=function(){this.currentStep="",this.entryPoint="",this.breadcrumps=[],this.breadcrumpsdone=[],this.headline="",this.groupCreated=!1,this.groupId=null,this.disableGroupArea=!1,this.resultdata={group:{},employee:{},campaign:{},signature:{}}},d.inviteMembers=function(){d.resultdata.employee.idsAdded&&Array.isArray(d.resultdata.employee.idsAdded)&&0!==d.resultdata.employee.idsAdded.length?c.sendInvitations(d.resultdata.employee.idsAdded).then(function(a){a.success===!0?(d.resultdata.rolloutDone=!0,d.resultdata.amountOfRolledOut=$scope.config.resultdata.employee.idsAdded.length,d.breadcrumpsdone.push("Mitarbeiter informiert"),d.breadcrumps=["Fertig"]):b.defaultErrorMessage(Strings.errors.DATEN_NICHT_GELADEN)}):b.defaultErrorMessage(Strings.errors.DATEN_NICHT_GELADEN)},d}]),a.service("authService",["$http","$q","localStorageService","requestService",function(a,b,c,d){var e={},f={isAuth:!1,userName:"",useRefreshTokens:!1,code:""},g=function(a){f.token=a,c.set("AuthToken",a)},h=function(){var a=c.get("AuthToken");return a},i=function(){return d.send({method:"get",url:"/googleapi/authurl",authorization:!0,success:function(a,b){b.resolve(a)}})},j=function(a){return d.send({method:"get",url:"/googleapi/token?code="+a,authorization:!0,success:function(a,b){b.resolve(a)}})};return e.refreshToken=!1,e.authentication=f,e.setAuthToken=g,e.getSavedToken=h,e.getToken=j,e.getAuthUrl=i,e}]),a.service("browseService",["$location","$window","$state","$stateParams",function(a,b,c,d){this.back=function(a){a=a||-1,b.history.go(a)},this.navigate=function(b,c){c?a.path(b).replace():a.path(b)},this.go=function(a,b,d,e){return c.go(a,b,{location:!d||"replace",notify:void 0===e||e})},this.current=function(){return c.current},this.params=function(){return c.params},this.location=function(){return a.path()},this.reload=function(a){a?b.location.reload():c.transitionTo(c.current,d,{reload:!0,inherit:!1,notify:!0})}}]),a.service("browserService",["$window",function(a){return function(){var b=a.navigator.userAgent,c={chrome:/chrome/i,safari:/safari/i,firefox:/firefox/i,ie:/internet explorer/i};for(var d in c)if(c[d].test(b))return d;return"unknown"}}]),a.service("campaignService",["$rootScope","requestService","intercomService",function(a,b,c){this.get=function(){return b.send({method:"get",url:"/campaigns",authorization:!0,success:function(a,b){b.resolve(a)}})},this.getOne=function(a){return b.send({method:"get",url:"/campaigns/"+a,authorization:!0})},this.add=function(a){return b.send({method:"post",url:"/campaigns",data:a,authorization:!0,success:function(a,b){a.success===!0&&c.campaignCreated(),b.resolve(a)}})},this.update=function(a){return b.send({method:"put",url:"/campaigns",data:a,authorization:!0,success:function(a,b){a.success===!0&&Intercom("trackEvent","Campaign modified"),b.resolve(a)}})},this["delete"]=function(a){return b.send({method:"delete",url:"/campaigns/"+a,authorization:!0,success:function(a,b){b.resolve(a)}})},this.deleteMany=function(a){return b.send({method:"post",url:"/campaigns/del/many",authorization:!0,data:{campaignIds:a},success:function(a,b){b.resolve(a)}})},this.edit=function(a){!a.id},this.results=function(a){return b.send({method:"get",url:"/campaigns/results/"+id,authorization:!0,success:function(a,b){b.resolve(a)}})},this.getStatistics=function(a,c){return b.send({method:"get",url:"/campaigns/data/statistics/?begin="+a+"&end="+c,authorization:!0,success:function(a,b){b.resolve(a)}})},this.getStatisticsSingle=function(a,c,d){return b.send({method:"get",url:"/campaigns/data/statistics/single/?begin="+a+"&end="+c+"&campaignId="+d,authorization:!0,success:function(a,b){b.resolve(a)}})},this.getStatisticsByGroup=function(a){return b.send({method:"get",url:"/campaigns/data/statisticsbygroup/"+a,authorization:!0,success:function(a,b){b.resolve(a)}})}}]),a.service("employeeImportService",["signatureService","alertService","$q","$http","employeeService","userService","XLSXReaderService","paymentService","$uibModal",function(a,b,c,d,e,f,g,h,i){var j=this;this.importdata={json:[],amountOfEmployees:null,filename:""},this.fileChanged=function(a){var b=c.defer();j.sheets=[],j.excelFile=a[0],j.importdata.filename=j.excelFile.name;var d=/(?:\.([^.]+))?$/;return"xlsx"!==d.exec(j.importdata.filename)[1]&&(alert(Strings.employeeimport.EXCEL_WRONG_FORMAT),b.reject()),g.readFile(j.excelFile,null).then(function(a){a.json?Array.isArray(a.json)&&0!==a.json.length?(j.importdata.json=a.json,b.resolve()):(alert(Strings.employeeimport.EXCEL_NO_ENTRY),b.reject()):(alert(Strings.employeeimport.EXCEL_INVALID),b.reject())}),b.promise},this.checkImportData=function(a){var b=c.defer(),d=/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,f=[],g=[];return a=e.get().then(function(a){for(var c=0;c<j.importdata.json.length;c++){if(j.importdata.json[c].Email)if(d.test(j.importdata.json[c].Email)===!1)alert(Strings.employeeimport.EXCEL_EMAIL_MALFORMED+"<br>"+j.importdata.json[c].Email),j.importdata.json=null,b.reject();else{var e=jQuery.grep(a,function(a,b){return a.email===j.importdata.json[c].Email});e.length>0?g.push(j.importdata.json[c].Email):f.push(j.importdata.json[c].Email)}else alert(Strings.employeeimport.EXCEL_EMAIL_MISSINS),j.importdata.json=null,b.reject();j.importdata.json[c].Vorname||(j.importdata.json[c].Vorname=""),j.importdata.json[c].Nachname||(j.importdata.json[c].Nachname="")}j.importdata.validEntrys=f,j.importdata.alreadyInSystemEntrys=g,b.resolve()}),b.promise},this.importUsers=function(a,d,f){function g(){k(!0)}function k(b){if(!$("#importmodalcheckbox").prop("checked")&&b!==!0)return l.reject("NO GROUP"),!1;if(j.importdata.json.length<1)alert(Strings.employeeimport.EXCEL_NO_ENTRY);else if(j.importdata.validEntrys.length<1);else{var c=null;"empty"!==a&&(c=a),e.addMany(j.importdata.json,c).then(function(a){if(a.success===!0&&a.adresses,1)if(a.success===!0){for(var b=0;b<a.idsAdded.length;b++)d.resultdata.employee.idsAdded.push(a.idsAdded[b]);alert("<strong>"+a.idsAdded.length+" Mitarbeiter wurde(n) erfolgreich importiert.</strong>"),d.resultdata.employee.amountOfImported=j.importdata.validEntrys.length,document.getElementById("employeeimport").value=null,j.importdata.json=[],h.syncEmployees().then(function(a){}),document.getElementById("employeeimport").value=null,j.importdata.json=[],l.resolve()}else 76===a.code?alert(Strings.employeeimport.EXCEL_ALL_EMAIL_EXISTENT):alert(Strings.employeeimport.EXCEL_IMPORT_UNSUCCESSFUL);else{for(var b=0;b<a.idsAdded.length;b++)d.resultdata.employee.idsAdded.push(a.idsAdded[b]);var c="",e=0,f=0,g=j.importdata.json.length-a.adresses.length;d.resultdata.employee.amountOfImported=g,a.adresses.length<11?e=a.adresses.length:(e=10,f=a.adresses.length-10);for(var b=0;b<e;b++)c+=a.adresses[b],c+="<br>";f>0&&(c+="Und "+f+" weitere."),alert("<strong>Import Teilweise erfolgt.<br>Es wurden "+g+" importiert. </strong><br>Folgende E-Mail Adressen waren bereits im System vorhanden:<br> "+c),h.syncEmployees().then(function(a){}),document.getElementById("employeeimport").value=null,j.importdata.json=[],l.resolve()}})}}var l=c.defer();return"empty"===a?(b.defaultErrorMessage("Bitte wählen Sie die Abteilung aus, der die neuen Mitarbeiter hinzugefügt werden sollen."),void l.reject("NO GROUP")):(f=h.getUserStatus().then(function(a){if(a.success===!1)alert(Strings.errors.DATEN_NICHT_GELADEN);else{for(var c="",d=0;d<j.importdata.alreadyInSystemEntrys.length;d++)c+=j.importdata.alreadyInSystemEntrys[d],d!==j.importdata.alreadyInSystemEntrys.length-1&&(c+=", ");if(1==a.forceAllow||a.hasTestTime===!0||a.hasSubscription===!0&&a.amountOfFreeMembers>=j.importdata.validEntrys.length)b.importEmployeeFree({filename:j.importdata.filename,totalAmount:j.importdata.json.length,validAmount:j.importdata.validEntrys.length,freeAmount:a.amountOfFreeMembers,alreadyExistant:j.importdata.alreadyInSystemEntrys.length,emailsAsString:c},g,function(){document.getElementById("employeeimport").value=null});else if(a.hasSubscription===!0&&a.amountOfFreeMembers<j.importdata.validEntrys.length)b.importEmployeeBuy({filename:j.importdata.filename,totalAmount:j.importdata.json.length,validAmount:j.importdata.validEntrys.length,freeAmount:a.amountOfFreeMembers,alreadyExistant:j.importdata.alreadyInSystemEntrys.length,emailsAsString:c,billing_interval:a.billing_interval,customPrice:a.customPrice},k,function(){document.getElementById("employeeimport").value=null});else{document.getElementById("employeeimport").value=null;i.open({animation:!0,templateUrl:"booking/accountexpiredmodal/modals/unallowed_action_modal.html",controller:"AccountExpiredModalInstanceCtrl",size:"lg",windowClass:"expiredmodalcontainer"})}}}),l.promise)}}]),a.service("employeeHelperService",["signatureService","alertService","$q","$http","employeeService","userService",function(a,b,c,d,e,f){this.prepareEmployeeData=function(){var d=c.defer(),e=[];if(id)e.push(id);else{for(var f=0;f<$scope.data.selectedSigs.length;f++)e.push($scope.data.selectedSigs[f].id);0===e.length&&(alert("Bitte selektieren Sie mindestens einen Mitarbeiter."),d.reject())}var g=e.length>1?"Möchten Sie diese Signaturen wirklich löschen?":"Möchten Sie diese Signatur wirklich löschen?";return bootbox.confirm({size:"small",message:g,callback:function(c){c===!0?a["delete"](e).then(function(a){a.success!==!0?(b.defaultErrorMessage(Strings.signature.list.errors.DELETION_FAILED),d.reject()):(b.defaultSuccessMessage(Strings.signature.list.success.DELETION_COMPLETED),d.resolve())}):d.reject()}}),d.promise}}]),a.service("employeeService",["$rootScope","requestService","intercomService","googlesyncservice",function(a,b,c,d){this.get=function(){return b.send({method:"get",url:"/employees",authorization:!0,success:function(a,b){b.resolve(a)}})},this.getGoogleSyncUsersID=function(a,c){return b.send({method:"get",url:"/employees/getGoogleSyncUsersID/"+a+"/"+c,authorization:!0,success:function(a,b){b.resolve(a)}})},this.getOne=function(a){return b.send({method:"get",url:"/employees/"+a,authorization:!0,success:function(a,b){b.resolve(a)}})},this.update=function(a){return b.send({method:"put",url:"/employees",data:a,authorization:!0,success:function(a,b){b.resolve(a)}})},this.updateSyncUsersType=function(a,c){return b.send({method:"put",url:"/employees/modify/syncType",data:{employees:a,isAutoSync:c},authorization:!0,success:function(a,b){b.resolve(a)}})},this.updateSyncActivation=function(a,c){return b.send({method:"put",url:"/employees/modify/syncActivate",data:{employees:a,isSyncActivated:c},authorization:!0,success:function(a,b){b.resolve(a)}})},this.add=function(a){return b.send({method:"post",url:"/employees",data:a,authorization:!0,success:function(a,b){a.success===!0&&c.employeeAdded(),b.resolve(a)}})},this.addMany=function(a,d){return b.send({method:"post",url:"/employees/many",data:{empsasjson:a,group:d},authorization:!0,success:function(a,b){a.success===!0&&c.employeeAddedMany(),b.resolve(a)}})},this.addVersaCommerceUsers=function(){return b.send({method:"post",url:"/employees/versacommerce/createmailtplusers",authorization:!0,success:function(a,b){a.success===!0?(Intercom("trackEvent","Versa commerce users created"),b.resolve(a)):b.reject(a.code)}})},this.setUserManagedByGoogle=function(a){return b.send({method:"post",url:"/employees/managedByGoogle",data:{employeeObject:a},authorization:!0,success:function(a,b){a.success===!0?b.resolve(a):b.reject(a)}})},this.addGoogleSyncedUsers=function(a,c){return b.send({method:"post",url:"/employees/manySyncUsers",data:{empsasjson:a,group:c},authorization:!0,success:function(a,b){b.resolve(a)}})},this["delete"]=function(a){return b.send({method:"delete",url:"/employees/"+a,authorization:!0,success:function(a,b){a.success===!0&&c.employeeRemoved(),b.resolve(a)}})},this.moveToGroup=function(a,c){return b.send({method:"put",url:"/employees/modify/group",data:{employees:a,groupId:c},authorization:!0,success:function(b,e){if(b.success===!0){a.length>1&&Intercom("trackEvent","Many Employees moved to other group"),1===a.length&&Intercom("trackEvent","One Employee moved to other group");var f=[];f.push(c),d.updateGoogleSignatureForGroups(f)}e.resolve(b)}})},this.moveToDefaultGroup=function(a,c){return b.send({method:"put",url:"/employees/modify/defaultGroup",data:{employees:a,groupId:c},authorization:!0,success:function(a,b){b.resolve(a);var e=[];e.push(c),d.updateGoogleSignatureForGroups(e)}})},this.activateEmployee=function(a){return b.send({method:"post",url:"/account/activate/employee",data:a,authorization:!1})},this.deleteMany=function(a){return b.send({method:"post",url:"/employees/del/many",data:{empids:a},authorization:!0,success:function(a,b){a.success===!0&&c.employeeRemovedMany(),b.resolve(a)}})},this.sendFeedback=function(a){return b.send({method:"post",url:"/employees/feedback/webapp",data:{text:a},authorization:!0})},this.sendInvitations=function(a){return b.send({method:"post",url:"/employees/invitation/send",data:{userIds:a},authorization:!0})},this.resendInvitation=function(a){return b.send({method:"post",url:"/employees/invitation/resend",data:{userIds:a},authorization:!0,success:function(a,b){a.success===!0&&Intercom("trackEvent","Resent invitation"),b.resolve(a)}})},this.sendInvitationTestmail=function(a){return b.send({method:"post",url:"/employees/invitation/sendinvitationtestmail",authorization:!0,success:function(a,b){a.success===!0&&Intercom("trackEvent","Invitation testmail sent to admin"),b.resolve(a)}})},this.setEmployeeInfo=function(a,c){return b.send({method:"post",url:"/employees/userinfo",data:{userid:a,data:c},authorization:!0,success:function(a,b){a.success===!0&&Intercom("trackEvent","Changed user info data"),b.resolve(a)}})},this.setEmployeeInfoSingle=function(a,c,d,e){return b.send({method:"post",url:"/employees/userinfo/single",data:{userid:a,tag:c,type:d,value:e},authorization:!0,success:function(a,b){a.success===!0&&Intercom("trackEvent","Changed user info data"),b.resolve(a)}})},this.sendothermailclientnotification=function(a,c){return b.send({method:"post",url:"/employees/mailclients/other",data:{userId:a,client:c},authorization:!0})},this.getIntegrationData=function(a,c){return b.send({method:"get",url:"/account/employee/integrationdata/"+a+"/"+c,authorization:!1})},this.complementUserInfoData=function(a,c,d){return b.send({method:"post",url:"/account/employee/complementdata/"+a+"/"+c,data:{fields:d},authorization:!0})},this.updateuserSync=function(a){return b.send({method:"post",url:"/employees/updateuserSync",data:{empids:a},authorization:!0})}}]),a.service("googlesyncservice",["$rootScope","requestService","authService",function(a,b,c){this.get=function(){return b.send({method:"get",url:"/googleSync",authorization:!0,success:function(a,b){b.resolve(a)}})},this.add=function(a){return b.send({method:"post",url:"/googleSync",data:a,authorization:!0,success:function(a,b){b.resolve(a)}})},this.update=function(a){return b.send({method:"put",url:"/googleSync",data:a,authorization:!0,success:function(a,b){b.resolve(a)}})},this.deleteInfo=function(a){return b.send({method:"delete",url:"/googleSync/"+a,authorization:!0,success:function(a,b){b.resolve(a)}})},this.getListOfUsers=function(){var a=c.getSavedToken(),d={googleToken:a};return b.send({method:"post",url:"/googleSync/listusers",data:d,authorization:!0,success:function(a,b){b.resolve(a)}})},this.updateSignature=function(a){var d=c.getSavedToken(),e={users:a,googleToken:d};return b.send({method:"put",url:"/googleSync/updatesignature",data:e,authorization:!0,success:function(a,b){b.resolve(a)}})},this.updateGoogleSignatureForGroups=function(a){var c={groups:a};return b.send({method:"post",url:"/googleSync/updatesignature/groups",data:c,authorization:!0,success:function(a,b){b.resolve(a)}})}}]),a.service("groupsService",["$rootScope","requestService","intercomService","googlesyncservice",function(a,b,c,d){this.get=function(){return b.send({method:"get",url:"/groups",authorization:!0,success:function(a,b){b.resolve(a)}})},this.getOne=function(a){return b.send({method:"get",url:"/groups/"+a,authorization:!0,success:function(a,b){b.resolve(a)}})},this.search=function(a){return b.send({method:"get",url:"/groups/search/withq?search="+a,authorization:!0,success:function(a,b){b.resolve(a)}})},this.addSyncGroup=function(a){return b.send({method:"post",url:"/groups/syncGroup",data:a,authorization:!0,success:function(a,b){b.resolve(a)}})},this.setCampaign=function(a,c){return b.send({method:"put",url:"/groups/modify/campaign",data:{campaignId:c,groups:a},authorization:!0,success:function(b,c){b.success===!0&&(1===a.length?Intercom("trackEvent","Assigned campaign to one group"):a.length>1&&Intercom("trackEvent","Assigned campaign to many groups")),c.resolve(b)}})},this.setSignature=function(a,c){return b.send({method:"put",url:"/groups/modify/signature",data:{signatureId:c,groups:a},authorization:!0,success:function(b,c){b.success===!0&&(1===a.length?Intercom("trackEvent","Assigned signature to one group"):a.length>1&&Intercom("trackEvent","Assigned signature to many groups"),d.updateGoogleSignatureForGroups(a)),c.resolve(b)}})},this.getPotentialMembers=function(a,c){return b.send({method:"get",url:"/groups/potmembers/"+a+"?search="+c,authorization:!0,success:function(a,b){b.resolve(a)}})},this.getMembers=function(a){return b.send({method:"get",url:"/groups/members/"+a,authorization:!0,success:function(a,b){b.resolve(a)}})},this.update=function(a){return b.send({method:"put",url:"/groups",data:a,authorization:!0,success:function(a,b){a.success===!0&&Intercom("trackEvent","Group modified"),b.resolve(a)}})},this.add=function(a){return b.send({method:"post",url:"/groups",data:a,authorization:!0,success:function(a,b){a.success===!0&&c.groupCreated(),b.resolve(a)}})},this["delete"]=function(a){return b.send({method:"delete",url:"/groups/"+a,authorization:!0,success:function(a,b){b.resolve(a)}})},this.deleteMany=function(a){return b.send({method:"post",url:"/groups/del/many",data:{groupids:a},authorization:!0})},this.getStatstics=function(){return b.send({method:"get",url:"/groups/data/statistics",authorization:!0,success:function(a,b){b.resolve(a)}})}}]),a.service("intercomService",["StorageFactory","$window",function(a,b){this.userLoggedIntoAppCues=function(){var b=a.get("userFirstName"),c=a.get("userLastName"),d=a.get("userEmail"),e=a.get("userCreatedAt"),f=a.get("userId");if(b&&c&&d&&e&&d){var g="";g=b||c?b+" "+c:d;var h="";return h=e?moment(e).format("X"):moment().format("X"),e=moment(e).format("X"),Appcues.identify(f,{name:g,email:d,created_at:h})}},this.userLoggedIn=function(){var c=a.get("userFirstName"),d=a.get("userLastName"),e=a.get("userEmail"),f=a.get("userCreatedAt"),g=a.get("userId");if(c&&d&&e&&f&&e){var h="";h=c||d?c+" "+d:e;var i="";return i=f?moment(f).format("X"):moment().format("X"),f=moment(f).format("X"),b.Intercom("boot",{app_id:"l9hkw9ed",user_id:g,name:h,email:e,created_at:i})}},this.shutDown=function(){b.Intercom("shutdown")},this.update=function(){b.Intercom("update")},this.employeeAdded=function(){Intercom("trackEvent","Employee added")},this.employeeAddedMany=function(){Intercom("trackEvent","Employee added many")},this.employeeRemoved=function(){Intercom("trackEvent","Employee removed")},this.employeeRemovedMany=function(){Intercom("trackEvent","Employee(s) removed")},this.signatureCreated=function(){Intercom("trackEvent","Signature created")},this.signatureRolledOut=function(){Intercom("trackEvent","Signature rolled out")},this.bookedMailtasticStarter=function(){Intercom("trackEvent","Booked Mailtastic Starter")},this.campaignCreated=function(){Intercom("trackEvent","Campaign created")},this.groupCreated=function(){Intercom("trackEvent","Group created")}}]),a.service("listHelperService",["$location","$window","$state","$stateParams","userService","$q","signatureHelperService",function(a,b,c,d,e,f,g){var h=this;this.all=[],this.selected=[],this.selectionType="multi",this.isSignatureRolledOut=function(a){var b=g.isSignatureRolledOut(a);return b},this.isSelectedAll=function(){return h.selected.length===h.all.length},this.selectAll=function(a){for(var b=a.target,c=b.checked?"add":"remove",d=0;d<h.all.length;d++){var e=h.all[d];h.updateSelected(c,e)}},this.selectAllOuter=function(){for(var a=h.selected.length===h.all.length?"remove":"add",b=0;b<h.all.length;b++){var c=h.all[b];h.updateSelected(a,c)}},this.updateSelected=function(a,b){if("multi"===h.selectionType){var c=jQuery.grep(h.selected,function(a,c){return a.id===b.id});if("add"===a&&0===c.length&&h.selected.push(b),"remove"===a&&c.length>0)for(var d=0;d<h.selected.length;d++){var e=h.selected[d];if(e.id===b.id){h.selected.splice(d,1);break}}}else"add"===a&&(h.selected.length=0,h.selected.push(b)),"remove"===a&&(h.selected.length=0)},this.updateSelection=function(a,b){var c=a.target,d=c.checked?"add":"remove";h.updateSelected(d,b)},this.isSelected=function(a){var b=jQuery.grep(h.selected,function(b,c){return b.id===a.id});return 0!==b.length},this.rowClicked=function(a){for(var b=a.id,c="add",d=0;d<h.selected.length;d++)if(b===h.selected[d].id){c="remove";break}h.updateSelected(c,a)},this.getSelectedClass=function(a){return h.isSelected(a)?"selected":""}}]),a.service("paymentService",["$location","$window","$state","$stateParams","userService","$q","alertService",function(a,b,c,d,e,f,g){function h(a,b){var c="";return"monthly"===b?c=i.additionIdMonthly:"yearly"===b&&(c=i.additionIdYearly),i.customAddition&&(c=i.customAddition),{subscription:{billing_interval:b,additions:[{nid:c,quantity:a}]}}}var i;"local"===GlobalConfig.config.env||"amazon"===GlobalConfig.config.env?i={isaacCustomerNumber:null,isaacCustomerToken:null,isaac10:null,additionIdMonthly:"uQF4-MZ9jN8q0C3lXlLJwg",additionIdYearly:"M1anuJcZd8GDoKAtLqRw2Q",planIdMonthly:"enxP8TQEv2jIAAyl2u0yDA",planIdYearly:"evqVeNFPQ2o6lgFltSdG8Q",minEmps:5,currentAmountOfEmployees:null}:"production"===GlobalConfig.config.env&&(i={isaacCustomerNumber:null,isaacCustomerToken:null,isaac10:null,additionIdMonthly:"g98Zqz1BBldRlTxndbuFkA",additionIdYearly:"9xcph1Huv8N-52976l2LKQ",planIdMonthly:"SC87CYED6RocBtuqM9ol7A",planIdYearly:"XwcWmvC2r6O0V1gCgKgnbw",minEmps:5,currentAmountOfEmployees:null});var j=this;this.prepare=function(){var a=f.defer();if(!i.isaac10)try{"local"===GlobalConfig.config.env||"amazon"===GlobalConfig.config.env?i.isaac10=new Isaac10("mailtastic-playground"):"production"===GlobalConfig.config.env&&(i.isaac10=new Isaac10("mailtastic"))}catch(b){a.resolve(!1)}return i.isaacCustomerNumber&&i.isaacCustomerToken?a.resolve(!0):e.getAccountData().then(function(b){b?b.isaacCustomerNumber&&b.isaacCustomerToken?(i.isaacCustomerNumber=b.isaacCustomerNumber,i.isaacCustomerToken=b.isaacCustomerToken,i.isaac10.authenticateCustomer(i.isaacCustomerNumber,i.isaacCustomerToken),i.customPlan=b.isaacCustomPlan,i.customAddition=b.isaacCustomAddition,a.resolve(!0)):a.resolve(!1):(g.defaultErrorMessage(Strings.errors.DATEN_NICHT_GELADEN),a.resolve(!1))}),a.promise},this.getCustomerSubscriptionData=function(){var a=f.defer();return j.prepare().then(function(b){b===!0?i.isaac10.getSubscriptions().then(function(b){if(b&&b.subscriptions&&0!==!b.subscriptions.length){for(var c=null,d=0;d<b.subscriptions.length;d++)if("ongoing"===b.subscriptions[d].status||"canceled"===b.subscriptions[d].status){c=b.subscriptions[d].id;break}null===c?a.resolve(null):i.isaac10.editSubscription(c).then(function(b){a.resolve(b)},function(b){alert(Strings.errors.TECHNISCHER_FEHLER),a.resolve(null)},function(){a.resolve(!1)})}else a.resolve(null)},function(b){a.resolve(!1)}):a.resolve(!1)}),a.promise},this.getInvoices=function(){var a=f.defer();return j.prepare().then(function(b){b===!0?i.isaac10.getBills(i.isaacCustomerNumber).then(function(b){a.resolve(b)}):a.resolve(!1)}),a.promise},this.clear=function(){"local"===GlobalConfig.config.env||"amazon"===GlobalConfig.config.env?i={isaacCustomerNumber:null,isaacCustomerToken:null,isaac10:new Isaac10("mailtastic-playground"),additionIdMonthly:"uQF4-MZ9jN8q0C3lXlLJwg",additionIdYearly:"M1anuJcZd8GDoKAtLqRw2Q",planIdMonthly:"enxP8TQEv2jIAAyl2u0yDA",planIdYearly:"evqVeNFPQ2o6lgFltSdG8Q",minEmps:5,currentAmountOfEmployees:null}:"production"===GlobalConfig.config.env&&(i={isaacCustomerNumber:null,isaacCustomerToken:null,isaac10:new Isaac10("mailtastic"),additionIdMonthly:"g98Zqz1BBldRlTxndbuFkA",additionIdYearly:"9xcph1Huv8N-52976l2LKQ",planIdMonthly:"SC87CYED6RocBtuqM9ol7A",planIdYearly:"XwcWmvC2r6O0V1gCgKgnbw",minEmps:5,currentAmountOfEmployees:null})},this.downloadInvoice=function(a){j.prepare().then(function(b){b!==!0?g.defaultErrorMessage(Strings.errors.DATEN_NICHT_GELADEN):i.isaac10.downloadBill(a)})},this.syncEmployees=function(){function a(){i.isaac10.getSubscriptions().then(function(a){if(a&&a.subscriptions&&0!==!a.subscriptions.length&&a.subscriptions[0].id){for(var c=null,d=0;d<a.subscriptions.length;d++)if("ongoing"===a.subscriptions[d].status||"canceled"===a.subscriptions[d].status){c=a.subscriptions[d].id;break}null===c?b.resolve(!1):i.isaac10.editSubscription(c).then(function(a){if(a.subscription.additions&&0!==a.subscription.additions.length&&a.subscription.additions[0].quantity){var d=a.subscription.additions[0].quantity;e.getAmountOfUsers().then(function(e){if(!e)return void g.defaultErrorMessage(Strings.errors.DATEN_NICHT_GELADEN);var f;if(f=e<=i.minEmps?i.minEmps:e,f!==d){var j=h(f,a.subscription.billing_interval);i.isaac10.updateSubscription(c,j).then(function(a){a&&a.success===!0?b.resolve(!0):b.resolve(!1)})}else b.resolve(!0)})}else b.resolve(!1)})}else b.resolve(!1)})}var b=f.defer();return j.getUserStatus().then(function(c){c.success===!1||(c.forceAllow===!0||c.hasTestTime===!0?b.resolve(!0):c.hasSubscription===!1?b.resolve(!1):a())})["catch"](function(){g.defaultErrorMessage(Strings.payment.errors.SYNC_SUBSCRIPTION_MISSING)}),b.promise},this.getIsaacAccountData=function(){var a=f.defer();return j.prepare().then(function(b){i.isaac10.getAccount().then(function(b){b.account&&b.account.account_data?a.resolve(b.account.account_data):a.resolve(null)},function(b){a.resolve(null)})}),a.promise},this.updateIsaacAccountData=function(a){var b=f.defer();return j.prepare().then(function(c){i.isaac10.updateAccountData({account_data:a}).then(function(a){a.success&&a.success!==!1?b.resolve(!0):b.resolve(!1)},function(a){b.resolve(!1)})}),b.promise},this.getUserStatus=function(){var a=f.defer(),b={success:!1,hasSubscription:!1,amountOfFreeMembers:0,forceAllow:!1,hasTestTime:!1,billing_interval:"",customPrice:""};return j.prepare().then(function(c){e.getOverallStats().then(function(c){if(c.success!==!0)b.success=!1,a.resolve(b);else{c=c.data[0],b.success=!0,1==c.forceAllow?b.forceAllow=!0:b.forceAllow=!1;var d=moment(c.createdAt),e=moment(),h=e.diff(d,"days");h<14?(b.hasTestTime=!0,b.daysLeft=14-h):b.hasTestTime=!1,j.getCustomerSubscriptionData().then(function(a){if(a)if("expired"===a.subscription.status)b.hasSubscription=!1;else{b.hasSubscription=!0,b.hasTestTime=!1,b.billing_interval=a.subscription.billing_interval;var d=c.amountOfUsers,e=a.subscription.additions&&a.subscription.additions&&a.subscription.additions[0].quantity?a.subscription.additions[0].quantity:0;0===e?i.minEmps:e;var g=e-d;g>0?b.amountOfFreeMembers=g:b.amountOfFreeMembers=0}else b.hasSubscription=!1;return c.isaacCustomPlan&&c.isaacCustomAddition?f.reject():f.resolve()}).then(function(){a.resolve(b)},function(){j.getPriceData(c.isaacCustomPlan,c.isaacCustomAddition).then(function(c){b.customPrice=c,a.resolve(b)})})["catch"](function(a){g.defaultErrorMessage(Strings.errors.DATEN_NICHT_GELADEN)})}})}),a.promise},this.updatePaymentInterval=function(a){var b=f.defer();return j.prepare().then(function(c){a.billing_interval?"monthly"===a.billing_interval?b.resolve(!1):"yearly"===a.billing_interval&&i.isaac10.getSubscriptions().then(function(a){a&&a.subscriptions&&0!==!a.subscriptions.length?e.getAmountOfUsers().then(function(c){if(c){c<=i.minEmps&&(c=i.minEmps);for(var d=null,e=0;e<a.subscriptions.length;e++)if("ongoing"===a.subscriptions[e].status||"canceled"===a.subscriptions[e].status){d=a.subscriptions[e].id;break}null===d?b.resolve(null):i.isaac10.upgradeDowngradeSubscription(d,{subscription:{plan_nid:i.planIdYearly,billing_interval:"yearly",additions:[{nid:i.additionIdYearly,quantity:c}]}}).then(function(a){a.success&&a.success.subscription_id?i.isaac10.thankYouAfterUpgradeDowngrade(a.success.subscription_id).then(function(a){a.plan?b.resolve(!0):b.resolve(!1)}):b.resolve(!1)},function(a){b.resolve(!1)})}else b.resolve(!1)},function(a){b.resolve(!1)}):b.resolve(!1)},function(a){b.resolve(!1)}):b.resolve(!1)}),b.promise},this.updatePaymentData=function(){},this.updateBillingData=function(a){var b=f.defer();return j.prepare().then(function(c){i.isaac10.updateBillingData({billing_data:a}).then(function(a){a.success===!0?b.resolve(!0):b.resolve(!1)},function(a){b.resolve(!1)})}),b.promise},this.subscribeInvoice=function(a,b){var c=f.defer();return j.prepare().then(function(d){b<=i.minEmps&&(b=i.minEmps),a.customPlanData&&a.customPlanData.plan&&a.customPlanData.addition?(a.plan_nid=a.customPlanData.plan,a.additions=[{nid:a.customPlanData.addition,quantity:b}]):"monthly"===a.billing_interval?(a.plan_nid=i.planIdMonthly,a.additions=[{nid:i.additionIdMonthly,quantity:b}]):"yearly"===a.billing_interval&&(a.additions=[{nid:i.additionIdYearly,quantity:b}],a.plan_nid=i.planIdYearly),a.payment_method="invoice",d===!0?i.isaac10.addSubscription({id:null,subscription:a}).then(function(a){a&&a.success&&a.success.subscription_id?a.success&&a.success.subscription_id&&i.isaac10.thankYouAfterAdd(a.success.subscription_id.toString()).then(function(b){b.plan?i.isaac10.updateBillingData({billing_data:a}).then(function(){}):g.defaultErrorMessage("Ihre Registrierung konnte leider nicht abgeschlossen werden. Bitte bitte wenden Sie sich an den Support unter "+Strings.supportdata.supporttelnr+" oder unter "+Strings.supportdata.supportemail)}):c.resolve(!1)}):(a.password=Math.floor(9e5*Math.random())+1e5,a.password=""+a.password,a.double_opt_in=!1,i.isaac10.register({register:a}).then(function(b){if(b&&b.success&&b.success.customer_number&&b.success.subscription_id)if(b.success){var d={isaacCustomerNumber:b.success.customer_number,isaacCustomerToken:b.success.customer_token};a.customPlanData&&a.customPlanData.plan&&a.customPlanData.addition&&(d.isaacCustomPlan=a.customPlanData.plan,d.isaacCustomAddition=a.customPlanData.addition,i.customAddition=a.customPlanData.addition,i.customPlan=a.customPlanData.plan),e.addPaymentCredentials(d).then(function(a){a.success===!0?(i.isaacCustomerNumber=b.success.customer_number,i.isaacCustomerToken=b.success.customer_token,i.isaac10.authenticateCustomer(i.isaacCustomerNumber,i.isaacCustomerToken),i.isaac10.thankYouAfterRegister(b.success.subscription_id,{double_opt_in:!1}).then(function(a){c.resolve(!0)},function(a){g.defaultErrorMessage("Ihre Registrierung konnte nicht leider nicht abgeschlossen werden. Bitte bitte wenden Sie sich an den Support unter "+Strings.supportdata.supporttelnr+" oder unter "+Strings.supportdata.supportemail),c.resolve(!1)})):c.resolve(!1)})}else g.defaultErrorMessage("Ihre Registrierung konnte nicht leider nicht abgeschlossen werden. Bitte bitte wenden Sie sich an den Support unter "+Strings.supportdata.supporttelnr+" oder unter "+Strings.supportdata.supportemail);else c.resolve(!1)},function(a){g.defaultErrorMessage("Ihre Registrierung konnte nicht leider nicht abgeschlossen werden. Bitte bitte wenden Sie sich an den Support unter "+Strings.supportdata.supporttelnr+" oder unter "+Strings.supportdata.supportemail)}))}),c.promise},this.getPriceData=function(a,b){if(!a||!b)return f.reject("missing parameters : plan : "+a+" : addition : "+b);var c=f.defer();return j.prepare().then(function(){var b=f.defer();return i.isaac10.getPlan(a).then(function(a){b.resolve(a)},function(){b.reject("Custom Plan data not found");
}),b.promise}).then(function(a){var d;if(a=a.plan,a&&a.additions&&0!==a.additions.length)for(var e=0;e<a.additions.length;e++)if(a.additions[e].nid===b){var f=a.additions[e];if(f.price&&3===f.price.length){f.price[0].cents?d=f.price[0].cents:f.price[1].cents?d=f.price[1].cents/4:f.price[2].cents&&(d=f.price[2].cents/12);break}}d?c.resolve(d):c.reject("price not found")})["catch"](function(a){c.reject(a)}),c.promise}}]),a.service("signatureService",["requestService","intercomService",function(a,b){this.getAll=function(){return a.send({method:"get",url:"/signatures",authorization:!0,success:function(a,b){b.resolve(a)}})},this.getOne=function(b){return a.send({method:"get",url:"/signatures/single/"+b,authorization:!0,success:function(a,b){b.resolve(a)}})},this.update=function(b){return a.send({method:"put",url:"/signatures",data:b,authorization:!0,success:function(a,b){a.success===!0&&Intercom("trackEvent","Signature modified"),b.resolve(a)}})},this.create=function(c){return a.send({method:"post",url:"/signatures",data:c,authorization:!0,success:function(a,c){c.resolve(a),a.success===!0&&b.signatureCreated()}})},this["delete"]=function(b){return a.send({method:"post",url:"/signatures/delete",data:{sigIds:b},authorization:!0})},this.getGroupsUsedIn=function(b){return a.send({method:"get",url:"/signatures/usedin/groups",authorization:!0,success:function(a,b){b.resolve(a)}})},this.rolloutEmployee=function(c){return a.send({method:"post",url:"/signatures/rollout/employee",authorization:!0,data:{empId:c},success:function(a,c){c.resolve(a),a.success===!0&&b.signatureRolledOut()}})},this.rolloutSignature=function(c){return a.send({method:"post",url:"/signatures/rollout/signature",authorization:!0,data:{sigId:c},success:function(a,c){c.resolve(a),a.success===!0&&b.signatureRolledOut()}})},this.rolloutGroup=function(c){return a.send({method:"post",url:"/signatures/rollout/group",authorization:!0,data:{groupId:c},success:function(a,c){c.resolve(a),a.success===!0&&b.signatureRolledOut()}})},this.getJsonInfoFields=function(){return a.send({method:"get",url:"/signatures/infoFieldStructure",authorization:!0,success:function(a,b){b.resolve(a)}})}}]),a.service("signatureHelperService",["signatureService","alertService","$q","$http","employeeService","userService",function(a,b,c,d,e,f){var g=this;this.deleteSigs=function(d,e){var f=c.defer(),g=[];if(d)g.push(d);else{for(var h=0;h<e.data.selectedSigs.length;h++)g.push(e.data.selectedSigs[h].id);0===g.length&&(alert("Bitte selektieren Sie mindestens einen Mitarbeiter."),f.reject("no selection"))}var i=g.length>1?"Möchten Sie diese Signaturen wirklich löschen?":"Möchten Sie diese Signatur wirklich löschen?";return bootbox.confirm({size:"small",message:i,callback:function(c){c===!0?a["delete"](g).then(function(a){a.success!==!0?(b.defaultErrorMessage(Strings.signature.list.errors.DELETION_FAILED),f.reject("pressed no on modal")):(b.defaultSuccessMessage(Strings.signature.list.success.DELETION_COMPLETED),f.resolve())}):f.reject("pressed no on modal")}}),f.promise},this.replacePlaceholders=function(a,b){for(var c in b)a=a.replaceAll("{{{"+c+"}}}",b[c]),a=a.replaceAll("{{"+c+"}}",b[c]);return a=a.replaceAll(/\{\{(.*?)\}\}/g,"")},this.generatePreviewComplete=function(a){g.mergeDbDataWithStructure("company",g.dataManager.companyData,g.dataManager.fields),g.mergeDbDataWithStructure("employee",g.dataManager.employeeData,g.dataManager.fields),g.mergeDbDataWithStructure("signatureData",g.dataManager.signatureData,g.dataManager.fields);var b=g.dataManager.signatureTpl;g.clearMarkedAsMissing(g.dataManager.fields);var c=g.getFieldStructureAsFlatArray(g.dataManager.fields);return g.generatePreview(b,c,a)},this.generatePreview=function(a,c,d){this.generateImageHtmlFromObject=function(a){var b="",c=a.defaultImage,d=a.value.whichImage,e=a.tag,f=a.imgdimension;if(a=a.value,!a.url||a.url.startsWith("http://")||a.url.startsWith("https://")||(a.url="http://"+a.url),"text"===a.showAs)b="<a target='_blank' href='"+a.url+"'>"+a.linkText+"</a>";else if("image"===a.showAs){var g="default"===d?c:a.image,h=a.url;"ma_skype"===e&&(h="skype:"+h+"?call");var i="";"default"!==d&&f&&"custom"===f.mode&&f.width&&f.height&&(i='width="'+f.width+'" height="'+f.height+'"'),b="<a target='_blank' href='"+h+"'><img "+i+' src="'+g+'" alt="'+a.altText+'"  ></a>'}return b},this.generateLinkHtmlFromObject=function(a){var b="";a.linkcolor&&(b='style="color : '+a.linkcolor+";color : "+a.linkcolor+' !important;"'),a=a.value,a.linkText||(a.linkText=a.url),!a.url||a.url.startsWith("http://")||a.url.startsWith("https://")||(a.url="http://"+a.url);var c="";return c="<a "+b+" target='_blank' href='"+a.url+"'>"+a.linkText+"</a>"},this.generateCampaignHtmlForUser=function(a){if(g.dataManager.campaignIsUsed=!0,"dummy"===a)return'<a target="_blank" href="https://www.mailtastic.de"><img src="https://www.mailtastic.de/img/signatures/defaultimg/Beispiel-Banner.png" alt="Aktuell können Sie einige Informationen nicht sehen. Bitte aktivieren Sie externe Inhalte, um die Mail vollständig angezeigt zu bekommen." /></a>';if(g.dataManager.employeeCampaignTitle){var c='<a target="_blank" href="$$$CAMPAIGNURL$$$"><img src="$$$CAMPAIGNIMAGE$$$" alt="Aktuell können Sie einige Informationen nicht sehen. Bitte aktivieren Sie externe Inhalte, um die Mail vollständig angezeigt zu bekommen." /></a>',d=a;GlobalConfig.config.apiUrl;if(d){var e=c.replace("$$$CAMPAIGNURL$$$",g.dataManager.employeeCampaignUrl);return e.replace("$$$CAMPAIGNIMAGE$$$",g.dataManager.employeeCampaignImage)}return b.defaultErrorMessage(Strings.errors.DATEN_NICHT_GELADEN),null}return""},this.replacePlaceholders=function(a,b){for(var c in b)a=a.replaceAll("{{{"+c+"}}}",b[c]),a=a.replaceAll("{{"+c+"}}",b[c]);return a},this.generateTrackingPixelHtml=function(){return""},g.dataManager.campaignIsUsed=!1;var e,f=a,h=/\{\{(.*?)\}\}/g,i={};do if(e=h.exec(f))if("kampagnen_banner"===e[1]){var j=this.generateCampaignHtmlForUser(d);i[e[1]]=j}else{var k=c[e[1]];k?k.value?k.value&&"object"==typeof k.value&&!k.value.url?(k.markedAsMissing=!0,k.markedAsUsed=!0,k.locked===!1?i[e[1]]="{{"+k.tag+"}}":i[e[1]]=""):("image"===k.type?i[e[1]]=this.generateImageHtmlFromObject(k):"link"===k.type?i[e[1]]=this.generateLinkHtmlFromObject(k):i[e[1]]=k.value,k.markedAsMissing=!1,k.markedAsUsed=!0):(k.markedAsMissing=!0,k.markedAsUsed=!0,k.locked===!1?i[e[1]]="{{"+k.tag+"}}":i[e[1]]=""):i[e[1]]=""}while(e);var l=this.replacePlaceholders(f,i);l+=this.generateTrackingPixelHtml(),l=l.replaceAll("<hr />",'<hr style="border: none;margin:0;height: 1px; color: grey; background-color: grey;" />');var m='<!--[if mso]><style type="text/css">body, table, div, td, span{line-height : 130% !important;letter-spacing : 0.2px;}</style><![endif]-->',n='<style type="text/css">body, table, div, td, span{line-height : 130%; letter-spacing : 0.2px;}hr{border: none;margin:0;height: 1px; color: grey; background-color: grey; }</style>';return l=m+n+l},this.mergeDbDataWithStructure=function(a,b,c){if("company"===a||"employee"===a){if("company"===a)var d=c.company.groups;else if("employee"===a)var d=c.employee.groups;for(var e=0;e<d.length;e++)for(var f=0;f<d[e].entries.length;f++)d[e].entries[f]&&d[e].entries[f].tag&&b[d[e].entries[f].tag]?d[e].entries[f].value=b[d[e].entries[f].tag]:d[e].entries[f].value=""}else if("signatureData"===a)for(var g=[c.company.groups,c.employee.groups],h=0;h<g.length;h++)for(var d=g[h],e=0;e<d.length;e++)for(var f=0;f<d[e].entries.length;f++)0===h?d[e].entries[f]&&d[e].entries[f].tag&&b.company[d[e].entries[f].tag]&&(d[e].entries[f].locked=b.company[d[e].entries[f].tag].locked,"image"===d[e].entries[f].type&&b.company[d[e].entries[f].tag].imgdimension&&(d[e].entries[f].imgdimension=b.company[d[e].entries[f].tag].imgdimension),"link"===d[e].entries[f].type&&b.company[d[e].entries[f].tag].linkcolor&&(d[e].entries[f].linkcolor=b.company[d[e].entries[f].tag].linkcolor)):1===h&&d[e].entries[f]&&d[e].entries[f].tag&&b.employee[d[e].entries[f].tag]&&(d[e].entries[f].locked=b.employee[d[e].entries[f].tag].locked,"image"===d[e].entries[f].type&&b.employee[d[e].entries[f].tag].imgdimension&&(d[e].entries[f].imgdimension=b.employee[d[e].entries[f].tag].imgdimension),"link"===d[e].entries[f].type&&b.employee[d[e].entries[f].tag].linkcolor&&(d[e].entries[f].linkcolor=b.employee[d[e].entries[f].tag].linkcolor))},this.loadJsonFieldStructure=function(){return c(function(b,c){a.getJsonInfoFields().then(function(a){b(a.data)})["catch"](function(){c()})})},this.clearMarkedAsMissing=function(a){for(var b=[a.company.groups,a.employee.groups],c=0;c<b.length;c++)for(var d=b[c],e=0;e<d.length;e++)for(var f=0;f<d[e].entries.length;f++)delete d[e].entries[f].markedAsMissing,delete d[e].entries[f].markedAsUsed},this.getFieldStructureAsFlatArray=function(a){for(var b=[],c=[a.company.groups,a.employee.groups],d=0;d<c.length;d++)for(var e=c[d],f=0;f<e.length;f++)for(var g=0;g<e[f].entries.length;g++)b[e[f].entries[g].tag]=e[f].entries[g];return b},this.dataManager={fields:{},employeeData:{},companyData:{},signatureData:{},signatureTpl:"",signatureTitle:"",signatureId:"",signatureLastRollout:"",activeInGroups:[],campaignIsUsed:!1},this.getEmployeeAccountData=function(a,b){var d=c.defer();if(!a)return c.reject("Employee acctoun data : No userid priveded");if("dummy"!==a)e.getOne(a).then(function(c){if(c&&0!==!c.length)if(c[0].userInfo)try{var f=JSON.parse(c[0].userInfo);f.ma_vorname=c[0].firstname,f.ma_nachname=c[0].lastname,f.ma_email=c[0].email,g.dataManager.employeeData=f,g.dataManager.employeeCampaignTitle=c[0].campaignTitle,g.dataManager.employeeCampaignUrl=c[0].campaignUrl,g.dataManager.employeeCampaignImage=c[0].campaignImage,g.mergeDbDataWithStructure("employee",f,b),d.resolve()}catch(h){d.reject(h)}else{var i=a;i?g.loadJsonFieldStructure().then(function(a){var b=a,f=g.prepareDataForBackend("employee",b);g.dataManager.employeeCampaignTitle=c[0].campaignTitle,g.dataManager.employeeCampaignUrl=c[0].campaignUrl,g.dataManager.employeeCampaignImage=c[0].campaignImage,f.ma_vorname=c[0].firstname,f.ma_nachname=c[0].lastname,f.ma_email=c[0].email,e.setEmployeeInfo(i,f).then(function(a){a.success===!0?(g.dataManager.employeeData=f,g.mergeDbDataWithStructure("employee",f,b),d.resolve()):d.reject("Employee speichern war nicht erfolgreich 1.")})})["catch"](function(a){d.reject("CompanyInfo speichern war nicht erfolgreich 2.")}):d.reject("Mitarbeiter Daten konnten nicht vorbereitet werden.")}else d.reject("get employee account data no data")});else if("dummy"===a){var f={};f=g.employeeDummyData,g.dataManager.employeeData=f,g.mergeDbDataWithStructure("employee",f,b),d.resolve()}return d.promise},this.getSignatureData=function(b,d,e){var f=c.defer();return"create"===b?f.resolve("creationmode"):"string"==typeof b?a.getOne(b).then(function(a){if(a.success===!0&&a.data&&a.data.signatureDataToEdit)try{"rolledOut"===e&&a.data.signatureTplRolledOut?(g.mergeDbDataWithStructure("signatureData",JSON.parse(a.data.signatureDataRolledOut),d),g.dataManager.signatureTpl=a.data.signatureTplRolledOut,g.dataManager.signatureData=JSON.parse(a.data.signatureDataRolledOut)):(g.mergeDbDataWithStructure("signatureData",JSON.parse(a.data.signatureDataToEdit),d),g.dataManager.signatureTpl=a.data.signatureTplToEdit,g.dataManager.signatureData=JSON.parse(a.data.signatureDataToEdit)),g.dataManager.signatureTitle=a.data.title,g.dataManager.signatureId=a.data.id,g.dataManager.activeGroups=a.data.activeGroups,g.dataManager.signatureLastRollout=a.data.lastRollout,g.dataManager.signatureUpdatedAt=a.data.signatureUpdatedAt,g.dataManager.companyInfoUpdatedAt=a.data.companyInfoUpdatedAt,f.resolve()}catch(b){f.reject("Parsing json error")}else f.reject("get signature data no data")}):f.reject("invalid state"),f.promise},this.getCompanyAccountData=function(a){var b=c.defer();return f.getAccountData().then(function(c){if(c)if(c.companyInfo&&""!==!c.companyInfo)try{var d=JSON.parse(c.companyInfo);g.dataManager.companyData=d,g.mergeDbDataWithStructure("company",d,a),g.clearMarkedAsMissing(a),b.resolve()}catch(e){b.reject(e)}else{var h=g.prepareDataForBackend("company",a);c.companyName&&!h.u_name&&(h.u_name=c.companyName),f.setCompanyInfo(h).then(function(c){c.success===!0?(g.dataManager.companyData=h,g.mergeDbDataWithStructure("company",h,a),g.clearMarkedAsMissing(a)):alert("CompanyInfo speichern war nicht erfolgreich."),b.resolve()})}else alert(Strings.errors.DATEN_NICHT_GELADEN)}),b.promise},this.employeeDummyData={ma_vorname:"Max",ma_nachname:"Mustermann",ma_strasse:"Musterstraße 1",ma_ort:"Musterort",ma_email:"max@mustermann.de",ma_mobil:"0176 4588 6665",ma_tel:" 06685 558 665",ma_fax:" 06685 558 665 55",ma_firma:"Musterfirma",ma_abteilung:"Musterabteilung",ma_position:"CEO",ma_website:"www.maxmustermann.co",ma_skype:"maxmu",ma_fb:{showAs:"image",altText:"alternativ",linkText:"sdfsdf3",image:"http://localhost:3333/images/siglinks/employee/bf9c96a5-97dc-483a-9ac2-fe4c59d31b99/mitarbeiter_fb-Jx14l8uRH2.png",url:"fsdf",whichImage:"own"},ma_googlep:{showAs:"text",altText:"te",linkText:"text",url:"fsfdsfdd",whichImage:"default"},ma_instagram:"",ma_twitter:"",ma_linkedin:"",ma_xing:""},this.getUserFieldsToComplete=function(){if(g.dataManager&&g.dataManager.signatureData&&g.dataManager.employeeData&&g.dataManager.companyData&&g.dataManager.fields){try{for(var a=[g.dataManager.fields.employee.groups],b=[],d=0;d<a.length;d++)for(var e=a[d],f=0;f<e.length;f++)for(var h=0;h<e[f].entries.length;h++)e[f].entries[h].markedAsUsed&&!e[f].entries[h].locked&&b.push(e[f].entries[h])}catch(i){return c.reject("getUserFieldsToComplete: exception on iterating over fields")}return c.resolve(b)}return c.reject("getUserFieldsToComplete: not all data is loaded")},this.getRelevantDataForSignature=function(a,b,d){var e=c.defer();return g.loadJsonFieldStructure().then(function(a){return g.dataManager.fields=a,c.resolve()}).then(function(){return c.all([g.getCompanyAccountData(g.dataManager.fields)["catch"](),g.getEmployeeAccountData(a,g.dataManager.fields)["catch"](),g.getSignatureData(b,g.dataManager.fields,d)["catch"]()])}).then(function(){e.resolve(g.dataManager)})["catch"](function(a){e.reject(a)}),e.promise},this.prepareDataForBackend=function(a,b){var c={};if("company"===a||"employee"===a){if("company"===a)var d=b.company.groups;else if("employee"===a)var d=b.employee.groups;for(var e=0;e<d.length;e++)for(var f=0;f<d[e].entries.length;f++){var g="";d[e].entries[f].value&&(g=d[e].entries[f].value),c[d[e].entries[f].tag]=g}}else if("signatureData"===a){var h={};h.company={},h.employee={};for(var i=[b.company.groups,b.employee.groups],j=0;j<i.length;j++)for(var d=i[j],e=0;e<d.length;e++)for(var f=0;f<d[e].entries.length;f++){var k;0===j?k=h.company:1===j&&(k=h.employee),k[d[e].entries[f].tag]={},k[d[e].entries[f].tag].locked=d[e].entries[f].locked,d[e].entries[f].imgdimension&&(k[d[e].entries[f].tag].imgdimension=d[e].entries[f].imgdimension),d[e].entries[f].linkcolor&&(k[d[e].entries[f].tag].linkcolor=d[e].entries[f].linkcolor)}c=h}return c},this.isSignatureRolledOut=function(a){var b=null;if(!a)return b;a.lastRollout||(b=!1);var c=moment(new Date(a.lastRollout)),d=moment(new Date(a.companyInfoUpdatedAt)),e=moment(new Date(a.signatureUpdatedAt));return b=!(!a.lastRollout||c.isBefore(d)||c.isBefore(e))},this.getHasUserLatestSignature=function(a,b,c){if(c||(c=g.dataManager.signatureId),!c||!a)return"error";if(!a.signatureActivated||a.signatureActivated!==c)return"outdated";var d=(moment(new Date(a.companyInfoUpdatedAt)),moment(new Date(a.userInfoUpdatedAt))),e=(moment(new Date(a.signatureUpdatedAt)),moment(new Date(a.signatureActivatedAt))),f=moment(new Date(a.lastRolloutOSignatureItself));moment(new Date(a.signatureLastRollout));return a.userInfoUpdatedAt&&e.isBefore(d)||a.lastRolloutOSignatureItself&&e.isBefore(f)?"outdated":"latest"}}]),a.service("userService",["$rootScope","requestService",function(a,b){this.login=function(a){return b.send({method:"post",url:"/account/authenticate/login",data:a,authorization:!1})},this.getHtmlSnippet=function(a){return b.send({method:"post",url:"/employees/snippet",authorization:!0,success:function(a,b){b.resolve(a)}})},this.getOverallStats=function(){return b.send({method:"get",url:"/users/stats/overall",authorization:!0,success:function(a,b){b.resolve(a)}})},this.getAmountOfUsers=function(){return b.send({method:"get",url:"/users/stats/overall",authorization:!0,success:function(a,b){a.success===!0&&a.data[0]&&a.data[0].amountOfUsers?b.resolve(a.data[0].amountOfUsers):b.resolve(null)}})},this.checkToken=function(a){return b.send({method:"post",url:"/account/authenticate/checktoken",authorization:!1,data:a,success:function(a,b){b.resolve(a)}})},this.createBetaUser=function(a){return b.send({method:"post",url:"/users/createuser/beta",data:a,authorization:!0})},this.activateAccount=function(a){return b.send({method:"post",url:"/account/activate/admin",data:a,authorization:!1})},this.createNewUser=function(a){return b.send({method:"post",url:"/account/createuser",data:a,authorization:!1})},this.getAccountData=function(){return b.send({method:"get",url:"/users/accountdata",authorization:!0})},this.setAccountData=function(a){return b.send({method:"post",url:"/users/accountdata",data:a,authorization:!0})},this.setCompanyInfo=function(a){return b.send({method:"post",url:"/users/companyinfo",data:a,authorization:!0,success:function(a,b){a.success===!0&&Intercom("trackEvent","Changed company info data"),b.resolve(a)}})},this.resetPassword=function(a){return b.send({method:"post",url:"/account/resetpassword",data:{email:a},authorization:!1})},this.setNewPassword=function(a){return b.send({method:"post",url:"/account/setnewpass",data:a,authorization:!1})},this.addPaymentCredentials=function(a){return b.send({method:"post",url:"/users/paymentcreds",data:a,authorization:!0})},this.setCompanyInfoSingle=function(a,c,d,e){return b.send({method:"post",url:"/employees/companyinfo/single",data:{userid:a,tag:c,type:d,value:e},authorization:!0,success:function(a,b){a.success===!0&&Intercom("trackEvent","Changed company info data"),b.resolve(a)}})},this.verifyPassword=function(a){return b.send({method:"get",url:"/users/verifyPwd/"+a,authorization:!0,success:function(a,b){b.resolve(a)}})},this.setTourWasSeen=function(){return b.send({method:"post",url:"/users/marktourasseen",authorization:!0})}}])}(angular.module("mailtasticApp.services",[])),function(a){"use strict";a.controller("AccountExpiredModalCtrl",["$scope","$uibModal","$log",function(a,b,c){a.animationsEnabled=!0,a.openExpiredModal=function(){a.openModal("booking/accountexpiredmodal/modals/account_expired_modal.html")},a.openTrialInfoModal=function(){a.openModal("booking/accountexpiredmodal/modals/trialinfo_modal.html")},a.openUnallowedActionModal=function(){a.openModal("booking/accountexpiredmodal/modals/unallowed_action_modal.html")},a.openModal=function(d){var e=b.open({animation:a.animationsEnabled,templateUrl:d,controller:"AccountExpiredModalInstanceCtrl",size:"lg",windowClass:"expiredmodalcontainer"});e.result.then(function(b){a.selected=b},function(){c.info("Modal dismissed at: "+new Date)})},a.openPersonalContactModal=function(b){var c={mode:"onexit",who:b};a.openModal("snippets/livedemo/modals/personalcontact_modal.html",c)},a.toggleAnimation=function(){a.animationsEnabled=!a.animationsEnabled}}]).controller("AccountExpiredModalInstanceCtrl",["$scope","$modalInstance","$state","userService",function(a,b,c,d){a.cancel=function(){b.dismiss("cancel")},a.goToBooking=function(){c.go("base.booking"),a.cancel()},a.modaldata={firstname:""},a.initData=function(){d.getAccountData().then(function(b){b.firstname&&(a.modaldata.firstname=b.firstname)})},a.initData()}])}(angular.module("mailtasticApp.modalExpired",[])),function(a){"use strict";function b(a){if(window.getSelection){var b=window.getSelection();b.removeAllRanges();var c=document.createRange();c.selectNodeContents(a),b.addRange(c)}else if(document.selection){var d=document.body.createTextRange();d.moveToElementText(a),d.select()}}var c={outlookwin:{title:"Outlook (Win)",video:"https://www.youtube.com/embed/bk6Xst6euQk",showBanner:!1,showSnippet:!1,showOutlookSnippet:!0},outlookmac:{title:"Outlook (Mac)",video:"https://www.youtube.com/embed/bk6Xst6euQk",showBanner:!0,showSnippet:!1},gmail:{title:"Gmail",video:'https://www.youtube.com/embed/5uBsfHA5LBo"',showBanner:!0,showSnippet:!1},thunderbird:{title:"Thunderbird",video:'https://www.youtube.com/embed/5uBsfHA5LBo"',showBanner:!1,showSnippet:!0},macmail:{title:"Mac Mail",video:'https://www.youtube.com/embed/5uBsfHA5LBo"',showBanner:!0,showSnippet:!1},macmailold:{title:"Mac Mail (alt)",video:'https://www.youtube.com/embed/5uBsfHA5LBo"',showBanner:!1,showSnippet:!0},other:{title:"Andere",video:'https://www.youtube.com/embed/5uBsfHA5LBo"',showBanner:!1,showSnippet:!1},webtools:{title:"Web-Tools",video:"",showBanner:!1,showSnippet:!0}},d='<a href="https://www.app.mailtastic.de/api/li/$$$USERID$$$"><img src="http://www.app.mailtastic.de/api/im/$$$USERID$$$/ad" alt="Bitte aktivieren Sie externe Inhalte, um diese E-Mail vollständig sehen zu können." /></a>';a.controller("InstallationCtrl",["$scope","$filter","userService","employeeService","$stateParams",function(a,e,f,g,h){a.outlookWin={showOutlookSnippetInstallCode:"true"},a.manual=c,a.currentManualTitle="",a.mode="admin",a.setManual=function(b){a.currentManual=a.manual[b];var c=$(".navbar-toggle").is(":visible");c&&$(".navbar-collapse").collapse("hide")},a.othermailclient={clientname:""},a.sendothermailclientnotification=function(){g.sendothermailclientnotification(null,a.othermailclient.clientname).then(function(b){b.success===!0?(alert("Herzichen Dank für Ihre Nachricht. Wir werden umgehend eine Lösung für Ihren E-Mail-Client zur Verfügung stellen."),a.othermailclient.clientname=""):alert(Strings.errors.TECHNISCHER_FEHLER)})},a.getClass=function(b){return"Mac Mail"===b&&"Mac Mail (alt)"===a.currentManual.title?"active":a.currentManual.title===b?"active":""},a.currentManual=[],a.htmlSnippet="",a.outlooklink1="",a.outlooklink2="",a.outlookInstallationCode="",a.userId="",a.htmlSnippetRaw="",a.initData=function(){"macmailold"===h.client?a.currentManual=a.manual.macmailold:a.currentManual=a.manual.outlookwin,f.getHtmlSnippet().then(function(b){b.success===!0?(a.htmlSnippet=b.snippet,a.outlooklink1=b.outlookLinks.first,a.outlooklink2=b.outlookLinks.second,a.userId=b.userId,a.outlookInstallationCode=b.userId,a.htmlSnippetRaw=d.replaceAll("$$$USERID$$$",b.userId)):(a.htmlSnippet="Daten konnte nicht geladen werden",a.htmlSnippetRaw="Daten konnte nicht geladen werden",a.outlooklink1="Daten konnte nicht geladen werden",a.outlooklink2="Daten konnte nicht geladen werden",a.outlookInstallationCode="Daten konnte nicht geladen werden")})},a.initData(),a.imageClicked=function(a){a.preventDefault();var c=document.getElementById("image_installation_link");b(c)},a.textClicked=function(){}}]).filter("trusted",["$sce",function(a){return function(b){return a.trustAsResourceUrl(b)}}]).directive("selectOnClick",function(){return{link:function(a,b){var c;b.on("click",function(){this.select(),c=this}),b.on("blur",function(){c=null})}}}).controller("ActivationCtrl",["$scope","$filter","employeeService","$state",function(a,e,f,g){a.mode="employee",a.othermailclient={clientname:""},a.outlookWin={showOutlookSnippetInstallCode:"true"},a.manual=c,a.currentManualTitle="",a.setManual=function(b){a.currentManual=a.manual[b];var c=$(".navbar-toggle").is(":visible");c&&$(".navbar-collapse").collapse("hide")},a.getClass=function(b){return"Mac Mail"===b&&"Mac Mail (alt)"===a.currentManual.title?"active":a.currentManual.title===b?"active":""},a.currentManual=[],a.htmlSnippet="",a.outlooklink1="",a.outlooklink2="",a.userId="",a.htmlSnippetRaw="",a.othermailclient.clientname="",a.imageClicked=function(a){a.preventDefault();var c=document.getElementById("image_installation_link");b(c)},a.sendothermailclientnotification=function(){f.sendothermailclientnotification(g.params.eid,a.othermailclient.clientname).then(function(b){b.success===!0?(alert("Herzichen Dank für Ihre Nachricht. Wir werden umgehend eine Lösung für Ihren E-Mail-Client zur Verfügung stellen."),a.othermailclient.clientname=""):alert(Strings.errors.TECHNISCHER_FEHLER)})},a.admindata={firstname:"",lastname:""},a.initData=function(){var b={activationCode:g.params.ac,employeeId:g.params.eid};a.currentManual=a.manual.outlookwin,b.activationCode&&b.employeeId?f.activateEmployee(b).then(function(c){c.success===!0?(a.htmlSnippet=c.snippet,a.outlooklink1=c.outlookLinks.first,a.outlooklink2=c.outlookLinks.second,a.outlookInstallationCode=b.employeeId,a.userId=b.employeeId,a.admindata=c.admindata,a.htmlSnippetRaw=d.replaceAll("$$$USERID$$$",b.employeeId)):(a.htmlSnippetRaw="Daten konnte nicht geladen werden",a.htmlSnippet="Daten konnte nicht geladen werden",a.outlooklink1="Daten konnte nicht geladen werden",a.outlooklink2="Daten konnte nicht geladen werden",a.outlookInstallationCode="Daten konnte nicht geladen werden",alert(Strings.errors.ACCOUNT_ACTIVATION_ERROR_EMPLOYEE))}):alert(Strings.TECHNISCHER_FEHLER)},a.initData()}])}(angular.module("mailtasticApp.installation",["ui.bootstrap"])),function(a){"use strict";a.controller("StarthelpCtrl",["$scope","$filter","userService",function(a,b,c){a.manual={outlookwin:{title:"outlookwin",video:"https://www.youtube.com/embed/bk6Xst6euQk",steps:["Outlook Windows schritt 1 fsahflsd asdfjlh fsdfsdfadfhsdljsdh fslhdfsldfs lhfs dhlsafdö lhs dlhfs h","Outlook Windows schritt 2 fsahflsd asdfjlh sdhfs hs adfhsdljsdh fslhdfsldfs lhfs dhlsafdö lhs dlhfs h"],showBanner:!0,showSnippet:!1},outlookmac:{title:"outlookmac",video:"https://www.youtube.com/embed/bk6Xst6euQk",steps:["Outlook Mac schritt 1 fsahflsd asdfjlh sdhfs hs adfhsdljsdh fslhdfsldfs lhfs dhlsafdö lhs dlhfs h","Outlook Mac schritt 1 fsahflsd asdfjlh sdhfs hs adfhsdljsdh fslhdfsldfs lhfs dhlsafdö lhs dlhfs h"],showBanner:!1,showSnippet:!0},gmail:{title:"gmail",video:'https://www.youtube.com/embed/5uBsfHA5LBo"',steps:["Gmail schritt 1 fsahflsd asdfjlh sdhfs hs adfhsdljsdh fslhdfsldfs lhfs dhlsafdö lhs dlhfs h","Gmail schritt 1 fsa"],showBanner:!0,showSnippet:!1},thunderbird:{title:"thunderbird",video:'https://www.youtube.com/embed/5uBsfHA5LBo"',steps:["Thunderbird schritt 1 fsahflsd asdfjlh sdhfs hs adfhsdljsdh fslhdfsldfs lhfs dhlsafdö lhs dlhfs h","Thunderbird schritt 1 fsa"],showBanner:!1,showSnippet:!0},macmail:{title:"macmail",video:'https://www.youtube.com/embed/5uBsfHA5LBo"',steps:["Macmail schritt 1 fsahflsd asdfjlh sdhfs hs adfhsdljsdh fslhdfsldfs lhfs dhlsafdö lhs dlhfs h","Macmail schritt 1 fsa"],showBanner:!0,showSnippet:!1},other:{title:"other",video:'https://www.youtube.com/embed/5uBsfHA5LBo"',steps:["Wenn Sie keinen der aufgeführten E-Mail Clients verwenden setzen Sie sich bitte mit uns in Verbindung damit wir Ihnen schnellstmöglich mailtastic für Ihren Client zur Verfügung stellen können."],showBanner:!1,showSnippet:!1}},a.currentManualTitle=a.setManual=function(b){a.currentManual=a.manual[b]},a.getClass=function(b){return a.currentManual.title===b?"active":""},a.currentManual=[],a.htmlSnippet="",a.userId="",a.initData=function(){a.currentManual=a.manual.gmail,c.getHtmlSnippet().then(function(b){b.success===!0?(a.htmlSnippet=b.snippet,a.userId=b.userId):a.htmlSnippet="Datei konnte nicht geladen werden"})},a.imageClicked=function(a){a.preventDefault();var b=document.getElementById("image_installation_link");selectElement(b)},a.textClicked=function(){}}])}(angular.module("mailtasticApp.starthelp",["ui.bootstrap"])),function(a){"use strict";a.controller("FaqCtrl",["$scope","$filter","userService",function(a,b,c){a.manual={outlookwin:{title:"outlookwin",video:"https://www.youtube.com/embed/bk6Xst6euQk",steps:["Outlook Windows schritt 1 fsahflsd asdfjlh fsdfsdfadfhsdljsdh fslhdfsldfs lhfs dhlsafdö lhs dlhfs h","Outlook Windows schritt 2 fsahflsd asdfjlh sdhfs hs adfhsdljsdh fslhdfsldfs lhfs dhlsafdö lhs dlhfs h"],showBanner:!0,showSnippet:!1},outlookmac:{title:"outlookmac",video:"https://www.youtube.com/embed/bk6Xst6euQk",steps:["Outlook Mac schritt 1 fsahflsd asdfjlh sdhfs hs adfhsdljsdh fslhdfsldfs lhfs dhlsafdö lhs dlhfs h","Outlook Mac schritt 1 fsahflsd asdfjlh sdhfs hs adfhsdljsdh fslhdfsldfs lhfs dhlsafdö lhs dlhfs h"],showBanner:!1,showSnippet:!0},gmail:{title:"gmail",video:'https://www.youtube.com/embed/5uBsfHA5LBo"',steps:["Gmail schritt 1 fsahflsd asdfjlh sdhfs hs adfhsdljsdh fslhdfsldfs lhfs dhlsafdö lhs dlhfs h","Gmail schritt 1 fsa"],showBanner:!0,showSnippet:!1},thunderbird:{title:"thunderbird",video:'https://www.youtube.com/embed/5uBsfHA5LBo"',steps:["Thunderbird schritt 1 fsahflsd asdfjlh sdhfs hs adfhsdljsdh fslhdfsldfs lhfs dhlsafdö lhs dlhfs h","Thunderbird schritt 1 fsa"],showBanner:!1,showSnippet:!0},macmail:{title:"macmail",video:'https://www.youtube.com/embed/5uBsfHA5LBo"',steps:["Macmail schritt 1 fsahflsd asdfjlh sdhfs hs adfhsdljsdh fslhdfsldfs lhfs dhlsafdö lhs dlhfs h","Macmail schritt 1 fsa"],showBanner:!0,showSnippet:!1},other:{title:"other",video:'https://www.youtube.com/embed/5uBsfHA5LBo"',steps:["Wenn Sie keinen der aufgeführten E-Mail Clients verwenden setzen Sie sich bitte mit uns in Verbindung damit wir Ihnen schnellstmöglich mailtastic für Ihren Client zur Verfügung stellen können."],showBanner:!1,showSnippet:!1}},a.currentManualTitle=a.setManual=function(b){a.currentManual=a.manual[b]},a.getClass=function(b){return a.currentManual.title===b?"active":""},a.currentManual=[],a.htmlSnippet="",a.userId="",a.initData=function(){a.currentManual=a.manual.gmail,c.getHtmlSnippet().then(function(b){b.success===!0?(a.htmlSnippet=b.snippet,a.userId=b.userId):a.htmlSnippet="Datei konnte nicht geladen werden"})},a.imageClicked=function(a){a.preventDefault();var b=document.getElementById("image_installation_link");selectElement(b)},a.textClicked=function(){}}])}(angular.module("mailtasticApp.faq",["ui.bootstrap"])),function(a){"use strict";a.controller("loginCtrl",["$scope","browseService","userService","$injector","$rootScope","$timeout","$state","$uibModal","alertService","intercomService","paymentService","$q",function(a,b,c,d,e,f,g,h,i,j,k,l){function m(a){return new Promise(function(b,c){e.loggedIn=!0;var f=d.get("StorageFactory");f.add({logged_in:!0,accessToken:a.token,userId:a.id,userFirstName:a.firstname,userLastName:a.lastname,userCreatedAt:a.createdAt,userEmail:a.email}),j.userLoggedIn(),j.userLoggedIntoAppCues(),b()})}a.auth={password:"",email:"",policyChecked:!1},a.passData={},a.login=function(){k.clear(),a.auth.password&&a.auth.email&&c.login(a.auth).then(function(a){a.success===!1?7===a.code?alert(Strings.login.ACTIVATION_NEEDED):alert(Strings.login.LOGIN_WRONG):m(a).then(function(){f(function(){b.navigate("/dashboard")},300)},function(){alert(Strings.TECHNISCHER_FEHLER)})},function(a){alert(Strings.TECHNISCHER_FEHLER)})},a.initData=function(){k.clear(),e.trialarea.showexpired=!1,e.trialarea.showtimeleft=!1;var b={activationCode:g.params.ac,employeeId:g.params.eid},d={activationCode:g.params.pc,employeeId:g.params.aid};if(b.activationCode&&b.employeeId)c.activateAccount(b).then(function(b){b.success===!0?(a.auth.email=b.userdata.email,i.defaultSuccessMessage(Strings.registration.ACCOUNT_SUCCESSFULL_CREATED)):alert(Strings.errors.TECHNISCHER_FEHLER)});else if(d.activationCode&&d.employeeId){a.passData=d;var f={mode:"setpassword",activationCode:d.activationCode,employeeId:d.employeeId},j=h.open({animation:a.animationsEnabled,templateUrl:"login/passwordlost/resetpassmodal.html",controller:"PassResetInstanceCtrl",size:"md",resolve:{dataObject:f}});j.result.then(function(a){},function(){$log.info("Modal dismissed at: "+new Date)})}},a.initData()}])}(angular.module("mailtasticApp.login",["ui.bootstrap"])),function(a){"use strict";a.controller("DashboardCtrl",["$scope","campaignService","employeeService","userService","$state","paymentService","$rootScope","$uibModal",function(a,b,c,d,e,f,g,h){a.Math=window.Math,a.employees=[],
a.overAllStats={amountOfCampaigns:0,amountOfClicks:0,amountOfViews:0,amountOfUsers:0,companyName:"",userName:"",userMail:""},a.calcBestThreeEmployees=function(){a.employees&&(a.employees.sort(function(a,b){return parseFloat(b.clicks+b.views)-parseFloat(a.clicks+a.views)}),a.topThreeEmployees=a.employees.slice(0,3))},a.showGroupDetails=function(a){e.go("base.employees.groupdetails",{groupId:a})},a.showUserDetails=function(a){e.go("base.employees.employeedetail",{employeeId:a})},a.topThreeEmployees=[],a.feedback={text:""},a.sendFeedback=function(b){c.sendFeedback(b).then(function(b){b.success===!0?(alert("Herzlichen Dank für Ihr Feedback. Wir werden uns umgehend um Ihr Anliegen kümmern."),a.feedback.text=""):alert("Leider konnte Ihr Feedback nicht korrekt übermittelt werden. Gerne können Sie uns Ihr Anliegen auch jederzeit telefonisch mitteilen oder per E-Mail an feedback@mailtastic.de senden. Herzlichen Dank!")})},a.initData=function(){c.get().then(function(b){a.employees=b,a.calcBestThreeEmployees(),$(document).trigger("regenerateAvatars")}),d.getOverallStats().then(function(b){if(b.success!==!0);else if(b.data&&Array.isArray(b.data)&&b.data.length>0&&(a.overAllStats.amountOfUsers=b.data[0].amountOfUsers,a.overAllStats.companyName=b.data[0].companyName,a.overAllStats.userName=b.data[0].userName,a.overAllStats.userMail=b.data[0].userMail,1!=b.data[0].tourSeen)){var c="tour/tour_modal_main.html",e=h.open({animation:!0,templateUrl:c,controller:"TourModalCtrl",size:"lg",backdrop:"static",windowClass:"tourmodal"});e.result.then(function(){d.setTourWasSeen().then()},function(){d.setTourWasSeen().then()})}}),f.syncEmployees().then(function(a){})},a.initData()}]).controller("DashboardCtrl.groupStatstics",["$scope","groupsService","browserService","$timeout",function(a,b,c,d){a.Math=window.Math,a.initData=function(){b.getStatstics().then(function(b){a.calcPieData(b);var e=c();"firefox"!==e?d(function(){var b=$(".piechart-col").height();a.pieGraph.options.height=b+"px",a.pieGraph.data=a.pieGraph.viewData},500):a.pieGraph.data=a.pieGraph.viewData})},a.initData(),a.pieGraph={data:{series:[100]},options:{donut:!0,showLabel:!1,donutWidth:40,width:"100%",height:"100%",chartPadding:0,sliceMargin:6},viewData:{series:[]},clickData:{series:[]},rateData:{series:[]},accumulatedViews:0,accumulatedClicks:0,accumulatedRate:0,progressClicks:{},progressViews:{},progressRate:[],currentShown:"views",currentSliceToDraw:0,events:{draw:function(b){if("slice"===b.type){var c="";"views"===a.pieGraph.currentShown?a.pieGraph.progressViews.length>a.pieGraph.currentSliceToDraw&&(c=a.pieGraph.progressViews[a.pieGraph.currentSliceToDraw].color,a.pieGraph.currentSliceToDraw+=1):"clicks"===a.pieGraph.currentShown?a.pieGraph.progressClicks.length>a.pieGraph.currentSliceToDraw&&(c=a.pieGraph.progressClicks[a.pieGraph.currentSliceToDraw].color,a.pieGraph.currentSliceToDraw+=1):"rate"===a.pieGraph.currentShown&&a.pieGraph.progressRate.length>a.pieGraph.currentSliceToDraw&&(c=a.pieGraph.progressRate[a.pieGraph.currentSliceToDraw].color,a.pieGraph.currentSliceToDraw+=1);var d={sliceMargin:0};if(Math.abs(b.startAngle-b.endAngle)<d.sliceMargin)return;var e=Chartist.polarToCartesian(b.center.x,b.center.y,b.radius,b.startAngle+d.sliceMargin/2),f=Chartist.polarToCartesian(b.center.x,b.center.y,b.radius,b.endAngle-d.sliceMargin/2),g=b.endAngle-b.startAngle<=180?"0":"1",h=["M",f.x,f.y,"A",b.radius,b.radius,0,g,0,e.x,e.y],i=new Chartist.Svg("path",{d:h.join(" ")},b.element._node.className.baseVal);i.attr({value:b.value}),i.attr({style:"stroke-width: "+b.element._node.style.strokeWidth+";stroke:"+c}),b.element.replace(i)}}}},a.groupButtonSelectionPieGraph={views:!0,clicks:!1,rate:!1},a.changeStatSource=function(b){switch(Intercom("trackEvent","Changed source of pie graph in Dashboard"),a.pieGraph.currentShown=b,a.pieGraph.currentSliceToDraw=0,a.groupButtonSelectionPieGraph.views=!1,a.groupButtonSelectionPieGraph.clicks=!1,a.groupButtonSelectionPieGraph.rate=!1,b){case"views":a.groupButtonSelectionPieGraph.views=!0,a.pieGraph.data=a.pieGraph.viewData;break;case"clicks":a.groupButtonSelectionPieGraph.clicks=!0,a.pieGraph.data=a.pieGraph.clickData;break;case"rate":a.groupButtonSelectionPieGraph.rate=!0,a.pieGraph.data=a.pieGraph.rateData}},a.calcPieData=function(b){colorcounter=0,a.pieGraph.accumulatedClicks=0,a.pieGraph.accumulatedViews=0,a.pieGraph.accumulatedRate=0,a.pieGraph.viewData.series=[],a.pieGraph.rateData.series=[],angular.forEach(b.views,function(c,d){a.pieGraph.accumulatedViews+=c.anzahl,a.pieGraph.viewData.series.push(c.anzahl);var e=Colors.getNext().rgb;c.color=e;var f=c.title,g=$.grep(b.clicks,function(a){return a.title==f}),h=0;1===g.length?h=g[0].anzahl/c.anzahl*100:b.clicks.push({title:c.title,anzahl:0,color:e,amountOfMembers:c.amountOfMembers}),a.pieGraph.rateData.series.push(h),a.pieGraph.accumulatedRate+=h,a.pieGraph.progressRate.push({title:c.title,anzahl:h,color:e,amountOfMembers:c.amountOfMembers})}),a.pieGraph.progressRate.sort(function(a,b){return b-a}),a.pieGraph.progressViews=b.views,a.pieGraph.progressViews.sort(function(a,b){return b.anzahl-a.anzahl}),a.pieGraph.viewData.series.sort(function(a,b){return b-a}),colorcounter=0,a.pieGraph.clickData.series=[],b.clicks.length>0&&angular.forEach(b.clicks,function(b,c){a.pieGraph.accumulatedClicks+=b.anzahl,a.pieGraph.clickData.series.push(b.anzahl),b.color=Colors.getNext().rgb}),a.pieGraph.clickData.series.sort(function(a,b){return b-a}),a.pieGraph.progressClicks=b.clicks,a.pieGraph.progressClicks.sort(function(a,b){return b.anzahl-a.anzahl})},a.toggleButton={value:!1}}]).controller("DashboardCtrl.campaignStatistics",["$scope","campaignService","$timeout","browserService","$q","$translate",function(a,b,c,d,e,f){function g(){for(var b=[],c=[],d=[],e=0;e<a.lineGraph.viewData.length;e++){for(var f=0;f<a.lineGraph.viewData[e].data.length;f++)b.push({value:a.lineGraph.viewData[e].data[f],meta:{impressions:a.lineGraph.viewData[e].data[f],clicks:a.lineGraph.clickData[e].data[f],label:a.lineGraph.dates[f]}}),c.push({value:a.lineGraph.clickData[e].data[f],meta:{impressions:a.lineGraph.viewData[e].data[f],clicks:a.lineGraph.clickData[e].data[f],label:a.lineGraph.dates[f]}}),d.push({value:a.lineGraph.rateData[e].data[f],meta:{impressions:a.lineGraph.viewData[e].data[f],clicks:a.lineGraph.clickData[e].data[f],label:a.lineGraph.dates[f]}});a.lineGraph.viewData[e].data=b,a.lineGraph.clickData[e].data=c,a.lineGraph.rateData[e].data=d,b=[],c=[],d=[]}}function h(){for(var b=a.lineGraph.clickData,c=[],d={},e=0;e<b.length;e++){d={data:[],title:"",name:"",color:"",meta:{color:""},id:null};var f=b[e],g=f.id,h=$.grep(a.lineGraph.viewData,function(a){return a.id===g});if(h&&0!==h.length){for(var i=0;i<b[e].data.length;i++){var j=h[0].data[i],k=b[e].data[i];if(0===k||0===j)var l=0;else var l=k/j*100;d.data.push(l)}d.title=h[0].title,d.name=h[0].title,d.id=h[0].id,d.color=h[0].color,d.meta.color=h[0].color,c.push(d)}}return c}function i(b,c,d){var e=-1,f=[],g={data:[],name:"",title:"",color:"",meta:{color:""}};angular.forEach(c,function(b,c){e!==b.campaignId?(f.push(g),e=b.campaignId,g=[],g.push(b)):g.push(b),"views"===d?a.lineGraph.totalViewsAll+=b.anzahl:"clicks"===d&&(a.lineGraph.totalClicksAll+=b.anzahl)}),f.push(g),f.splice(0,1);var h=[],i={data:[],title:"",color:"",meta:{color:""},name:""};return angular.forEach(f,function(a,c){angular.forEach(b,function(b,c){var d=j(b,a);i.data.push(d)}),i.title=a[0].title,i.name=i.title,i.id=a[0].campaignId,i.color=a[0].color,i.meta.color=a[0].color,h.push(i),i={data:[],title:"",color:"",meta:{color:""},name:""}}),h}function j(a,b){var c=0;return angular.forEach(b,function(b,d){var e=moment(b.day).format("DD.MMM");e===a&&(c=b.anzahl)}),c}a.Math=window.Math,a.campaignList={data:{}},a.campaigns=[],a.linegraphspinner=null,a.lineGraph={options:{fullWidth:!0,showPoint:!0,showArea:!1,chartPadding:{top:15,right:35,bottom:1,left:10},height:"270px",width:"100%",lineSmooth:Chartist.Interpolation.simple({divisor:2}),axisX:{showGrid:!0,offset:30,scaleMinSpace:20,onlyInteger:!0,labelInterpolationFnc:function(b,c){return c%a.interpolationValue===0?b:null}},axisY:{showGrid:!0,onlyInteger:!0}},clickData:[],dates:[],viewData:[],rateData:[],totalViews:0,totalClicks:0,dataToShow:{labels:["Monday","Tuesday","Wednesday","Thursday","Friday"],series:[[0,0,0,0],[0,0,0,0]]},currentLineToDraw:0,events:{draw:function(b){if("line"===b.type){var c="";a.lineGraph.dataToShow.series.length>a.lineGraph.currentLineToDraw&&(c=a.lineGraph.dataToShow.series[a.lineGraph.currentLineToDraw].color,a.lineGraph.currentLineToDraw+=1),b.element.attr({style:"stroke:"+c})}else"point"===b.type&&b.element.attr({style:"stroke:"+b.series.color})}}},a.interpolationValue=1,a.activeCampaigns=[],a.changeLanguage=function(a){f.use(a)},a.initData=function(){b.get().then(function(f){a.campaigns=f,a.overAllStats.amountOfViews=0,a.overAllStats.amountOfClicks=0;for(var g=0;g<f.length;g++)0!==f[g].activegroups.length&&(a.activeCampaigns.push(f[g]),a.overAllStats.amountOfViews+=f[g].views,a.overAllStats.amountOfClicks+=f[g].clicks);a.overAllStats.amountOfCampaigns=a.activeCampaigns.length;var h=d();"firefox"===h&&c(function(){var b=$(".linepanelbody").width();a.lineGraph.options.width=b+"px"},1e3),a.campaignSwitcher=a.campaigns[0];var i=moment().subtract(30,"days"),j=moment(),k=i.format("YYYY-MM-DD"),l=j.format("YYYY-MM-DD");a.linegraphspinner=e.defer(),b.getStatistics(k,l).then(function(b){a.calcGraphData(b,i,j),a.lineGraph.dataToShow.series=a.lineGraph.viewData,a.selectboxvalues.values=a.lineGraph.viewData,a.linegraphspinner.resolve()})});var f=moment().subtract(30,"days"),g=moment();setTimeout(function(){moment().format("DD.MM.YYYY"),moment().subtract(30,"days").format("DD.MM.YYYY");$("#dash-daterange-picker").daterangepicker({startDate:f,endDate:g,opens:"left",locale:{format:"DD.MM.YYYY",separator:" - ",applyLabel:"Übernehmen",cancelLabel:"Abbrechen",fromLabel:"Von",toLabel:"Bis",customRangeLabel:"Custom",daysOfWeek:["So","Mo","Di","Mi","Do","Fr","Sa"],monthNames:["Januar","Februar","März","April","Mai","Juni","Juli","August","September","Oktober","November","Dezember"],firstDay:1}}),$("#dash-daterange-picker").on("apply.daterangepicker",a.dateRangeChanged)},500)},a.initData(),a.dateRangeChanged=function(c,d){Intercom("trackEvent","Changed date range of line graph in Dashboard"),a.linegraphspinner=e.defer(),b.getStatistics(d.startDate.format("YYYY-MM-DD"),d.endDate.format("YYYY-MM-DD")).then(function(b){a.calcGraphData(b,d.startDate,d.endDate),a.campaignSelectChanged(),a.linegraphspinner.resolve()})},a.accumulatedValues={allViews:0,allClicks:0};a.calcGraphData=function(b,c,d){a.lineGraph.currentLineToDraw=0,a.lineGraph.totalViewsAll=0,a.lineGraph.totalClicksAll=0;var e=d.diff(c,"days");e+=1;var f=10,j=$(window).width();j<600&&(f=5);var k=[];if(e<11)a.interpolationValue=1;else{var l=Math.round(e/f);a.interpolationValue=l}for(var m=[],n=e-1;n>=0;n--){var o=moment(d).subtract(n,"days").format("DD.MMM");k.push(o),m.push(moment(d).subtract(n,"days").format("DD.MM.YYYY"))}k.length>1?(a.lineGraph.dataToShow.labels=k,a.lineGraph.dates=m):a.lineGraph.dataToShow.labels=[];var p=i(k,b.views,"views");a.lineGraph.viewData=p;var p=i(k,b.clicks,"clicks");a.lineGraph.clickData=p,a.lineGraph.rateData=h();for(var q=[],r=0;r<a.lineGraph.dataToShow.labels.length;r++)q.push(0);for(var n=0;n<a.campaigns.length;n++)if(d.isAfter(moment(a.campaigns[n].createdAt))){for(var s=!1,t=0;t<a.lineGraph.viewData.length;t++)if(a.lineGraph.viewData[t].id===a.campaigns[n].id){s=!0;break}s||a.lineGraph.viewData.push({title:a.campaigns[n].title,name:a.campaigns[n].title,id:a.campaigns[n].id,color:a.campaigns[n].color,meta:{color:a.campaigns[n].color},data:q}),s=!1;for(var t=0;t<a.lineGraph.clickData.length;t++)if(a.lineGraph.clickData[t].id===a.campaigns[n].id){s=!0;break}s||a.lineGraph.clickData.push({title:a.campaigns[n].title,name:a.campaigns[n].title,id:a.campaigns[n].id,color:a.campaigns[n].color,meta:{color:a.campaigns[n].color},data:q}),s=!1;for(var t=0;t<a.lineGraph.rateData.length;t++)if(a.lineGraph.rateData[t].id===a.campaigns[n].id){s=!0;break}s||a.lineGraph.rateData.push({title:a.campaigns[n].title,name:a.campaigns[n].title,id:a.campaigns[n].id,color:a.campaigns[n].color,meta:{color:a.campaigns[n].color},data:q})}a.lineGraph.totalViews=a.lineGraph.totalViewsAll,a.lineGraph.totalClicks=a.lineGraph.totalClicksAll,a.lineGraph.rateData.sort(function(a,b){return a.id-b.id}),a.lineGraph.clickData.sort(function(a,b){return a.id-b.id}),a.lineGraph.viewData.sort(function(a,b){return a.id-b.id}),g()},a.selectboxvalues={selected:"All",values:[]},a.groupButtonSelection={views:!0,clicks:!1,rate:!1},a.changeGraphMode=function(b){switch(a.groupButtonSelection={views:!1,clicks:!1,rate:!1},a.lineGraph.currentLineToDraw=0,b){case"clicks":a.groupButtonSelection.clicks=!0,a.campaignSelectChanged();break;case"views":a.groupButtonSelection.views=!0,a.campaignSelectChanged();break;case"rate":a.groupButtonSelection.rate=!0,a.campaignSelectChanged()}Intercom("trackEvent","Changed mode (clicks, views) of line graph in Dashboard")},a.campaignSelectChanged=function(){var b=a.selectboxvalues.selected;if(a.lineGraph.currentLineToDraw=0,a.groupButtonSelection.views===!0){if("All"===b)a.lineGraph.dataToShow.series=a.lineGraph.viewData,a.lineGraph.totalViews=a.lineGraph.totalViewsAll,a.lineGraph.totalClicks=a.lineGraph.totalClicksAll;else for(var c=a.lineGraph.viewData,d=0;d<c.length;d++)if(c[d].id==b){for(var e=0,f=0;f<c[d].data.length;f++)e+=c[d].data[f].value;return a.lineGraph.totalViews=e,a.lineGraph.dataToShow.series=[],void a.lineGraph.dataToShow.series.push(c[d])}}else if(a.groupButtonSelection.clicks===!0){if("All"===b)a.lineGraph.dataToShow.series=a.lineGraph.clickData,a.lineGraph.totalViews=a.lineGraph.totalViewsAll,a.lineGraph.totalClicks=a.lineGraph.totalClicksAll;else for(var c=a.lineGraph.clickData,d=0;d<c.length;d++)if(c[d].id==b){for(var g=0,f=0;f<c[d].data.length;f++)g+=c[d].data[f].value;return a.lineGraph.totalClicks=g,a.lineGraph.dataToShow.series=[],void a.lineGraph.dataToShow.series.push(c[d])}}else if(a.groupButtonSelection.rate===!0)if("All"===b)a.lineGraph.dataToShow.series=a.lineGraph.rateData,a.lineGraph.totalViews=a.lineGraph.totalViewsAll,a.lineGraph.totalClicks=a.lineGraph.totalClicksAll;else{for(var c=a.lineGraph.viewData,d=0;d<c.length;d++)if(c[d].id==b){for(var e=0,f=0;f<c[d].data.length;f++)e+=c[d].data[f].value;a.lineGraph.totalViews=e}for(var c=a.lineGraph.clickData,d=0;d<c.length;d++)if(c[d].id==b){for(var g=0,f=0;f<c[d].data.length;f++)g+=c[d].data[f].value;a.lineGraph.totalClicks=g}for(var c=a.lineGraph.rateData,d=0;d<c.length;d++)c[d].id==b&&(a.lineGraph.dataToShow.series=[],a.lineGraph.dataToShow.series.push(c[d]))}}}]).directive("fadeIn",["$timeout",function(a){return{restrict:"A",link:function(a,b,c){b.addClass("ng-hide-remove"),b.on("load",function(){b.addClass("ng-hide-add")})}}}])}(angular.module("mailtasticApp.dashboard",[])),function(a){"use strict";a.controller("CampaignsCtrl",["$scope","$filter","campaignService","StorageFactory","groupsService","browseService","$state",function(a,b,c,d,e,f,g){a.Math=window.Math,a.filterText="",a.customstyle={maincontentstyle:""},a.deleteGroup=function(a){bootbox.confirm({size:"small",message:"Möchten Sie diese Abteilung wirklich löschen?",callback:function(b){b===!0&&e["delete"](a).then(function(a){a.success===!0?f.reload():alert("Abteilung konnte leider nicht gelöscht werden.")})}})},a.deleteGroups=function(){bootbox.confirm({size:"small",message:"Möchten Sie diese Abteilungen wirklich löschen? Alle zugewiesenen Mitarbeiter werden der Standard Abteilung zugewiesen.",callback:function(b){if(b===!0){for(var c=[],d=0;d<a.data.selectedGroups.length;d++)c.push(a.data.selectedGroups[d].id);e.deleteMany(c).then(function(a){a.success===!0?f.reload():alert("Die Abteilungen konnten leider nicht gelöscht werden. Bitte versuchen Sie es erneut.")})}}})},a.data={campaignsToShow:[],campaigns:[],activeCampaigns:[],inactiveCampaigns:[],selectedCampaigns:[],selectedGroups:[],groups:[],selectedGroupForCampaign:"All"},a.removeCampaignOfGroups=function(){bootbox.confirm({size:"small",message:"Möchten Sie Zuordnung der Kampagne zu diesen Abteilungen wirklich entfernen?",callback:function(b){if(b===!0){for(var c=[],d=0;d<a.data.selectedGroups.length;d++)c.push(a.data.selectedGroups[d].id);c.length>0&&e.setCampaign(c,null).then(function(a){a.success===!0?(alert(Strings.infos.CAMPAIGN_GROUPS_REMOVED),f.reload()):alert(Strings.errors.TECHNISCHER_FEHLER)})}}})},a.removeCampaignOfGroup=function(a){bootbox.confirm({size:"small",message:"Möchten Sie Zuordnung der Kampagne zu dieser Abteilungen wirklich entfernen?",callback:function(b){if(b===!0){var c=[];c.push(a),e.setCampaign(c,null).then(function(a){a.success===!0?(alert(Strings.infos.CAMPAIGN_GROUP_REMOVED),f.reload()):alert(Strings.errors.TECHNISCHER_FEHLER)})}}})},a.getTimes=function(a,b){return a.slice(0,b)},a.sidemenutoggled=!1,a.togglesidemenu=function(){var b=$(window).width();b<991&&(a.sidemenutoggled=!a.sidemenutoggled)},a.showGroupDetails=function(a){g.go("base.employees.groupdetails",{groupId:a})},a.showCampaignDetails=function(a){g.go("base.campaigns.campaigndetail",{campaignId:a})},a.addCampaignToGroup=function(a,b){return"All"===a?void alert("Bitte wählen Sie zuerst eine Abteilung aus."):null===b?void alert(Strings.errors.TECHNISCHER_FEHLER):void bootbox.confirm({size:"small",message:"Möchten Sie der Abteilung wirklich die Kampagne zuweisen?",callback:function(c){if(c===!0){var d=[];d.push(a),e.setCampaign(d,b).then(function(a){a.success===!0?(alert(Strings.infos.CAMPAIGN_GROUP_ADDED),f.reload()):(alert(Strings.errors.TECHNISCHER_FEHLER),f.reload())})}}})},a.campaignChangedSidebar=function(b){for(var c=[],d=0;d<a.data.selectedGroups.length;d++)c.push(a.data.selectedGroups[d].id);if(0!==c.length){var e=a.selectedCampaign.selected.id;return e!==b&&void a.handleCampaignChanged(b,e,c)}},a.handleCampaignChanged=function(b,c,d){bootbox.confirm({size:"small",message:"Möchten Sie die Kampagne wirklich ändern?",callback:function(f){f===!0?e.setCampaign(d,c).then(function(b){b.success===!0?(alert("Kampagne wurde erfolgreich zugewiesen."),a.reInitGroups()):(alert("Kampagne konnte nicht geändert werden. Bitte wenden Sie sich an den Support falls weiterhin Probleme auftreten sollten."),a.reInitGroups())}):a.$apply(function(){for(var c=!1,d=0;d<a.data.campaigns.length;d++)if(a.data.campaigns[d].id==b){a.selectedCampaign.selected=a.data.campaigns[d],c=!0;break}c===!1&&(a.selectedCampaign.selected={})})}})},a.reInitGroups=function(){a.data.selectedGroups=[],d.saveEmployeeGroupData(a),f.reload()},a.unusedGroups=function(b){var c=[];if(null==b)return c;for(var d=0;d<a.data.groups.length;d++){var e=jQuery.grep(b,function(b,c){return b.id===a.data.groups[d].id});0===e.length&&c.push(a.data.groups[d])}return c},a.initData=function(){c.get().then(function(b){a.data.activeCampaigns=[],a.data.inactiveCampaigns=[];for(var c=0;c<b.length;c++)0===b[c].activegroups.length?a.data.inactiveCampaigns.push(b[c]):a.data.activeCampaigns.push(b[c]);a.data.campaigns=a.data.activeCampaigns,a.data.campaigns=a.data.campaigns.concat(a.data.inactiveCampaigns),a.data.campaignsToShow=a.data.campaigns,e.get().then(function(b){a.data.groups=b,d.loadCampaignData(a)})})},a.sortCampaigns=function(a){},a.campaigndata={amountOfCampaigns:a.data.campaigns.length,activeCmapaigns:2,inactiveCmapaigns:3};var h=b("orderBy"),i=!1;a.sortList=function(b){i=!i,a.data.campaignsToShow=h(a.data.campaignsToShow,b,i)},a.deleteCampaign=function(a){bootbox.confirm({size:"small",message:"Möchten Sie diese Kampagne wirklich löschen?",callback:function(b){b===!0&&c["delete"](a).then(function(a){a.message===!0&&f.reload()})}})},a.deleteCampaigns=function(b){bootbox.confirm({size:"small",message:"Möchten Sie diese Kampagnen wirklich löschen?",callback:function(b){if(b===!0){for(var d=[],e=0;e<a.data.selectedCampaigns.length;e++)d.push(a.data.selectedCampaigns[e].id);c.deleteMany(d).then(function(a){a.message===!0&&f.reload()})}}})},a.rightSideContent={showGroup:!1,showCampaign:!0},a.selectedCampaign={selected:{}},a.initData()}]).controller("CampaignListCtrl",["$scope","$stateParams","StorageFactory",function(a,b,c){a.customstyle.maincontentstyle={},a.rightSideContent.showGroup=!1,a.rightSideContent.showCampaign=!0;var d=function(b,d){var e=jQuery.grep(a.data.selectedCampaigns,function(a,b){return a.id===d.id});if("add"===b&&0===e.length&&a.data.selectedCampaigns.push(d),"remove"===b&&e.length>0)for(var f=0;f<a.data.selectedCampaigns.length;f++){var g=a.data.selectedCampaigns[f];if(g.id===d.id){a.data.selectedCampaigns.splice(f,1);break}}c.saveCampaignData(a)};a.updateSelection=function(a,b){var c=a.target,e=c.checked?"add":"remove";d(e,b)},a.getSelectedClass=function(b){return a.isSelected(b)?"selected":""},a.isSelected=function(b){var c=jQuery.grep(a.data.selectedCampaigns,function(a,c){return a.id===b.id});return 0!==c.length},a.isSelectedAll=function(){return a.data.selectedCampaigns.length===a.data.campaigns.length},a.selectAll=function(b){for(var c=b.target,e=c.checked?"add":"remove",f=0;f<a.data.campaignsToShow.length;f++){var g=a.data.campaignsToShow[f];d(e,g)}},a.rowClicked=function(b){for(var c=b.id,e="add",f=0;f<a.data.selectedCampaigns.length;f++)if(c===a.data.selectedCampaigns[f].id){e="remove";break}"add"===e?(a.data.selectedCampaigns=[],a.data.selectedCampaigns.push(b)):d(e,b),d(e,b)},a.initData=function(){var c=b.mode;switch(c){case"all":a.data.campaignsToShow=a.data.campaigns;break;case"active":a.data.campaignsToShow=a.data.activeCampaigns;break;case"inactive":a.data.campaignsToShow=a.data.inactiveCampaigns}},a.initData()}]).controller("CampaignDetailsCtrl",["$scope","$stateParams","campaignService","$q","groupsService","$state","StorageFactory","browserService","$timeout",function(a,b,c,d,e,f,g,h,i){function j(){var e=d.defer(),g=b.campaignId;if(g){for(var h=!1,i=0;i<a.data.selectedCampaigns.length;i++)if(a.data.selectedCampaigns[i].id===g){a.campaignDetailData=a.data.selectedCampaigns[i],a.campaignGroups=a.campaignDetailData.activegroups,h=!0,e.resolve(!0);break}if(h===!1)for(var i=0;i<a.data.campaigns.length;i++)if(a.data.campaigns[i].id===g){a.campaignDetailData=a.data.campaigns[i],a.campaignGroups=a.campaignDetailData.activegroups,h=!0,e.resolve(!0);break}h===!1&&c.getOne(g).then(function(b){b&&b.success!==!1?(a.campaignDetailData=b,a.campaignGroups=a.campaignDetailData.activegroups,h=!0,e.resolve(!0)):f.go("base.campaigns.campaignlist",{},{reload:!0})})}else f.go("base.campaigns.campaignlist",{},{reload:!0});return e.promise}function k(){for(var b=[],c=[],d=[],e=0;e<a.lineGraph.viewData.length;e++){for(var f=0;f<a.lineGraph.viewData[e].data.length;f++)b.push({value:a.lineGraph.viewData[e].data[f],meta:{impressions:a.lineGraph.viewData[e].data[f],clicks:a.lineGraph.clickData[e].data[f],label:a.lineGraph.dates[f]}}),c.push({value:a.lineGraph.clickData[e].data[f],meta:{impressions:a.lineGraph.viewData[e].data[f],clicks:a.lineGraph.clickData[e].data[f],label:a.lineGraph.dates[f]}}),d.push({value:a.lineGraph.rateData[e].data[f],meta:{impressions:a.lineGraph.viewData[e].data[f],clicks:a.lineGraph.clickData[e].data[f],label:a.lineGraph.dates[f]}});a.lineGraph.viewData[e].data=b,a.lineGraph.clickData[e].data=c,a.lineGraph.rateData[e].data=d,b=[],c=[],d=[]}}function l(){for(var b=a.lineGraph.clickData,c=[],d={},e=0;e<b.length;e++){d={data:[],title:"",name:"",color:"",meta:{color:""},id:null};var f=b[e],g=f.id,h=$.grep(a.lineGraph.viewData,function(a){return a.id===g});if(h){for(var i=0;i<b[e].data.length;i++){var j=h[0].data[i],k=b[e].data[i];if(0===k||0===j)var l=0;else var l=k/j*100;d.data.push(l)}d.title=h[0].title,d.name=h[0].title,d.id=h[0].id,d.color=h[0].color,d.meta.color=h[0].color,c.push(d)}}return c}function m(b,c,d){var e=-1,f=[],g={data:[],title:"",name:"",color:"",meta:{color:""}};angular.forEach(c,function(b,c){e!==b.campaignId?(f.push(g),e=b.campaignId,g=[],g.push(b)):g.push(b),"views"===d?a.lineGraph.totalViews+=b.anzahl:"clicks"===d&&(a.lineGraph.totalClicks+=b.anzahl)}),f.push(g),f.splice(0,1);var h=[],i={data:[],title:"",name:"",color:"",meta:{color:""}};return angular.forEach(f,function(a,c){angular.forEach(b,function(b,c){var d=n(b,a);i.data.push(d)}),i.title=a[0].title,i.name=a[0].title,i.id=a[0].campaignId,i.color=a[0].color,i.meta.color=a[0].color,h.push(i),i={data:[],title:"",name:"",color:"",meta:{color:""}}}),h}function n(a,b){var c=0;return angular.forEach(b,function(b,d){var e=moment(b.day).format("DD.MMM");e===a&&(c=b.anzahl)}),c}a.rightSideContent.showGroup=!1,a.rightSideContent.showCampaign=!1,a.campaignGroups=[],a.checkIfGroupIsAttached=function(b){var c=jQuery.grep(a.campaignDetailData.activegroups,function(a,c){return a.id===b});return 0!==c.length},a.customstyle.maincontentstyle={"margin-right":0},a.search={filterText:""},a.searchPotGroups=function(){e.search(a.search.filterText).then(function(b){a.campaignGroups=b})},a.initData=function(){var d=h();"firefox"===d&&i(function(){var b=$(".linepanelbody").width();a.lineGraph.options.width=b+"px"},1e3),j().then(function(d){if(d===!0){var e=b.campaignId,f=moment().subtract(30,"days"),g=moment(),h=f.format("YYYY-MM-DD"),i=g.format("YYYY-MM-DD");c.getStatisticsSingle(h,i,e).then(function(b){a.calcGraphData(b,f,g),a.lineGraph.dataToShow.series=a.lineGraph.viewData,a.selectboxvalues.values=a.lineGraph.viewData}),setTimeout(function(){moment().format("DD.MM.YYYY"),moment().subtract(30,"days").format("DD.MM.YYYY");$("#dash-daterange-picker").daterangepicker({startDate:f,endDate:g,opens:"left",locale:{format:"DD.MM.YYYY",separator:" - ",applyLabel:"Übernehmen",cancelLabel:"Abbrechen",fromLabel:"Von",toLabel:"Bis",customRangeLabel:"Custom",daysOfWeek:["So","Mo","Di","Mi","Do","Fr","Sa"],monthNames:["Januar","Februar","März","April","Mai","Juni","Juli","August","September","Oktober","November","Dezember"],firstDay:1}}),$("#dash-daterange-picker").on("apply.daterangepicker",a.dateRangeChanged)},500)}})},a.Math=window.Math,a.campaignList={data:{}},a.lineGraph={options:{fullWidth:!0,showPoint:!0,chartPadding:{top:15,right:35,bottom:1,left:10},height:"270px",lineSmooth:Chartist.Interpolation.simple({divisor:2}),axisX:{showGrid:!0,offset:30,scaleMinSpace:20,onlyInteger:!0,labelInterpolationFnc:function(b,c){return c%a.interpolationValue===0?b:null}},axisY:{showGrid:!0,onlyInteger:!0}},clickData:[],dates:[],viewData:[],rateData:[],totalClicks:0,totalViews:0,dataToShow:{labels:["Monday","Tuesday","Wednesday","Thursday","Friday"],series:[[0,0,0,0,0],[0,0,0,0,0],[0,0,0,0,0]]},currentLineToDraw:0,events:{draw:function(b){if("line"===b.type){var c="";a.lineGraph.dataToShow.series.length>a.lineGraph.currentLineToDraw&&(c=a.lineGraph.dataToShow.series[a.lineGraph.currentLineToDraw].color,a.lineGraph.currentLineToDraw+=1),b.element.attr({style:"stroke:"+c})}else"point"===b.type&&b.element.attr({style:"stroke:"+b.series.color})}}},a.interpolationValue=1,a.dateRangeChanged=function(b,d){c.getStatisticsSingle(d.startDate.format("YYYY-MM-DD"),d.endDate.format("YYYY-MM-DD"),a.campaignDetailData.id).then(function(b){a.calcGraphData(b,d.startDate,d.endDate),a.lineGraph.dataToShow.series=a.lineGraph.viewData,a.selectboxvalues.values=a.lineGraph.viewData}),Intercom("trackEvent","Changed date range of line graph in campaigndetails")},a.accumulatedValues={allViews:0,allClicks:0};a.calcGraphData=function(b,c,d){a.lineGraph.currentLineToDraw=0;var e=d.diff(c,"days");e+=1,a.lineGraph.totalClicks=0,a.lineGraph.totalViews=0;var f=10,g=$(window).width();g<600&&(f=5);var h=[];if(e<11)a.interpolationValue=1;else{var i=Math.round(e/f);a.interpolationValue=i}for(var j=[],n=e-1;n>=0;n--){var o=moment(d).subtract(n,"days").format("DD.MMM");h.push(o),j.push(moment(d).subtract(n,"days").format("DD.MM.YYYY"))}h.length>1?(a.lineGraph.dataToShow.labels=h,a.lineGraph.dates=j):a.lineGraph.dataToShow.labels=[];var p=m(h,b.views,"views");a.lineGraph.viewData=p;var p=m(h,b.clicks,"clicks");if(a.lineGraph.clickData=p,a.lineGraph.rateData=l(),d.isAfter(moment(a.campaignDetailData.createdAt))){for(var q=[],n=0;n<e;n++)q.push(0);0===a.lineGraph.viewData.length&&a.lineGraph.viewData.push({title:a.campaignDetailData.title,name:a.campaignDetailData.title,id:a.campaignDetailData.id,color:a.campaignDetailData.color,meta:{color:a.campaignDetailData.color},data:q}),0===a.lineGraph.clickData.length&&a.lineGraph.clickData.push({title:a.campaignDetailData.title,name:a.campaignDetailData.title,id:a.campaignDetailData.id,color:a.campaignDetailData.color,meta:{color:a.campaignDetailData.color},data:q}),0===a.lineGraph.rateData.length&&a.lineGraph.rateData.push({title:a.campaignDetailData.title,name:a.campaignDetailData.title,id:a.campaignDetailData.id,color:a.campaignDetailData.color,meta:{color:a.campaignDetailData.color},data:q})}a.lineGraph.rateData.sort(function(a,b){return a.id-b.id}),a.lineGraph.clickData.sort(function(a,b){return a.id-b.id}),a.lineGraph.viewData.sort(function(a,b){return a.id-b.id}),k()},a.selectboxvalues={selected:"All",values:[]},a.groupButtonSelection={views:!0,clicks:!1,rate:!1},a.changeGraphMode=function(b){switch(a.groupButtonSelection={views:!1,clicks:!1,rate:!1},a.lineGraph.currentLineToDraw=0,b){case"clicks":a.groupButtonSelection.clicks=!0,a.lineGraph.dataToShow.series=a.lineGraph.clickData;break;case"views":a.groupButtonSelection.views=!0,a.lineGraph.dataToShow.series=a.lineGraph.viewData;break;case"rate":a.groupButtonSelection.rate=!0,a.lineGraph.dataToShow.series=a.lineGraph.rateData}a.selectboxvalues.selected="All",Intercom("trackEvent","Changed mode (clicks, views) of line graph in campaigndetails")},a.campaignSelectChanged=function(){var b=a.selectboxvalues.selected;if(a.lineGraph.currentLineToDraw=0,a.groupButtonSelection.views===!0){if("All"===b)a.lineGraph.dataToShow.series=a.lineGraph.viewData;else for(var c=a.lineGraph.viewData,d=0;d<c.length;d++)if(c[d].id==b)return a.lineGraph.dataToShow.series=[],void a.lineGraph.dataToShow.series.push(c[d])}else if(a.groupButtonSelection.clicks===!0){if("All"===b)a.lineGraph.dataToShow.series=a.lineGraph.clickData;else for(var c=a.lineGraph.clickData,d=0;d<c.length;d++)if(c[d].id==b)return a.lineGraph.dataToShow.series=[],void a.lineGraph.dataToShow.series.push(c[d])}else if(a.groupButtonSelection.rate===!0)if("All"===b)a.lineGraph.dataToShow.series=a.lineGraph.rateData;else for(var c=a.lineGraph.rateData,d=0;d<c.length;d++)if(c[d].id==b)return a.lineGraph.dataToShow.series=[],void a.lineGraph.dataToShow.series.push(c[d])},a.initData();var o=function(b,c){var d=jQuery.grep(a.data.selectedGroups,function(a,b){return a.id===c.id});if("add"===b&&0===d.length&&(a.data.selectedGroups.push(c),a.recalcAvatars()),"remove"===b&&d.length>0)for(var e=0;e<a.data.selectedGroups.length;e++){var f=a.data.selectedGroups[e];if(f.id===c.id){a.data.selectedGroups.splice(e,1);break}}1===a.data.selectedGroups.length?a.selectedCampaign.selected={title:a.data.selectedGroups[0].campaignTitle,id:a.data.selectedGroups[0].campaignId,color:a.data.selectedGroups[0].campaignColor}:a.data.selectedGroups.length>1&&(a.selectedCampaign.selected={})};a.updateSelection=function(a,b){var c=a.target,d=c.checked?"add":"remove";o(d,b)},a.getSelectedClass=function(b){return a.isSelected(b)?"selected":""},a.isSelected=function(b){var c=jQuery.grep(a.data.selectedGroups,function(a,c){return a.id===b.id});return 0!==c.length},a.isSelectedAll=function(){return a.data.selectedGroups.length===a.campaignGroups.length},a.selectAll=function(b){for(var c=b.target,d=c.checked?"add":"remove",e=0;e<a.campaignGroups.length;e++){var f=a.campaignGroups[e];o(d,f)}},a.rowClicked=function(b){for(var c=b.id,d="add",e=0;e<a.data.selectedGroups.length;e++)if(c===a.data.selectedGroups[e].id){d="remove";break}"add"===d?(a.data.selectedGroups=[],a.data.selectedGroups.push(b),a.selectedCampaign.selected={title:a.data.selectedGroups[0].campaignTitle,id:a.data.selectedGroups[0].campaignId,
color:a.data.selectedGroups[0].campaignColor}):o(d,b)}}]).filter("status",function(){return function(a,b){if("all"===b)return a;var c=[];return angular.forEach(a,function(a,d){a.status===b&&c.push(a)}),c}})}(angular.module("mailtasticApp.campaigns",["ui.bootstrap"])),function(a){"use strict";angular.module("mailtasticApp.employees").controller("EmployeeStructureCtrl",["$scope","groupsService","employeeService","browseService","$state","campaignService","StorageFactory","paymentService","$uibModal","alertService",function(a,b,c,d,e,f,g,h,i,j){a.sidemenutoggled=!1,a.togglesidemenu=function(){var b=$(window).width();b<991&&(a.sidemenutoggled=!a.sidemenutoggled)},a.isLeftNaviElementActive=function(a){},a.customstyle={maincontentstyle:""},a.deleteEmployee=function(b){a.deleteEmployees(b)},a.getClassGroup=function(a){},a.isLeftNaviElementActive=function(a){},a.deleteGroup=function(c){for(var d="Standard Gruppe",f=0;f<a.data.groups.length;f++)1==a.data.groups[f].isDefault&&(d=a.data.groups[f].title);bootbox.confirm({size:"small",message:'Möchten Sie diese Abteilung wirklich löschen?<br><br> <span class="schrift_rot text-bold">ACHTUNG: Alle zugewiesenen Mitarbeiter werden der Abteilung "'+d+'" zugewiesen.</span>',buttons:{cancel:{label:"Abbrechen",className:"btn-default"},confirm:{label:"Löschen",className:"btn-danger pull-right"}},callback:function(d){d===!0&&b["delete"](c).then(function(b){if(b.success===!0){for(var d=0;d<a.data.selectedEmployees.length;d++)a.data.selectedEmployees[d].id===c&&a.data.selectedEmployees.splice(d,1);e.go("base.employees.grouplist",{},{reload:!0})}else alert("Abteilung konnte leider nicht gelöscht werden.")})}})},a.deleteGroups=function(){for(var c="Standard Gruppe",e=0;e<a.data.groups.length;e++)1==a.data.groups[e].isDefault&&(c=a.data.groups[e].title);bootbox.confirm({size:"small",message:'Möchten Sie diese Abteilungen wirklich löschen? <br><br> <span class="schrift_rot text-bold">ACHTUNG: Alle zugewiesenen Mitarbeiter werden der Abteilung "'+c+'" zugewiesen.</span>',buttons:{cancel:{label:"Abbrechen",className:"btn-default"},confirm:{label:"Löschen",className:"btn-danger pull-right"}},callback:function(c){if(c===!0){for(var e=[],f=0;f<a.data.selectedGroups.length;f++)e.push(a.data.selectedGroups[f].id);b.deleteMany(e).then(function(a){a.success===!0?d.reload():alert("Die Abteilungen konnten leider nicht gelöscht werden. Bitte versuchen Sie es erneut.")})}}})},a.moveEmployeesToGroup=function(a,b){for(var e=[],f=0;f<a.length;f++)e.push(a[f].id);c.moveToGroup(e,b).then(function(a){a.success===!0?(e.length>1?alert("Alle Mitarbeiter wurden erfolgreich zur Abteilung hinzugefügt."):alert("Abteilung wurde erfolgreich geändert."),d.reload()):(alert("Abteilung konnte nicht geändert werden. Bitte wenden Sie sich an den Support falls weiterhin Probleme auftreten sollten."),d.reload())})},a.resendInvitationSingle=function(b){if(b){var c=[];c.push({id:b}),a.resendInvitations(c)}else alert(Strings.errors.TECHNISCHER_FEHLER)},a.resendInvitations=function(a){if(a&&Array.isArray(a)&&0!==a.length){for(var b=[],d=0;d<a.length;d++)b.push(a[d].id);c.resendInvitation(b).then(function(a){a.success===!0?b.length>1?j.defaultSuccessMessage("Die Erinnerungen wurden versendet."):j.defaultSuccessMessage("Die Erinnerung wurde versendet."):alert(Strings.errors.TECHNISCHER_FEHLER)})}else alert(Strings.errors.TECHNISCHER_FEHLER)},a.groupSidebarChanged=function(b,c,d){var e;e=c.length>1?"Möchten Sie diese Mitarbeiter wirklich einer anderen Abteilung zuweisen?":"Möchten Sie den Mitarbeiter wirklich einer anderen Abteilung zuweisen?",bootbox.confirm({size:"small",message:e,callback:function(e){e===!0?a.moveEmployeesToGroup(c,d):a.$apply(function(){a.selected.selectedGroupForEmp=b})}})},a.deleteEmployees=function(b){var e=[];if(b)e.push(b);else{for(var f=0;f<a.data.selectedEmployees.length;f++)e.push(a.data.selectedEmployees[f].id);if(0===e.length)return void alert("Bitte selektieren Sie mindestens einen Mitarbeiter.")}h.getUserStatus().then(function(a){if(a.hasSubscription===!0){var b=i.open({animation:!0,templateUrl:"employees/modal/employee_delete_modal.html",controller:"EmployeeDeleteModalInstanceCtrl",size:"md",windowClass:"employeeDeleteModal",resolve:{empsToDelete:function(){return e}}});b.result.then(function(a){d.reload()},function(){alert("Mitarbeiter wurden nicht gelöscht"),d.reload()})}else bootbox.confirm({size:"small",message:"Möchten Sie diese Mitarbeiter wirklich löschen?",callback:function(a){a===!0&&c.deleteMany(e).then(function(a){a.success===!0||alert("Mitarbeiter konnten leider nicht gelöscht werden."),d.reload()})}})})},a.handleCampaignChanged=function(c,e,f){bootbox.confirm({size:"small",message:"Möchten Sie die Kampagne wirklich ändern?",callback:function(g){g===!0?b.setCampaign(f,e).then(function(b){b.success===!0?(alert("Kampagne wurde erfolgreich zugewiesen."),a.reInitGroups(),d.reload()):(alert("Kampagne konnte nicht geändert werden. Bitte wenden Sie sich an den Support falls weiterhin Probleme auftreten sollten."),a.reInitGroups(),d.reload())}):a.$apply(function(){for(var b=!1,d=0;d<a.data.campaigns.length;d++)if(a.data.campaigns[d].id==c){a.selectedCampaign.selected=a.data.campaigns[d],b=!0;break}b===!1&&(a.selectedCampaign.selected={})})}})},a.campaignChangedSidebar=function(b){for(var c=[],d=0;d<a.data.selectedGroups.length;d++)c.push(a.data.selectedGroups[d].id);if(0!==c.length){var e=a.selectedCampaign.selected.id;return e!==b&&void a.handleCampaignChanged(b,e,c)}},a.campaignChangedDetails=function(b){var c=a.selectedCampaign.selected.id;if(c===b)return!1;var d=[];d.push(a.data.groupDetail.id),a.handleCampaignChanged(b,c,d)},a.reInitGroups=function(){b.get().then(function(b){a.data.groups=b;for(var c=0;c<a.data.selectedGroups.length;c++){var d=jQuery.grep(a.data.groups,function(b,d){return b.id===a.data.selectedGroups[c].id});0===d.length?a.data.selectedGroups.splice(c,1):(a.data.selectedGroups[c]=d[0],a.selectedCampaign.selected={title:d[0].campaignTitle,id:d[0].campaignId,color:d[0].campaignColor,url:d[0].campaignUrl,image:d[0].campaignImage},a.data.groupDetail&&a.data.groupDetail.id===d[0].id&&(a.data.groupDetail=d[0]))}})},a.showGroupDetails=function(a){e.go("base.employees.groupdetails",{groupId:a})},a.showUserDetails=function(a){e.go("base.employees.employeedetail",{employeeId:a})},a.showCampaignDetails=function(a){e.go("base.campaigns.campaigndetail",{campaignId:a})},a.initDataParameters=function(){g.loadEmployeeGroupData(a)},a.employeeTotalDisplayed=10,a.initData=function(){a.employeeTotalDisplayed=10,b.get().then(function(b){for(var d=[],e=[],g=0;g<b.length;g++)b[g].campaignId?e.push(b[g]):d.push(b[g]);a.data.groups=e,a.data.groups=a.data.groups.concat(d),f.get().then(function(b){a.data.campaigns=b,c.get().then(function(b){a.data.employees=b;for(var c=0;c<a.data.selectedEmployees.length;c++){var d=jQuery.grep(a.data.employees,function(b,d){return b.id===a.data.selectedEmployees[c].id});0===d.length?a.data.selectedEmployees.splice(c,1):(a.data.selectedEmployees[c]=d[0],a.selected.selectedGroupForEmp=a.data.selectedEmployees[c].currentGroup.toString(),a.employeeDetailData=d[0])}a.recalcAvatars(),a.initDataParameters()})})})},a.data={groups:[],employees:[],campaigns:[],selectedEmployees:[],selectedGroups:[],groupDetail:{}},a.selectedCampaign={selected:{}},a.selected={selectedGroupForEmp:""},a.rightSideContent={showEmployee:!1,showGroup:!1}}]).filter("status",function(){return function(a,b){if("all"===b)return a;var c=[];return angular.forEach(a,function(a,d){a.status===b&&c.push(a)}),c}}),a.controller("EmployeeDetailsCtrl",["$stateParams","$scope","employeeService","$state","browseService","signatureHelperService","$q","alertService","$sce","signatureService",function(a,b,c,d,e,f,g,h,i,j){b.Math=window.Math,b.employeeDetailData={},b.rightSideContent.showEmployee=!1,b.rightSideContent.showGroup=!1,b.customstyle.maincontentstyle={"margin-right":0},b.signatureData={preview:"",sigStatus:""},b.initData=function(){var e=a.employeeId;e?b.employeeId=a.employeeId:e=b.employeeId,e&&c.getOne(e).then(function(a){return a=a[0],a&&a.email&&a.id?(b.employeeDetailData=a,b.selected.selectedGroupForEmp=b.employeeDetailData.currentGroup.toString(),b.recalcAvatars(),g.resolve(!0)):(alert(Strings.errors.DATEN_NICHT_GELADEN),d.go("base.employees.employeelist",{},{reload:!0}),g.reject("employee could not be loaded"))}).then(function(){return b.employeeDetailData.signatureTitle?f.getRelevantDataForSignature(e,b.employeeDetailData.signatureId,"rolledOut"):g.reject()}).then(function(){var a=f.generatePreviewComplete(e);b.signatureData.preview=i.trustAsHtml(a),b.signatureData.sigStatus=f.getHasUserLatestSignature(b.employeeDetailData,"employee")},function(){})["catch"](function(a){h.defaultErrorMessage(Strings.errors.DATEN_NICHT_GELADEN)}),b.recalcAvatars()},b.initData(),b.groupChanged=function(a){var d=b.selected.selectedGroupForEmp;bootbox.confirm({size:"small",message:"Möchten Sie die Abteilung wirklich ändern?",callback:function(f){if(f===!0){var g=[];g.push(b.employeeDetailData.id),c.moveToGroup(g,d).then(function(a){a.success===!0?(alert("Die Abteilung wurde erfolgreich geändert."),e.reload()):(e.reload(),alert("Die Abteilung konnte nicht geändert werden. Bitte wenden Sie sich an den Support falls weiterhin Probleme auftreten sollten."))})}else b.$apply(function(){b.selected.selectedGroupForEmp=a})}})},b.rolloutSignature=function(){b.employeeDetailData.id?j.rolloutEmployee(b.employeeDetailData.id).then(function(a){a.success!==!0?h.defaultErrorMessage(Strings.errors.DATEN_NICHT_GELADEN):h.defaultSuccessMessage("Erinnerungen wurden versendet."),b.initData()}):(h.defaultErrorMessage(Strings.errors.DATEN_NICHT_GELADEN),b.initData())}}]).filter("status",function(){return function(a,b){if("all"===b)return a;var c=[];return angular.forEach(a,function(a,d){a.status===b&&c.push(a)}),c}}),a.controller("EmployeesListCtrl",["$scope","$filter","employeeService","StorageFactory","signatureHelperService",function(a,b,c,d,e){a.Math=window.Math,a.recalcAvatars=function(){$(document).trigger("regenerateAvatars")},a.recalcAvatars(),a.filterText="",a.initData=function(){a.rightSideContent.showEmployee=!0,a.rightSideContent.showGroup=!1,a.data.selectedEmployees=[]},a.employeePagingFunction=function(){a.employeeTotalDisplayed+=10,a.recalcAvatars()},a.getSignatureStatus=function(a){return a.currentSignature?e.getHasUserLatestSignature(a,"employee",a.currentSignature):"no"},a.customstyle.maincontentstyle={};var f=b("orderBy"),g=!1;a.sortList=function(b){g=!g,a.data.employees=f(a.data.employees,b,g)};var h=function(b,c){var e=jQuery.grep(a.data.selectedEmployees,function(a,b){return a.id===c.id});if("add"===b&&0===e.length&&(a.data.selectedEmployees.push(c),a.recalcAvatars()),"remove"===b&&e.length>0)for(var f=0;f<a.data.selectedEmployees.length;f++){var g=a.data.selectedEmployees[f];if(g.id===c.id){a.data.selectedEmployees.splice(f,1);break}}1===a.data.selectedEmployees.length?a.selected.selectedGroupForEmp=a.data.selectedEmployees[0].currentGroup.toString():a.data.selectedEmployees.length>1&&(a.selected.selectedGroupForEmp="selectGroupForEmp"),d.saveEmployeeGroupData(a)};a.updateSelection=function(a,b){var c=a.target,d=c.checked?"add":"remove";h(d,b)},a.getSelectedClass=function(b){return a.isSelected(b)?"selected":""},a.isSelected=function(b){var c=jQuery.grep(a.data.selectedEmployees,function(a,c){return a.id===b.id});return 0!==c.length},a.isSelectedAll=function(){return a.data.selectedEmployees.length===a.data.employees.length},a.selectAll=function(b){for(var c=b.target,d=c.checked?"add":"remove",e=0;e<a.data.employees.length;e++){var f=a.data.employees[e];h(d,f)}},a.rowClicked=function(b){for(var c=b.id,e="add",f=0;f<a.data.selectedEmployees.length;f++)if(c===a.data.selectedEmployees[f].id){e="remove";break}"add"===e?(a.data.selectedEmployees=[],a.data.selectedEmployees.push(b),a.recalcAvatars(),d.saveEmployeeGroupData(a),a.selected.selectedGroupForEmp=a.data.selectedEmployees[0].currentGroup.toString()):h(e,b)},a.initData()}])}(angular.module("mailtasticApp.employees",["ui.bootstrap"])),function(a){"use strict";a.controller("GroupDetailsCtrl",["$scope","campaignService","groupsService","$stateParams","$q","StorageFactory","$state","$filter","browseService","employeeService","$timeout","browserService","signatureService","alertService","signatureHelperService","$sce",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){a.Math=window.Math,a.groupMembers=[],a.data.campaigns=[],a.groupId=-1,a.statoptions={currentStatToShow:"total",value:""},a.usersWithOutdatedSignature=[],a.signatureData={selectedEmployee:"",selectedSignature:"",signatureTitle:"",showDummyData:"",groupMembersDummy:[{firstname:"Max",lastname:"Mustermann",email:"max@mustermann.de"}]},a.filterText="",a.rightSideContent.showEmployee=!1,a.rightSideContent.showGroup=!1,a.customstyle.maincontentstyle={"margin-right":0},a.getHowManyMembersNotActive=function(){for(var b=0,c=0;c<a.groupMembers.length;c++){var d=a.groupMembers[c];0!==d.views&&d.views||b++}return b},a.resendInvitationForAllWhichAreNotActive=function(){var b=d.groupId||a.groupId;return b?void m.rolloutGroup(b).then(function(a){a.success===!0?n.defaultSuccessMessage("Die Erinnerungen wurden versendet."):n.defaultErrorMessage(Strings.errors.DATEN_NICHT_GELADEN)}):void n.defaultErrorMessage(Strings.errors.DATEN_NICHT_GELADEN)},a.signatureWasRolledOutAtLeastOnce=function(){return!!(a.groupMembers.length>0&&a.groupMembers[0].lastRolloutOSignatureItself)},a.determineMemberSignatureStatus=function(){var b=[];if(a.data.groupDetail&&a.data.groupDetail.activeSignature)for(var c=0;c<a.groupMembers.length;c++){var d=a.groupMembers[c],e=o.getHasUserLatestSignature(d,"group",a.data.groupDetail.activeSignature);"outdated"===e||"rolledout"===e||"error"===e?(b.push(d),a.groupMembers[c].sigStatus="outdated"):a.groupMembers[c].sigStatus="latest"}else for(var c=0;c<a.groupMembers.length;c++)a.groupMembers[c].sigStatus="nosignature";a.usersWithOutdatedSignature=b},a.getGroupData=function(){var b=e.defer(),f=d.groupId;f?a.groupId=d.groupId:f=a.groupId;for(var h=-1,i=0;i<a.data.groups.length;i++)if(a.data.groups[i].id===f){h=i;break}return h===-1?c.getOne(f).then(function(c){c=c[0],c&&c.title&&c.id?(a.signatureData.selectedSignature=c.activeSignature,a.data.groupDetail=c,a.selectedCampaign.selected={title:a.data.groupDetail.campaignTitle,id:a.data.groupDetail.campaignId,color:a.data.groupDetail.campaignColor,url:a.data.groupDetail.campaignUrl,image:a.data.groupDetail.campaignImage},b.resolve(!0)):g.go("base.employees.grouplist",{},{reload:!0})}):(a.data.groupDetail=a.data.groups[h],a.selectedCampaign.selected={title:a.data.groupDetail.campaignTitle,id:a.data.groupDetail.campaignId,color:a.data.groupDetail.campaignColor,url:a.data.groupDetail.campaignUrl,image:a.data.groupDetail.campaignImage},b.resolve(!0)),b.promise},a.first=0,a.initData=function(){a.first=0,a.data.selectedGroups=[],f.saveEmployeeGroupData(a),b.get().then(function(b){a.data.campaigns=b}),a.getGroupData().then(function(d){d===!0?(c.getMembers(a.data.groupDetail.id).then(function(b){return a.groupMembers=b,a.signatureData.showDummyData=!1,a.groupMembers.length>0?(a.signatureData.selectedEmployee=b[0].id,a.recalcAvatars(),a.data.groupDetail.activeSignature?e.resolve():(a.determineMemberSignatureStatus(),e.reject("regularfinished"))):a.data.groupDetail.activeSignature?(a.signatureData.showDummyData=!0,e.resolve("dummy")):(a.determineMemberSignatureStatus(),e.reject("regularfinished"))}).then(function(b){return b&&"dummy"===b?o.getRelevantDataForSignature(b,a.signatureData.selectedSignature,"rolledOut"):o.getRelevantDataForSignature(a.signatureData.selectedEmployee,a.signatureData.selectedSignature,"rolledOut")}).then(function(b){a.signatureData.signatureTitle=b.signatureTitle,a.signatureData.signatureTpl=b.signatureTpl,a.signatureData.signatureStructureData=b.signatureData,a.signatureData.activeInGroups=b.activeGroups,a.signatureData.companyData=b.companyData,a.signatureData.employeeData=b.employeeData,a.signatureData.fields=b.fields,a.determineMemberSignatureStatus()}).then(function(){return k(function(){a.generatePreview()},1e3)})["catch"](function(a){"regularfinished"!==a&&n.defaultErrorMessage(Strings.errors.DATEN_NICHT_GELADEN)}),m.getAll().then(function(b){b.success===!0?a.signatureData.signatures=b.data:n.defaultErrorMessage(Strings.errors.DATEN_NICHT_GELADEN)}),b.getStatisticsByGroup(a.data.groupDetail.activeCampaign).then(function(b){a.calcPieData(b),a.enlargePieGraph(),k(function(){a.pieGraph.data=a.pieGraph.viewData},200)})):n.defaultErrorMessage(Strings.errors.DATEN_NICHT_GELADEN)})},a.initData(),a.recalcAvatars(),a.generatePreview=function(){if(a.signatureData.selectedEmployee)var b=o.generatePreviewComplete(a.signatureData.selectedEmployee);else if(a.signatureData.showDummyData)var b=o.generatePreviewComplete("dummy");else n.defaultErrorMessage(Strings.errors.DATEN_NICHT_GELADEN);a.data.preview=p.trustAsHtml(b)},a.rollOutSignature=function(){m.rolloutGroup(a.groupId).then(function(b){b.success!==!0?n.defaultErrorMessage(Strings.errors.DATEN_NICHT_GELADEN):n.defaultSuccessMessage("Die Erinnerung(en) wurden versendet."),a.initData()})},a.updateSelectedUser=function(){o.getEmployeeAccountData(a.signatureData.selectedEmployee,a.signatureData.fields).then(function(){a.generatePreview()},function(b){a.initData()})},a.updateSelectedSignature=function(b){var d="Möchten Sie dieser Gruppe wirklich eine anderen Signatur zuweisen?";bootbox.confirm({size:"small",message:d,callback:function(d){d===!0?c.setSignature([a.data.groupDetail.id],a.signatureData.selectedSignature).then(function(a){return a.success===!0?e.resolve():e.reject()})["catch"](function(b){a.initData(),n.defaultErrorMessage(Strings.errors.DATEN_NICHT_GELADEN)}).then(function(){i.reload()}):a.$apply(function(){a.signatureData.selectedSignature=b})}})},a.enlargePieGraph=function(){var b=l();"firefox"!==b&&k(function(){var b=$(".piechart-col").height();a.pieGraph.options.height=b+"px",a.pieGraph.data=a.pieGraph.viewData},200)},a.groupTypeChanged=function(){if(0===a.first&&"piegraph"==a.statoptions.currentStatToShow){var b=l();"firefox"!==b&&k(function(){var b=$(".piechart-col").height();a.pieGraph.options.height=b+"px",a.pieGraph.data=a.pieGraph.viewData},200)}a.first=1},a.search={filterText:""},a.searchPotUsers=function(){c.getPotentialMembers(a.data.groupDetail.id,a.search.filterText).then(function(b){a.groupMembers=b,a.recalcAvatars()})};var q=h("orderBy"),r=!1;a.sort=null,a.sortList=function(b){r=!r,a.groupMembers=q(a.groupMembers,b,r)};var s=function(b,c){var d=jQuery.grep(a.data.selectedEmployees,function(a,b){return a.id===c.id});if("add"===b&&0===d.length&&(a.data.selectedEmployees.push(c),a.recalcAvatars()),"remove"===b&&d.length>0)for(var e=0;e<a.data.selectedEmployees.length;e++){var g=a.data.selectedEmployees[e];if(g.id===c.id){a.data.selectedEmployees.splice(e,1);break}}1===a.data.selectedEmployees.length?a.selected.selectedGroupForEmp=a.data.selectedEmployees[0].currentGroup.toString():a.data.selectedEmployees.length>1&&(a.selected.selectedGroupForEmp="selectGroupForEmp"),f.saveEmployeeGroupData(a)};a.updateSelection=function(a,b){var c=a.target,d=c.checked?"add":"remove";s(d,b)},a.getSelectedClass=function(b){return a.isSelected(b)?"selected":""},a.isSelected=function(b){var c=jQuery.grep(a.data.selectedEmployees,function(a,c){return a.id===b.id});return 0!==c.length},a.isSelectedAll=function(){return a.data.selectedEmployees.length===a.groupMembers.length},a.selectAllOuter=function(){for(var b=a.data.selectedEmployees.length===a.groupMembers.length?"remove":"add",c=0;c<a.groupMembers.length;c++){var d=a.groupMembers[c];s(b,d)}},a.selectAll=function(b){for(var c=b.target,d=c.checked?"add":"remove",e=0;e<a.groupMembers.length;e++){var f=a.groupMembers[e];s(d,f)}},a.rowClicked=function(b){for(var c=b.id,d="add",e=0;e<a.data.selectedEmployees.length;e++)if(c===a.data.selectedEmployees[e].id){d="remove";break}"add"===d?(a.data.selectedEmployees=[],a.data.selectedEmployees.push(b),a.recalcAvatars(),f.saveEmployeeGroupData(a),a.selected.selectedGroupForEmp=a.data.selectedEmployees[0].currentGroup.toString()):s(d,b)},a.pieGraph={data:{series:[100]},options:{donut:!0,showLabel:!1,donutWidth:30},viewData:{series:[]},clickData:{series:[]},rateData:{series:[]},accumulatedViews:0,accumulatedClicks:0,accumulatedRate:0,progressClicks:{},progressViews:{},progressRate:[],currentShown:"views",currentSliceToDraw:0,events:{draw:function(b){if("slice"===b.type){var c="";"views"===a.pieGraph.currentShown?a.pieGraph.progressViews.length>a.pieGraph.currentSliceToDraw&&(c=a.pieGraph.progressViews[a.pieGraph.currentSliceToDraw].color,a.pieGraph.currentSliceToDraw+=1):"clicks"===a.pieGraph.currentShown?a.pieGraph.progressClicks.length>a.pieGraph.currentSliceToDraw&&(c=a.pieGraph.progressClicks[a.pieGraph.currentSliceToDraw].color,a.pieGraph.currentSliceToDraw+=1):"rate"===a.pieGraph.currentShown&&a.pieGraph.progressRate.length>a.pieGraph.currentSliceToDraw&&(c=a.pieGraph.progressRate[a.pieGraph.currentSliceToDraw].color,a.pieGraph.currentSliceToDraw+=1),b.element.attr({style:"stroke:"+c+";stroke-width: 30px;"})}}}},a.changeStatSource=function(b){switch(a.pieGraph.currentShown=b,a.pieGraph.currentSliceToDraw=0,b){case"views":a.pieGraph.data=a.pieGraph.viewData;break;case"clicks":a.pieGraph.data=a.pieGraph.clickData;break;case"rate":a.pieGraph.data=a.pieGraph.rateData}},a.calcPieData=function(b){a.pieGraph.accumulatedClicks=0,a.pieGraph.accumulatedViews=0,a.pieGraph.accumulatedRate=0,a.pieGraph.viewData.series=[],a.pieGraph.rateData.series=[],colorcounter=0;var c=!1;if(angular.forEach(b.views,function(d,e){a.pieGraph.accumulatedViews+=d.anzahl,a.pieGraph.viewData.series.push(d.anzahl);var f=Colors.getNext().rgb;d.color=f;var g=(d.title,d.groupId);g===a.data.groupDetail.id&&(c=!0);var h=$.grep(b.clicks,function(a){return a.groupId==g}),i=0;1===h.length&&(i=h[0].anzahl/d.anzahl*100,a.pieGraph.rateData.series.push(i),a.pieGraph.accumulatedRate+=i,a.pieGraph.progressRate.push({title:d.title,anzahl:i,color:f,amountOfMembers:d.amountOfMembers}))}),a.pieGraph.progressRate.sort(function(a,b){return b-a}),a.pieGraph.progressViews=b.views,a.pieGraph.progressViews.sort(function(a,b){return b.anzahl-a.anzahl}),a.pieGraph.viewData.series.sort(function(a,b){return b-a}),a.pieGraph.clickData.series=[],colorcounter=0,angular.forEach(b.clicks,function(b,c){a.pieGraph.accumulatedClicks+=b.anzahl,a.pieGraph.clickData.series.push(b.anzahl),b.color=Colors.getNext().rgb}),a.pieGraph.clickData.series.sort(function(a,b){return b-a}),a.pieGraph.progressClicks=b.clicks,a.pieGraph.progressClicks.sort(function(a,b){return b.anzahl-a.anzahl}),c===!1&&0!=a.pieGraph.progressViews.length){var d={title:a.data.groupDetail.title,anzahl:0,amountOfMembers:a.data.groupDetail.amountOfMembers,groupId:a.data.groupDetail.id};a.pieGraph.progressClicks.push(d),a.pieGraph.progressViews.push(d),a.pieGraph.progressRate.push(d)}},a.toggleButton={value:!1},a.addUserToCurrentGroup=function(b){if(b){var c=[];c.push(b),j.moveToGroup(c,a.data.groupDetail.id).then(function(a){a.success===!0&&(alert("Der Mitarbeiter wurde erfolgreich der in diese Abteilung verschoben"),i.reload())})}else alert("Leider ist ein Problem aufgetreten. Bitte wenden SIe")}}]),a.controller("GroupListCtrl",["$scope","$filter","groupsService","campaignService","StorageFactory","signatureHelperService",function(a,b,c,d,e,f){a.Math=window.Math,a.initData=function(){a.data.selectedGroups=[],a.rightSideContent.showEmployee=!1,a.rightSideContent.showGroup=!0,a.customstyle.maincontentstyle={}},a.filterText="",a.initGroupList=function(a){return a};var g=b("orderBy"),h=!1;a.sortList=function(b){h=!h,a.data.groups=g(a.data.groups,b,h)},a.getSignatureStatus=function(a){if(a.activeSignature){if(a.members&&0!==a.members.length){for(var b=0;b<a.members.length;b++){var c=f.getHasUserLatestSignature(a.members[b],"group",a.members[b].currentSignature);if("latest"!==c)return"outdated"}return"latest"}return"nomembers"}return"nosignature"},a.getCampaignStatus=function(a){if(a.campaignTitle){if(a.members&&0!==a.members.length){for(var b=!0,c=0;c<a.members.length;c++)a.members[c].views&&0!==a.members[c].views||(b=!1);return b}return"nomembers"}return"nocampaign"},a.initData();var i=function(b,c){var d=jQuery.grep(a.data.selectedGroups,function(a,b){return a.id===c.id});if("add"===b&&0===d.length&&(a.data.selectedGroups.push(c),a.recalcAvatars()),"remove"===b&&d.length>0)for(var f=0;f<a.data.selectedGroups.length;f++){var g=a.data.selectedGroups[f];if(g.id===c.id){a.data.selectedGroups.splice(f,1);break}}1===a.data.selectedGroups.length?a.selectedCampaign.selected={title:a.data.selectedGroups[0].campaignTitle,id:a.data.selectedGroups[0].campaignId,color:a.data.selectedGroups[0].campaignColor}:a.data.selectedGroups.length>1&&(a.selectedCampaign.selected={}),e.saveEmployeeGroupData(a)};a.updateSelection=function(a,b){var c=a.target,d=c.checked?"add":"remove";i(d,b)},a.getSelectedClass=function(b){return a.isSelected(b)?"selected":""},a.isSelected=function(b){var c=jQuery.grep(a.data.selectedGroups,function(a,c){return a.id===b.id});return 0!==c.length},a.isSelectedAll=function(){return a.data.selectedGroups.length===a.data.groups.length},a.selectAll=function(b){for(var c=b.target,d=c.checked?"add":"remove",e=0;e<a.data.groups.length;e++){var f=a.data.groups[e];i(d,f)}},a.rowClicked=function(b){for(var c=b.id,d="add",f=0;f<a.data.selectedGroups.length;f++)if(c===a.data.selectedGroups[f].id){d="remove";break}"add"===d?(a.data.selectedGroups=[],a.data.selectedGroups.push(b),a.recalcAvatars(),e.saveEmployeeGroupData(a),a.selectedCampaign.selected={title:a.data.selectedGroups[0].campaignTitle,id:a.data.selectedGroups[0].campaignId,color:a.data.selectedGroups[0].campaignColor}):i(d,b)}}]).filter("propsFilter",function(){return function(a,b){var c=[];return angular.isArray(a)?a.forEach(function(a){for(var d=!1,e=Object.keys(b),f=0;f<e.length;f++){var g=e[f],h=b[g].toLowerCase();if(a[g].toString().toLowerCase().indexOf(h)!==-1){d=!0;break}}d&&c.push(a)}):c=a,c}})}(angular.module("mailtasticApp.groups",["ui.bootstrap"])),function(a){"use strict";a.controller("AccountCtrl",["$scope","$filter","userService","paymentService","$window","$q","alertService",function(a,b,c,d,e,f,g){a.userdata={firstname:"",lastname:"",companyName:"",email:"",password:"",newpassword:"",newpasswordrep:""},a.basketheadline="Aktives Abo",a.basketData={basicprice:15,cumulatedAddUsersPrice:0,priceWithoutMwst:0,discount:0,mwst:0,total:0},a.switchstep=function(b){a.config.currentstep=b},a.config={currentstep:"userdata",hideMonthlyInterval:!1},a.pricedata={perUser:3,amountOfUsers:0,amountOfIncluded:5,discountfaktor:.17},a.isCustomPrice=!1,a.isaacAccountData={email:""},a.resetPassword=function(){a.userdata.email?c.resetPassword(a.userdata.email).then(function(b){b.success===!0?(alert(Strings.passreset.PASS_MAIL_SENT),a.cancel()):3===b.code?alert(Strings.passreset.NO_ACCOUNT):alert(Strings.errors.TECHNISCHER_FEHLER)}):alert(Strings.errors.DATEN_NICHT_GELADEN)},a.plandata={},a.invoices=[],a.invoicedata={gender:"male"},a.paymentdata={payment_method:""},a.subscriptiondata={},a.calcPrice=function(b){var c=a.subscriptiondata.additions[0].quantity,d=0;"DE"===a.invoicedata.country&&(d=.19),a.pricedata.totalUsers=c,c?(c<=a.pricedata.amountOfIncluded?a.pricedata.amountOfUsers=0:a.pricedata.amountOfUsers=c-a.pricedata.amountOfIncluded,b&&(a.pricedata.perUser=b/100),"yearly"===a.subscriptiondata.billing_interval?(a.basketData.basicprice=5*a.pricedata.perUser*12,a.basketData.cumulatedAddUsersPrice=a.pricedata.amountOfUsers*a.pricedata.perUser*12,a.basketData.priceWithoutMwst=a.basketData.basicprice+a.basketData.cumulatedAddUsersPrice,b?a.basketData.discount=0:a.basketData.discount=a.basketData.priceWithoutMwst*a.pricedata.discountfaktor,a.basketData.mwst=(a.basketData.priceWithoutMwst-a.basketData.discount)*d,a.basketData.total=a.basketData.priceWithoutMwst+a.basketData.mwst-a.basketData.discount):"monthly"===a.subscriptiondata.billing_interval&&(a.basketData.basicprice=5*a.pricedata.perUser,a.basketData.cumulatedAddUsersPrice=a.pricedata.amountOfUsers*a.pricedata.perUser,a.basketData.priceWithoutMwst=a.basketData.basicprice+a.basketData.cumulatedAddUsersPrice,a.basketData.discount=0,a.basketData.mwst=a.basketData.priceWithoutMwst*d,a.basketData.total=a.basketData.priceWithoutMwst+a.basketData.mwst)):alert(Strings.errors.DATEN_NICHT_GELADEN)},a.placeOrderInvoice=function(){d.subscribeInvoice(a.invoicedata).then(function(b){b===!0?(alert("Ihr Abonnement war erfolgreich. Sie erhalten in Kürze eine Bestätgigung per Mail. Herzliche Dank und viel Spaß."),a.initData()):(alert(Strings.errors.TECHNISCHER_FEHLER),alert(JSON.stringify(b)))})},a.cancelPlan=function(){alert("Bitte richtigen Sie ihre unterschrieben Kündigung an: NETSTAG GmbH - Accounts - Rheinallee 88 - 55120 Mainz.")},a.initData=function(){d.clear(),c.getAmountOfUsers().then(function(b){b?(b<=a.pricedata.amountOfIncluded?a.pricedata.amountOfUsers=0:a.pricedata.amountOfUsers=b-a.pricedata.amountOfIncluded,a.pricedata.currentAmountOfUsers=b):alert(Strings.errors.DATEN_NICHT_GELADEN)}),c.getAccountData().then(function(b){b&&b.success!==!1?(a.userdata.firstname=b.firstname,a.userdata.lastname=b.lastname,a.userdata.companyName=b.companyName,a.userdata.email=b.email,a.userdata.password="",a.userdata.newpassword="",a.userdata.newpasswordrep="",a.userdata.hasForce=b.forceAllow):alert(Strings.errors.DATEN_NICHT_GELADEN)}),d.getCustomerSubscriptionData().then(function(b){if(b&&b.subscription&&b.billing_data&&b.payment_data&&b.plan){a.subscriptiondata=b.subscription,"yearly"===a.subscriptiondata.billing_interval&&(a.config.hideMonthlyInterval=!0);var c;if(b.plan&&b.plan.additions&&0!==b.plan.additions.length){var d=b.plan.additions[0];d.price&&3===d.price.length&&(d.price[0].cents?c=d.price[0].cents:d.price[1].cents?c=d.price[1].cents/4:d.price[2].cents&&(c=d.price[2].cents/12))}c?(a.pricedata.perUser=c/100,a.isCustomPrice=!0):c=a.pricedata.perUser,a.paymentdata=b.payment_data,a.invoicedata=b.billing_data,a.plandata=b.plan,a.calcPrice(c)}else;}),d.getIsaacAccountData().then(function(b){b&&b.email&&(a.isaacAccountData=b)}),d.getInvoices().then(function(b){b&&b.bills&&b.bills[0]&&(a.invoices=b.bills[0])}),a.config.minheight=e.innerHeight-60-90-30},a.downloadInvoice=function(a){!a.contains("https")&&a.contains("http")&&(a=a.replace("http","https")),a?d.downloadInvoice(a):g.defaultErrorMessage("Beim Download Ihrer Rechnung ist ein Fehler aufgetreten. Bitte wenden Sie sich an support@mailtastic.de bzw. telefonisch an "+Strings.supportdata.supporttelnr)},a.changePaymentInterval=function(){return"monthly"===a.subscriptiondata.billing_interval?void alert("Ihr Abonnement hat sich nicht geändert."):void d.updatePaymentInterval(a.subscriptiondata).then(function(b){b===!0?(alert(Strings.payment.success.CHANGE_BILLING_INFO_SUCCESS),a.initData()):alert(Strings.payment.errors.CHANGE_BILLING_INFO_FAILED)},function(a){alert(Strings.payment.errors.CHANGE_BILLING_INFO_FAILED)})},a.emailchanged=!1,a.emailChanged=function(){a.emailchanged=!0},a.changeIsaacAccountData=function(){var a=f.defer();return a.promise},a.changeInvoiceInfo=function(){a.invoicedata&&(a.invoicedata.title=""),d.updateBillingData(a.invoicedata).then(function(b){b===!0&&(a.emailchanged===!0?d.updateIsaacAccountData(a.isaacAccountData).then(function(b){b===!0?alert(Strings.payment.success.CHANGE_PAYMENT_INTERVAL):alert(Strings.payment.errors.CHANGE_PAYMENT_INTERVAL),a.initData(),a.emailchanged=!1}):alert(Strings.payment.success.CHANGE_PAYMENT_INTERVAL))},function(b){alert(Strings.payment.errors.CHANGE_PAYMENT_INTERVAL),a.initData()})},a.updateAccountData=function(){a.userdata.newpassword!==a.userdata.newpasswordrep?alert("Ihr neues Passwort stimmt nicht überein. Bitte geben Sie 2x das gleiche Passwort ein."):a.userdata.newpassword&&a.userdata.newpassword.length<6?alert("Das neue Passwort muss mindestens 6 Zeichen lang sein."):c.setAccountData(a.userdata).then(function(b){
b.success===!0?g.defaultSuccessMessage("Ihre Daten wurden erfolgreich geändert."):3===b.code?alert("Ihr eingegebenes Passwort war nicht korrekt. Falls Sie Ihr Passwort vergessen haben, können Sie es jederzeit zurücksetzen."):alert(Strings.errors.TECHNISCHER_FEHLER),a.initData()})},a.testAction=function(){d.subscribeInvoice(a.invoicedata).then(function(a){a===!0?alert("SUPER"):alert(JSON.stringify(a))})},a.initData()}]),String.prototype.contains=function(a){return this.indexOf(a)!=-1}}(angular.module("mailtasticApp.account",["ui.bootstrap"])),function(a){"use strict";a.controller("RegisterCtrl",["$scope","$filter","employeeService","browseService","userService","$injector","$rootScope","$timeout","StorageFactory","$state","alertService","$interval","$window",function(a,b,c,d,e,f,g,h,i,j,k,l,m){a.registerdata={companyName:"",email:"",policyChecked:!1,step:1,firstname:"",lastname:"",password:"",passwordrep:"",referer:""},a.refererField={hide:!1},a.passwordsDoNotMatch=!1,a.showAgbAccepMessage=!1,a.emailNotValid=!1,a.sliderimageToShow=2,a.slider={sliderimageToShow:0,intervalTimer:null},a.tries=0,a.changeSliderImage=function(b){a.slider.sliderimageToShow=b,l.cancel(a.slider.intervalTimer)},a.resetFirstFormValidationMessages=function(){a.passwordsDoNotMatch=!1,a.showAgbAccepMessage=!1,a.emailNotValid=!1,a.passwordNotValid=!1},a.fireConversion=function(){m.google_trackConversion({google_conversion_id:873966782,google_conversion_language:"en",google_conversion_format:"3",google_conversion_color:"ffffff",google_conversion_label:"ievPCJGyj2oQvtneoAM",google_remarketing_only:!1})},a.initData=function(){a.slider.intervalTimer=l(function(){a.slider.sliderimageToShow=(a.slider.sliderimageToShow+1)%2},4e3),a.tries=0;var b=j.params.ref;b&&(a.registerdata.referer=b,a.refererField.hide=!0)},a.initData(),a.toSecondStep=function(){a.passwordsDoNotMatch=!1,a.showAgbAccepMessage=!1,a.emailNotValid=!1,a.passwordNotValid=!1,a.registerdata.email?a.registerdata.password.length<6?a.passwordNotValid=!0:a.registerdata.password!==a.registerdata.passwordrep?a.tries>=3?k.defaultErrorMessage(Strings.registration.PASSWORD_REP_NOT_EQU+"<br><br><strong>Sollten Sie Hilfe bei der Registrierung benötigen, zögern Sie bitte nicht uns zu kontaktieren unter "+Strings.supportdata.supporttelnr+" oder unter "+Strings.supportdata.supportemail+"</strong>"):(a.passwordsDoNotMatch=!0,a.tries++):a.registerdata.policyChecked?a.registerdata.step=2:a.showAgbAccepMessage=!0:a.emailNotValid=!0},a.register=function(){a.registerdata.password.length<6?k.defaultErrorMessage(Strings.registration.PASSWORD_TOO_SHORT):a.registerdata.password!==a.registerdata.passwordrep?a.tries>=3?k.defaultErrorMessage(Strings.registration.PASSWORD_REP_NOT_EQU+"<br><br><strong>Sollten Sie Hilfe bei der Registrierung benötigen, zögern Sie bitte nicht uns zu kontaktieren unter "+Strings.supportdata.supporttelnr+" oder unter "+Strings.supportdata.supportemail+"</strong>"):(k.defaultErrorMessage(Strings.registration.PASSWORD_REP_NOT_EQU),a.tries++):(a.registerdata.passwordrep="",g.loadingPromise=e.createNewUser(a.registerdata).then(function(b){if(a.registerdata.passwordrep=a.registerdata.password="",b.success===!0){try{!function(a,b,c,d,e,f,g){a.fbq||(e=a.fbq=function(){e.callMethod?e.callMethod.apply(e,arguments):e.queue.push(arguments)},a._fbq||(a._fbq=e),e.push=e,e.loaded=!0,e.version="2.0",e.queue=[],f=b.createElement(c),f.async=!0,f.src=d,g=b.getElementsByTagName(c)[0],g.parentNode.insertBefore(f,g))}(window,document,"script","//connect.facebook.net/en_US/fbevents.js"),fbq("init","259799124372238"),fbq("track","CompleteRegistration")}catch(c){console.log("FB register pixel failed")}try{a.fireConversion()}catch(c){console.log("Google ads conversion failed"+c)}j.go("registercomplete",{email:a.registerdata.email})}else 9===b.code?alert(Strings.registration.ACCOUNT_ALREADY_CREATED):alert(Strings.errors.TECHNISCHER_FEHLER)}))}}]).controller("RegisterCompleteCtrl",["$scope","$stateParams",function(a,b){a.registerdata={step:3,email:""},a.initData=function(){a.registerdata.email=b.email},a.initData()}])}(angular.module("mailtasticApp.register",["ui.bootstrap"])),function(a){"use strict";a.controller("AssistantCtrl",["$scope","$filter","userService","paymentService","$state","$stateParams","$window","assistantconfigService",function(a,b,c,d,e,f,g,h){a.config={minheight:0,listheight:0},a.step={},a.initData=function(){switch(h.reset(),a.step=h,f.state||(f.state="employee_createnew"),a.step.currenttoshow=f.state,a.step.entryPoint=f.state,a.step.entryPoint){case"employee_createnew":a.step.headline="Mitarbeiter hinzufügen";break;case"employee_import":a.step.headline="Mitarbeiter hinzufügen";break;case"campaign_createnew":a.step.headline="Kampagne erstellen";break;case"group_createnew":a.step.headline="Abteilung erstellen"}a.config.minheight=g.innerHeight-60-90-30,a.config.listheight=a.config.minheight-260,a.config.listheight<200&&(a.config.listheight=250)},a.initData()}]),a.controller("CmpAssistantCtrl",["$scope","alertService","campaignService","groupsService","assistantconfigService","$state","signatureService","$q","employeeService",function(a,b,c,d,e,f,g,h,i){a.showFormAlert=function(){},a.campaigndata={title:"",url:"",image:"",color:"#009fe3"},a.data={selectedCampaigns:[],campaignsToShow:[]},a.checkfile=function(a){a&&0===a.length&&alert("Bitte stellen Sie sicher, dass die Dateigröße unter 1MB liegt und es sich um eine Bilddatei handelt.")},a.$watch("config.currenttoshow",function(b,c){"campaign_createnew"===b?(a.campaigndata.title="",a.campaigndata.image="",a.campaigndata.url="",a.campaigndata.color="#009fe3"):"campaign_results"===b&&a.showResults()}),a.showResults=function(b){b&&b.id&&(a.config.resultdata.campaign=a.campaigndata,a.config.resultdata.campaign.id=b.id),a.config.resultdata.campaign.groupSet?a.config.resultdata.campaign.groupSet&&0===a.config.resultdata.campaign.amountOfMembersGroupsSet?a.config.breadcrumps=["Mitarbeiter hinzufügen"]:a.config.breadcrumps=["Fertig"]:a.config.breadcrumps=["Abteilung zuweisen"],a.config.currenttoshow="campaign_results"},a.addGroup=function(b){"new"===b?a.config.currenttoshow="group_createnew":"existing"===b&&(a.config.currenttoshow="group_selectexisting")},a.addEmployees=function(b){"new"===b?a.config.currenttoshow="employee_createnew":"existing"===b?a.config.currenttoshow="employee_selectexisting":"import"===b&&(a.config.currenttoshow="employee_import")},a.sumUpActiveEmps=function(a){for(var b=0,c=0;c<a.length;c++)b+=a[c].amountOfMembers;return b},a.initData=function(){a.config=e,"campaign_createnew"===a.config.currenttoshow?a.config.breadcrumps=["Kampagne hinzufügen"]:"campaign_selectexisting"===a.config.currenttoshow&&(a.config.breadcrumps=["Kampagne auswählen"]),c.get().then(function(b){a.data.activeCampaigns=[],a.data.inactiveCampaigns=[];for(var c=0;c<b.length;c++)0===b[c].activegroups.length?a.data.inactiveCampaigns.push(b[c]):a.data.activeCampaigns.push(b[c]);a.data.campaigns=a.data.activeCampaigns,a.data.campaigns=a.data.campaigns.concat(a.data.inactiveCampaigns),a.data.campaignsToShow=a.data.campaigns})},a.navigateBack=function(){"campaign_createnew"!==a.config.currenttoshow&&"campaign_selectexisting"!==a.config.currenttoshow||("employee_createnew"===a.config.entryPoint||"employee_import"===a.config.entryPoint?a.config.currenttoshow="employee_results":"campaign_createnew"===a.config.entryPoint&&f.go("base.campaigns.campaignlist"))},a.inviteMembers=function(){a.config.inviteMembers()},a.abort=function(){b.assistantAbortCampaign(a.config.resultdata,function(){f.go("base.campaigns.campaigndetail",{campaignId:a.config.resultdata.campaign.id})},function(){})},a.nextStep=function(b){"employee_createnew"===a.config.entryPoint||"employee_import"===a.config.entryPoint?(a.config.resultdata.campaignCreated=!0,a.config.campaignId=b.id,d.setCampaign([a.config.groupId],a.config.campaignId).then(function(b){a.config.breadcrumpsdone.push("Kampagne zugewiesen"),b.success===!0?a.config.currenttoshow="employee_results":alert("Kampagne zu Abteilung setzen fehlgeschlagen")})):"campaign_createnew"===a.config.entryPoint?(a.config.breadcrumpsdone.push("Kampagne erstellt"),a.showResults(b)):"group_createnew"===a.config.entryPoint&&d.setCampaign([a.config.resultdata.group.id],b.id).then(function(b){a.config.resultdata.campaign=a.campaigndata,a.config.resultdata.group.campaignAdded=!0,a.config.breadcrumpsdone.push("Kampagne zugewiesen"),b.success===!0?a.config.currenttoshow="group_results":alert(Strings.errors.TECHNISCHER_FEHLER)})},a.createCampaign=function(){a.loadingPromise=c.add(a.campaigndata).then(function(b){b.success===!0?a.nextStep(b):alert(Strings.errors.TECHNISCHER_FEHLER)})},a.setCampaignFromList=function(){a.data.selectedCampaigns&&a.data.selectedCampaigns[0]?d.setCampaign([a.config.groupId],a.data.selectedCampaigns[0].id).then(function(b){b.success===!0?"employee_createnew"===a.config.entryPoint||"employee_import"===a.config.entryPoint?(a.config.resultdata.campaignCreated=!0,a.config.breadcrumpsdone.push("Kampagne zugewiesen"),a.config.currenttoshow="employee_results"):"group_createnew"===a.config.entryPoint&&(a.config.resultdata.campaign=a.data.selectedCampaigns[0],a.config.resultdata.group.campaignAdded=!0,a.config.breadcrumpsdone.push("Kampagne zugewiesen"),a.config.currenttoshow="group_results"):alert("Kampagne zu Abteilung setzen fehlgeschlagen")}):alert("Bitte eine Kampagne selektieren")};var j=function(b,c){var d=jQuery.grep(a.data.selectedCampaigns,function(a,b){return a.id===c.id});"add"===b&&0===d.length&&(a.data.selectedCampaigns=[],a.data.selectedCampaigns.push(c)),"remove"===b&&d.length>0&&(a.data.selectedCampaigns=[])};a.updateSelection=function(a,b){var c=a.target,d=c.checked?"add":"remove";j(d,b)},a.isSelected=function(b){var c=jQuery.grep(a.data.selectedCampaigns,function(a,c){return a.id===b.id});return 0!==c.length},a.rowClicked=function(b){for(var c=b.id,d="add",e=0;e<a.data.selectedCampaigns.length;e++)if(c===a.data.selectedCampaigns[e].id){d="remove";break}j(d,b)},a.getSelectedClass=function(b){return a.isSelected(b)?"selected":""},a.initData()}]),a.controller("EmpAssistantCtrl",["$scope","employeeService","paymentService","alertService","assistantconfigService","groupsService","$q","campaignService","XLSXReaderService","$state","$uibModal","signatureService","employeeImportService",function(a,b,c,d,e,f,g,h,i,j,k,l,m){a.data={selectedEmployees:[],employees:[],groups:[]},a.employeedata={email:"",firstname:"",lastname:"",currentGroup:"empty"},a.config={},a.abort=function(){d.assistantAbortEmployeee(a.config.resultdata,function(){j.go("base.employees.employeelist")},function(){})},a.showOtherImportPos=function(){d.otherImportPos()},a.$watch("config.currenttoshow",function(b,c){"employee_createnew"===b||"employee_import"===b||"employee_selectexisting"===b?(a.data.selectedEmployees=[],"employee_selectexisting"===b&&a.loadEmployees().then(function(b){for(var c=a.config.groupId||a.config.resultdata.group.id,d=[],e=0;e<a.data.employees.length;e++)a.data.employees[e].currentGroup!=c&&d.push(a.data.employees[e]);a.data.employees=d}),"employee_createnew"===b&&(a.employeedata.email="",a.employeedata.firstname="",a.employeedata.lastname=""),"employee_createnew"===a.config.entryPoint||"employee_import"===a.config.entryPoint?a.config.resultdata.groupCreated===!0&&a.loadGroups().then(function(){a.employeedata.currentGroup=a.config.groupId.toString()}):"campaign_createnew"===a.config.entryPoint?(a.config.resultdata.group&&a.config.resultdata.group.id&&a.loadGroups().then(function(){a.employeedata.currentGroup=a.config.resultdata.group.id.toString(),a.config.disableGroupArea=!0}),a.config.resultdata.campaign.multipleGroups===!0&&(a.data.groups=a.config.resultdata.campaign.groupsSet,a.config.disableGroupArea=!1,a.disableNewGroupButton=!0),a.config.breadcrumps=["Mitarbeiter hinzufügen"]):"group_createnew"===a.config.entryPoint&&(a.config.resultdata.group&&a.config.resultdata.group.id&&a.loadGroups().then(function(){a.employeedata.currentGroup=a.config.resultdata.group.id.toString(),a.config.disableGroupArea=!0}),a.config.breadcrumps=["Mitarbeiter hinzufügen"])):"employee_results"===b&&a.config.resultdata.campaignCreated===!0&&a.showResults()}),a.sendExampleMail=function(){b.sendInvitationTestmail().then(function(a){a.success===!0?alert("Wir haben Ihnen eine Beispiel-Einladungs-E-Mail gesendet."):alert(Strings.errors.DATEN_NICHT_GELADEN)},function(a){alert(Strings.errors.DATEN_NICHT_GELADEN)})},a.loadGroups=function(){return g(function(b,c){a.config.loadingPromise=f.get().then(function(c){a.data.groups=c,b(!0)})})},a.loadEmployees=function(){return g(function(c,d){a.config.loadingPromise=b.get().then(function(b){a.data.employees=b,a.recalcAvatars(),c(!0)})})},a.navigateBack=function(){"employee_createnew"!==a.config.currenttoshow&&"employee_import"!==a.config.currenttoshow&&"employee_selectexisting"!==a.config.currenttoshow||("employee_createnew"===a.config.entryPoint||"employee_import"===a.config.entryPoint?j.go("base.employees.employeelist"):"campaign_createnew"===a.config.entryPoint?a.config.currenttoshow="campaign_results":"group_createnew"===a.config.entryPoint&&(a.config.currenttoshow="group_results"))},a.createEmployee=function(){function e(d){return!(!$("#createempmodalcheckbox").prop("checked")&&d!==!0)&&("empty"===a.employeedata.currentGroup&&(a.employeedata.currentGroup=null),void(a.config.loadingPromise=b.add(a.employeedata).then(function(b){if(b.success===!1&&1===b.code)alert("Es existiert bereits ein Mitarbeiter mit der angegebenen E-Mail-Adresse. Bitte überprüfen Sie Ihre Eingaben. Ihr Abonnement hat sich nicht geändert.");else if(b.success===!1)alert(Strings.errors.TECHNISCHER_FEHLER);else{if(a.config.resultdata.employee.idsAdded.push(b.id),a.config.resultdata.employee.amountOfImported=1,"campaign_createnew"===a.config.entryPoint){null==a.config.resultdata.campaign.amountOfMembersGroupsSet?a.config.resultdata.campaign.amountOfMembersGroupsSet=0:0===a.config.resultdata.campaign.amountOfMembersGroupsSet&&a.config.breadcrumpsdone.push("Mitarbeiter hinzugefügt"),a.config.resultdata.campaign.amountOfMembersGroupsSet+=1,a.config.resultdata.campaign.newEmpsIncluded=!0,a.config.resultdata.campaign.createdNew=!0;for(var d="",e=0;e<a.data.groups.length;e++)if(a.data.groups[e].id==a.employeedata.currentGroup){d=a.data.groups[e].title;break}a.config.resultdata.campaign.newEmpsIncludedInGroupTitle=d}else"group_createnew"===a.config.entryPoint?(0===a.config.resultdata.group.amountOfEmployeesAdded&&a.config.breadcrumpsdone.push("Mitarbeiter hinzugefügt"),a.config.resultdata.group.amountOfEmployeesAdded+=1):a.config.breadcrumpsdone.push("Mitarbeiter hinzugefügt");c.syncEmployees().then(function(a){}),a.nextStep()}})))}if("empty"===a.employeedata.currentGroup)return void alert("Bitte wählen Sie die Abteilung aus, der der neue Mitarbeiter hinzugefügt werden soll.");for(var f=0;f<a.data.employees.length;f++)if(a.data.employees[f].email===a.employeedata.email)return void alert("Es existiert bereits ein Mitarbeiter mit der angegebenen E-Mail-Adresse. Bitte überprüfen Sie Ihre Eingaben. Ihr Abonnement hat sich nicht geändert.");c.getUserStatus().then(function(b){if(b.success===!1)alert(Strings.errors.DATEN_NICHT_GELADEN);else if(1==b.forceAllow)e(!0);else if(b.hasTestTime===!0)e(!0);else if(b.hasSubscription===!0)b.amountOfFreeMembers>0?e(!0):d.addemployee({amount:1,firstname:a.employeedata.firstname,lastname:a.employeedata.lastname,billing_interval:b.billing_interval,customPrice:b.customPrice},e,function(){});else{k.open({animation:!0,templateUrl:"booking/accountexpiredmodal/modals/unallowed_action_modal.html",controller:"AccountExpiredModalInstanceCtrl",size:"lg",windowClass:"expiredmodalcontainer"})}})},a.inviteMembers=function(){a.config.inviteMembers()},a.nextStep=function(){"employee_createnew"===a.config.entryPoint||"employee_import"===a.config.entryPoint?a.showResults():"campaign_createnew"===a.config.entryPoint?a.config.currenttoshow="campaign_results":"group_createnew"===a.config.entryPoint&&(a.config.currenttoshow="group_results",a.config.resultdata.group.employeesAdded=!0)},a.resultdata={campaign:null,group:null},a.showResults=function(){a.config.currenttoshow="employee_results",a.config.groupId=a.employeedata.currentGroup,f.getOne(a.employeedata.currentGroup).then(function(b){a.config.resultdata.group=b[0],a.config.resultdata.group.activeCampaign&&a.config.resultdata.group.activeSignature?(a.config.breadcrumps=["Mitarbeiter informieren"],h.getOne(a.config.resultdata.group.activeCampaign).then(function(b){a.config.resultdata.campaign=b,a.config.resultdata.signature.signatureAssigned=!0,a.config.resultdata.signature.signatureAssignedTitle=a.config.resultdata.group.signatureTitle})):a.config.resultdata.group.activeCampaign||a.config.resultdata.group.activeSignature?(a.config.resultdata.group.activeCampaign&&h.getOne(a.config.resultdata.group.activeCampaign).then(function(b){a.config.resultdata.campaign=b}),a.config.resultdata.group.activeSignature&&(a.config.resultdata.signature.signatureAssigned=!0,a.config.resultdata.signature.signatureAssignedTitle=a.config.resultdata.group.signatureTitle),a.config.breadcrumps=["Kampagne / Signatur zuweisen"]):a.config.breadcrumps=["Kampagne / Signatur zuweisen"]})},a.initData=function(){var c=g.defer();return a.loadGroups().then(function(){}),a.config=e,a.config.resultdata.employee.idsAdded=[],"employee_createnew"===a.config.currenttoshow?a.config.breadcrumps.push("Mitarbeiter hinzufügen"):"employee_import"===a.config.currenttoshow&&a.config.breadcrumps.push("Mitarbeiter importieren"),b.get().then(function(b){a.data.employees=b,a.recalcAvatars()}),c.promise},a.createGroup=function(){a.config.currenttoshow="group_createnew"},a.addAnotherEmployee=function(c){a.config.resultdata.groupCreated=!1,b.get().then(function(b){a.data.employees=b,a.recalcAvatars()}),a.employeedata.email="",a.employeedata.firstname="",a.employeedata.lastname="",a.config.breadcrumpsdone=[],"new"===c?(a.config.currenttoshow="employee_createnew",a.config.breadcrumps=["Mitarbeiter hinzufügen"]):(a.config.currenttoshow="employee_import",a.config.breadcrumps=["Mitarbeiter importieren"])},a.setCampaign=function(b){a.config.currenttoshow="campaign_createnew","new"===b?a.config.currenttoshow="campaign_createnew":"existing"===b&&(a.config.currenttoshow="campaign_selectexisting")},a.setSignature=function(b){a.config.currenttoshow="signature_selectexisting"},a.fileChanged=function(b){"empty"===a.employeedata.currentGroup?(d.defaultErrorMessage("Bitte wählen Sie die Abteilung aus, der die neuen Mitarbeiter hinzugefügt werden sollen."),document.getElementById("employeeimport").value=null):m.fileChanged(b).then(function(){return m.checkImportData(a.config.loadingPromise)}).then(function(){return m.importUsers(a.employeedata.currentGroup,a.config,a.loadingPromise)}).then(function(){a.processAfterImport()})["catch"](function(a){})},a.processAfterImport=function(){if("campaign_createnew"===a.config.entryPoint){null==a.config.resultdata.campaign.amountOfMembersGroupsSet?a.config.resultdata.campaign.amountOfMembersGroupsSet=0:0===a.config.resultdata.campaign.amountOfMembersGroupsSet&&a.config.breadcrumpsdone.push("Mitarbeiter eingeladen"),a.config.resultdata.campaign.amountOfMembersGroupsSet+=amountOfImported,a.config.resultdata.campaign.newEmpsIncluded=!0;for(var b="",c=0;c<a.data.groups.length;c++)if(a.data.groups[c].id==a.employeedata.currentGroup){b=a.data.groups[c].title;break}a.config.resultdata.campaign.newEmpsIncludedInGroupTitle=b}else"group_createnew"===a.config.entryPoint?(0===a.config.resultdata.group.amountOfEmployeesAdded&&a.config.breadcrumpsdone.push("Mitarbeiter eingeladen"),a.config.resultdata.group.amountOfEmployeesAdded+=amountOfImported):a.config.breadcrumpsdone.push("Mitarbeiter eingeladen");a.nextStep()},a.importUsers=function(){m.importUsers(a.employeedata.currentGroup,a.config,a.loadingPromise).then(function(b){a.processAfterImport()})["catch"](function(a){})},a.setEmployeesFromList=function(){if(a.data.selectedEmployees&&a.data.selectedEmployees[0])if("empty"===a.employeedata.currentGroup)d.defaultErrorMessage("Bitte wählen Sie die Abteilung aus, denen die Mitarbeiter hinzugefügt werden sollen.");else{for(var c=[],e=0;e<a.data.selectedEmployees.length;e++)c.push(a.data.selectedEmployees[e].id);var f=null;f=a.config.resultdata.group.id||a.employeedata.currentGroup,b.moveToGroup(c,f).then(function(b){if(b.success===!0)if("employee_createnew"===a.config.entryPoint||"employee_import"===a.config.entryPoint);else if("campaign_createnew"===a.config.entryPoint){null==a.config.resultdata.campaign.amountOfMembersGroupsSet?a.config.resultdata.campaign.amountOfMembersGroupsSet=0:0===a.config.resultdata.campaign.amountOfMembersGroupsSet&&a.config.breadcrumpsdone.push("Mitarbeiter eingeladen"),a.config.resultdata.campaign.amountOfMembersGroupsSet+=c.length,a.config.resultdata.campaign.newEmpsIncluded=!0;for(var d="",e=0;e<a.data.groups.length;e++)if(a.data.groups[e].id==a.employeedata.currentGroup){d=a.data.groups[e].title;break}a.config.resultdata.campaign.newEmpsIncludedInGroupTitle=d,a.config.currenttoshow="campaign_results"}else"group_createnew"===a.config.entryPoint&&(0===a.config.resultdata.group.amountOfEmployeesAdded&&a.config.breadcrumpsdone.push("Mitarbeiter hinzugefügt"),a.config.resultdata.group.amountOfEmployeesAdded+=c.length,a.config.currenttoshow="group_results");else alert("Kampagne zu Gruppe setzen fehlgeschlagen")})}else alert("Bitte einen Mitarbeiter selektieren")},a.isSelectedAll=function(){return a.data.selectedEmployees.length===a.data.employees.length},a.selectAll=function(b){for(var c=b.target,d=c.checked?"add":"remove",e=0;e<a.data.employees.length;e++){var f=a.data.employees[e];n(d,f)}},a.selectAllOuter=function(){for(var b=a.data.selectedEmployees.length===a.data.employees.length?"remove":"add",c=0;c<a.data.employees.length;c++){var d=a.data.employees[c];n(b,d)}},a.recalcAvatars=function(){$(document).trigger("regenerateAvatars")};var n=function(b,c){var d=jQuery.grep(a.data.selectedEmployees,function(a,b){return a.id===c.id});if("add"===b&&0===d.length&&a.data.selectedEmployees.push(c),"remove"===b&&d.length>0)for(var e=0;e<a.data.selectedEmployees.length;e++){var f=a.data.selectedEmployees[e];if(f.id===c.id){a.data.selectedEmployees.splice(e,1);break}}};a.updateSelection=function(a,b){var c=a.target,d=c.checked?"add":"remove";n(d,b)},a.isSelected=function(b){var c=jQuery.grep(a.data.selectedEmployees,function(a,c){return a.id===b.id});return 0!==c.length},a.rowClicked=function(b){for(var c=b.id,d="add",e=0;e<a.data.selectedEmployees.length;e++)if(c===a.data.selectedEmployees[e].id){d="remove";break}n(d,b)},a.getSelectedClass=function(b){return a.isSelected(b)?"selected":""},a.initData()}]),a.controller("GroupAssistantCtrl",["$scope","groupsService","alertService","assistantconfigService","$state","employeeService",function(a,b,c,d,e,f){a.showFormAlert=function(){},a.data={selectedGroups:[],groups:[]},a.config={},a.groupdata={title:"",activeCampaign:null},a.members=[],a.$watch("config.currenttoshow",function(b,c){"group_results"===b&&(a.config.resultdata.group.amountOfEmployeesAdded&&0!==!a.config.resultdata.group.amountOfEmployeesAdded?a.config.resultdata.group.campaignAdded&&a.config.resultdata.group.campaignAdded!==!1?a.config.resultdata.rolloutDone?a.config.breadcrumps=["Fertig"]:a.config.breadcrumps=["Mitarbeiter benachrichtigen"]:a.config.breadcrumps=["Kampagne / Signatur zuweisen"]:a.config.breadcrumps=["Mitarbeiter hinzufügen"])}),a.loadGroups=function(){a.modaloptions.campaignId&&"existing"===a.modaloptions.currentStep&&b.get().then(function(b){a.data.groups=[];for(var c=0;c<b.length;c++)b[c].activeCampaign!==a.modaloptions.campaignId&&a.data.groups.push(b[c])})},a.inviteMembers=function(){a.config.inviteMembers()},a.navigateBack=function(){"group_createnew"!==a.config.currenttoshow&&"group_selectexisting"!==a.config.currenttoshow||("employee_createnew"===a.config.entryPoint||"employee_import"===a.config.entryPoint?a.config.currenttoshow=a.config.entryPoint:"campaign_createnew"===a.config.entryPoint?a.config.currenttoshow="campaign_results":"group_createnew"===a.config.currenttoshow&&e.go("base.employees.grouplist"))},a.addEmployees=function(b){"new"===b?a.config.currenttoshow="employee_createnew":"existing"===b?a.config.currenttoshow="employee_selectexisting":"import"===b&&(a.config.currenttoshow="employee_import")},a.addCampaign=function(b){"new"===b?a.config.currenttoshow="campaign_createnew":"existing"===b?a.config.currenttoshow="campaign_selectexisting":"import"===b&&(a.config.currenttoshow="campaign_import")},a.abort=function(){c.assistantAbortGroup(a.config.resultdata,function(){e.go("base.employees.groupdetails",{groupId:a.config.resultdata.group.id})},function(){})},a.setSignature=function(b){a.config.currenttoshow="signature_selectexisting"},a.createGroup=function(){a.loadingPromise=b.add(a.groupdata).then(function(c){c.success===!0?(a.config.disableGroupArea=!0,"employee_createnew"===a.config.entryPoint||"employee_import"===a.config.entryPoint?(a.config.resultdata.groupCreated=!0,a.config.resultdata.groupTitle=a.groupdata.title,a.config.currenttoshow=a.config.entryPoint,a.config.groupId=c.groupId,a.config.breadcrumpsdone.push("Abteilung erstellt")):"campaign_createnew"===a.config.entryPoint?b.setCampaign([c.groupId],a.config.resultdata.campaign.id).then(function(b){b.success===!0?"campaign_createnew"===a.config.entryPoint&&(a.config.breadcrumpsdone.push("Abteilung zugewiesen"),a.config.resultdata.campaign.groupSet=!0,a.config.resultdata.campaign.amountOfGroupsSet=1,a.config.resultdata.campaign.amountOfMembersGroupsSet=0,a.config.resultdata.group.title=a.groupdata.title,a.config.resultdata.group.id=c.groupId,a.config.currenttoshow="campaign_results",a.config.resultdata.campaign.groupTitlesAdded=a.config.resultdata.group.title):alert("Kampagne zu Abteilung setzen fehlgeschlagen")}):"group_createnew"===a.config.entryPoint&&(a.config.resultdata.group.title=a.groupdata.title,a.config.resultdata.group.id=c.groupId,a.config.resultdata.group.employeesAdded=!1,a.config.resultdata.group.amountOfEmployeesAdded=0,a.config.resultdata.group.campaignAdded=!1,a.config.breadcrumpsdone.push("Abteilung erstellt"),a.config.currenttoshow="group_results",a.config.groupId=c.groupId)):alert(Strings.errors.TECHNISCHER_FEHLER)})},a.initData=function(){a.config=d,"group_createnew"===a.config.currenttoshow?a.config.breadcrumps=["Abteilung erstellen"]:"group_selectexisting"===a.config.currenttoshow&&(a.config.breadcrumps=["Abteilung auswählen"]),b.get().then(function(b){a.data.groups=b})},a.setCampaignForGroupFromList=function(){if(a.data.selectedGroups&&a.data.selectedGroups[0])if(a.config.resultdata.campaign&&a.config.resultdata.campaign.id){for(var c=[],d=0,e="",f=0;f<a.data.selectedGroups.length;f++)c.push(a.data.selectedGroups[f].id),d+=a.data.selectedGroups[f].amountOfMembers,e+=a.data.selectedGroups[f].title,f!==a.data.selectedGroups.length-1&&(e+=a.data.selectedGroups[f].title+=", ");b.setCampaign(c,a.config.resultdata.campaign.id).then(function(b){b.success===!0?"campaign_createnew"===a.config.entryPoint&&(a.config.breadcrumpsdone.push("Abteilung zugewiesen"),a.config.resultdata.campaign.groupSet=!0,a.config.resultdata.campaign.multipleGroups=!0,a.config.resultdata.campaign.groupsSet=a.data.selectedGroups,a.config.resultdata.campaign.amountOfGroupsSet=c.length,a.config.resultdata.campaign.amountOfMembersGroupsSet=d,a.config.currenttoshow="campaign_results",a.config.resultdata.campaign.groupTitlesAdded=e):alert("Kampagne zu Abteilung setzen fehlgeschlagen")})}else alert(Strings.errors.DATEN_NICHT_GELADEN);else alert("Bitte eine Abteilung selektieren")},a.isSelectedAll=function(){return a.data.selectedGroups.length===a.data.groups.length},a.selectAll=function(b){for(var c=b.target,d=c.checked?"add":"remove",e=0;e<a.data.groups.length;e++){var f=a.data.groups[e];g(d,f)}},a.selectAllOuter=function(){for(var b=a.data.selectedGroups.length===a.data.groups.length?"remove":"add",c=0;c<a.data.groups.length;c++){var d=a.data.groups[c];g(b,d)}};var g=function(b,c){var d=jQuery.grep(a.data.selectedGroups,function(a,b){return a.id===c.id});if("add"===b&&0===d.length&&a.data.selectedGroups.push(c),"remove"===b&&d.length>0)for(var e=0;e<a.data.selectedGroups.length;e++){var f=a.data.selectedGroups[e];if(f.id===c.id){a.data.selectedGroups.splice(e,1);break}}};a.updateSelection=function(a,b){var c=a.target,d=c.checked?"add":"remove";g(d,b)},a.isSelected=function(b){var c=jQuery.grep(a.data.selectedGroups,function(a,c){return a.id===b.id});return 0!==c.length},a.rowClicked=function(b){for(var c=b.id,d="add",e=0;e<a.data.selectedGroups.length;e++)if(c===a.data.selectedGroups[e].id){d="remove";break}g(d,b)},a.getSelectedClass=function(b){return a.isSelected(b)?"selected":""},a.initData()}]),a.controller("SignatureAssistantCtrl",["$scope","alertService","assistantconfigService","$state","listHelperService","signatureService","groupsService",function(a,b,c,d,e,f,g){a.data={selectedSignatures:[],signatures:[]},a.list=e,a.$watch("config.currenttoshow",function(b,c){"signature_selectexisting"===b&&a.initData()}),a.initData=function(){a.config=c,f.getAll().then(function(c){c.success===!0?(e.selected=[],a.data.signatures=c.data,e.selectionType="single",a.data.selectedSignatures=e.selected,e.all=a.data.signatures):b.defaultErrorMessage(Strings.errors.DATEN_NICHT_GELADEN)})},a.navigateBack=function(){"employee_createnew"===a.config.entryPoint||"employee_import"===a.config.entryPoint?a.config.currenttoshow="employee_results":"campaign_createnew"===a.config.entryPoint&&d.go("base.campaigns.campaignlist")},a.abort=function(){b.assistantAbortCampaign(a.config.resultdata,function(){d.go("base.campaigns.campaigndetail",{campaignId:a.config.resultdata.campaign.id})},function(){})},a.nextStep=function(b){"employee_createnew"===a.config.entryPoint||"employee_import"===a.config.entryPoint?(a.config.resultdata.campaignCreated=!0,a.config.campaignId=b.id,g.setCampaign([a.config.groupId],a.config.campaignId).then(function(b){a.config.breadcrumpsdone.push("Kampagne zugewiesen"),b.success===!0?a.config.currenttoshow="employee_results":alert("Kampagne zu Gruppe setzen fehlgeschlagen")})):"campaign_createnew"===a.config.entryPoint?(a.config.breadcrumpsdone.push("Kampagne erstellt"),a.showResults(b)):"group_createnew"===a.config.entryPoint&&g.setCampaign([a.config.resultdata.group.id],b.id).then(function(b){a.config.resultdata.campaign=a.campaigndata,a.config.resultdata.group.campaignAdded=!0,a.config.breadcrumpsdone.push("Kampagne zugewiesen"),b.success===!0?a.config.currenttoshow="group_results":alert(Strings.errors.TECHNISCHER_FEHLER)})},a.setSignatureFromList=function(){a.data.selectedSignatures&&a.data.selectedSignatures[0]?g.setSignature([a.config.groupId],a.data.selectedSignatures[0].id).then(function(b){b.success===!0?(a.config.resultdata.signature.signatureAssigned=!0,a.config.resultdata.signature.signatureAssignedTitle=a.data.selectedSignatures[0].title,a.config.breadcrumpsdone.push("Signatur zugewiesen"),"employee_createnew"===a.config.entryPoint||"employee_import"===a.config.entryPoint?a.config.currenttoshow="employee_results":"group_createnew"===a.config.entryPoint&&(a.config.currenttoshow="group_results")):alert("Kampagne zu Gruppe setzen fehlgeschlagen")}):alert("Bitte eine Signatur selektieren")},a.initData()}])}(angular.module("mailtasticApp.assistant",[])),function(a){"use strict";a.controller("BookingCtrl",["$scope","$filter","userService","paymentService","alertService","$state","intercomService","$stateParams",function(a,b,c,d,e,f,g,h){a.config={currentstep:"product"},a.basketheadline="Warenkorb",a.userdata={firstname:"",lastname:"",companyName:"",email:"",password:"",newpassword:"",newpasswordrep:""},a.pricedata={perUser:3,amountOfUsers:0,amountOfIncluded:5,discount:0,totalUsers:0},a.adminMode=!1,a.customPlanData={plan:"",
addition:""},a.loadingPromise="",a.invoices=[],a.invoicedata={gender:"male",country:"DE"},a.paymentdata={payment_method:""},a.getPriceData=function(){d.getPriceData(a.customPlanData.plan,a.customPlanData.addition).then(function(b){a.calcPrice(b)})["catch"](function(a){e.defaultErrorMessage(Strings.errors.DATEN_NICHT_GELADEN)})},a.subscriptiondata={billing_interval:"yearly",country:a.invoicedata.country},a.placeOrderInvoice=function(){return!a.pricedata.totalUsers||a.pricedata.totalUsers<a.minAmountWhichIsBookable?void e.defaultErrorMessage("Sie haben bereits mehr Mitarbeiter in Mailtastic integriert oder befinden sich unterhalb der Mindestgrenze von 5 Mitarbeitern. Bitte passen Sie die gewünschte Anzahl an Lizenzen an."):(a.invoicedata.email=a.invoicedata.email||a.userdata.email,a.invoicedata.billing_interval=a.subscriptiondata.billing_interval,a.customPlanData.plan&&a.customPlanData.addition&&(a.invoicedata.customPlanData=a.customPlanData),void(a.loadingPromise=d.subscribeInvoice(a.invoicedata,a.pricedata.totalUsers).then(function(a){a===!0?(e.subscriptionCompleted(function(){f.go("base.dashboard")}),g.bookedMailtasticStarter()):(alert(Strings.errors.TECHNISCHER_FEHLER),alert(JSON.stringify(a)))})))},c.getAccountData().then(function(b){b&&b.success!==!1?(a.userdata.firstname=b.firstname,a.userdata.lastname=b.lastname,a.userdata.companyName=b.companyName,a.userdata.email=b.email,a.userdata.password="",a.userdata.newpassword="",a.userdata.newpasswordrep="",a.invoicedata.company=b.companyName):alert(Strings.errors.DATEN_NICHT_GELADEN)}),a.minAmountWhichIsBookable=0,a.basketData={basicprice:15,cumulatedAddUsersPrice:0,priceWithoutMwst:0,discount:0,mwst:0,total:0,discountfaktor:.17},a.calcPrice=function(b){var c=0;"DE"===a.invoicedata.country&&(c=.19),b&&(a.pricedata.perUser=b/100);var d=a.pricedata.totalUsers>=5?a.pricedata.totalUsers-5:5;a.pricedata.amountOfUsers=d,"yearly"===a.subscriptiondata.billing_interval?(a.basketData.basicprice=5*a.pricedata.perUser*12,a.basketData.cumulatedAddUsersPrice=d*a.pricedata.perUser*12,a.basketData.priceWithoutMwst=a.basketData.basicprice+a.basketData.cumulatedAddUsersPrice,b?a.basketData.discount=0:a.basketData.discount=a.basketData.priceWithoutMwst*a.basketData.discountfaktor,a.basketData.mwst=(a.basketData.priceWithoutMwst-a.basketData.discount)*c,a.basketData.total=a.basketData.priceWithoutMwst+a.basketData.mwst-a.basketData.discount):"monthly"===a.subscriptiondata.billing_interval&&(a.basketData.basicprice=5*a.pricedata.perUser,a.basketData.cumulatedAddUsersPrice=d*a.pricedata.perUser,a.basketData.priceWithoutMwst=a.basketData.basicprice+a.basketData.cumulatedAddUsersPrice,a.basketData.discount=0,a.basketData.mwst=a.basketData.priceWithoutMwst*c,a.basketData.total=a.basketData.priceWithoutMwst+a.basketData.mwst)},a.initData=function(){h.mode&&"admin"===h.mode&&(a.adminMode=!0),c.getAmountOfUsers().then(function(b){b?(a.pricedata.totalUsers=b>=15?b:15,b<=a.pricedata.amountOfIncluded?a.pricedata.amountOfUsers=0:a.pricedata.amountOfUsers=b-a.pricedata.amountOfIncluded,a.minAmountWhichIsBookable=b>=5?b:5,a.calcPrice()):alert(Strings.errors.DATEN_NICHT_GELADEN)})},a.changeStep=function(b){return"product"===a.config.currentstep&&"details"===b&&(!a.pricedata.totalUsers||a.pricedata.totalUsers<a.minAmountWhichIsBookable)&&(!a.pricedata.totalUsers||a.pricedata.totalUsers<a.minAmountWhichIsBookable)?void e.defaultErrorMessage("Sie haben bereits mehr Mitarbeiter in Mailtastic integriert oder befinden sich unterhalb der Mindestgrenze von 5 Mitarbeitern. Bitte passen Sie die gewünschte Anzahl an Lizenzen an."):void(a.config.currentstep=b)},a.initData()}]).filter("checkDuration",function(){return function(a,b){return"yearly"===b.subscriptiondata.billing_interval?12*a:a}})}(angular.module("mailtasticApp.booking",[])),function(a){"use strict";angular.module("mailtasticApp.signature").controller("SignatureDesignerCtrl",["$scope","userService","alertService","$state","$sce","$timeout","$uibModal","$http","$q","employeeService","signatureService","signatureHelperService",function(a,b,c,d,e,f,g,h,i,j,k,l){var m="https://www.mailtastic.de/img/signatures/defaultimg/Beispiel-Banner.png";a.rightbar={activeTab:"company",campaignImgLink:""},a.data={ckeEditorModel:"",preview:"",selectedEmployee:{},employees:[],signatureTitle:"",showEmployeeDataShownAsTagInfo:!1,changesMade:!1,ckeInitFinished:!1},a.loadingPromise="",a.ckEditorOptions={language:"de",allowedContent:!0,entities:!1},a.$watch("data.ckeEditorModel",function(b,c){a.data.ckeInitFinished&&(a.data.changesMade=!0)}),a.fields="",a.updateSelectedUser=function(){l.getEmployeeAccountData(a.data.selectedEmployee,a.fields).then(function(){for(var b=0;b<a.data.employees.length;b++)a.data.employees[b].id===a.data.selectedEmployee&&(a.data.employees[b].campaignImage?a.rightbar.campaignImgLink=a.data.employees[b].campaignImage:a.rightbar.campaignImgLink=m);a.generatePreview()},function(){c.defaultErrorMessage(Strings.errors.DATEN_NICHT_GELADEN)})},a.getIsOneElementMarkedAsMissing=function(){if(!(a.fields.company&&a.fields.company.groups&&a.fields.employee&&a.fields.employee.groups))return!1;for(var b=[a.fields.company.groups,a.fields.employee.groups],c=0;c<b.length;c++)for(var d=b[c],e=0;e<d.length;e++)for(var f=0;f<d[e].entries.length;f++)if(d[e].entries[f].markedAsMissing&&d[e].entries[f].locked===!0)return!0;return!1},a.counter=0,a.generatePreview=function(){function b(){l.clearMarkedAsMissing(a.fields);var b=a.data.ckeEditorModel;l.dataManager.signatureTpl=b,l.dataManager.signatureData=l.prepareDataForBackend("signatureData",a.fields);var c=l.generatePreviewComplete(a.data.selectedEmployee);c.contains("{{")&&c.contains("}}")?a.data.showEmployeeDataShownAsTagInfo=!0:a.data.showEmployeeDataShownAsTagInfo=!1,a.data.preview=e.trustAsHtml(c);$.parseHTML(c)}b()},a.insertPlaceholder=function(b){for(var c in CKEDITOR.instances)CKEDITOR.instances[c].insertText("{{"+b+"}}");f(a.generatePreview,500)},a.initData=function(){function b(){var b=i.defer();return j.get().then(function(c){c&&Array.isArray(c)&&c.length>0?(a.data.employees=c,a.data.selectedEmployee=a.data.employees[0].id,a.data.employees[0].campaignImage?a.rightbar.campaignImgLink=a.data.employees[0].campaignImage:a.rightbar.campaignImgLink=m,b.resolve()):b.reject("no employees could be loaded")},function(){b.reject()}),b.promise}return l.dataManager&&l.dataManager.campaignIsUsed&&(l.dataManager.campaignIsUsed=!1),d.params.signatureId?(a.data.signatureId=d.params.signatureId,void("create"===a.data.signatureId?b().then(function(){return l.loadJsonFieldStructure().then(function(b){a.fields=b,l.dataManager.fields=b,a.fields=l.dataManager.fields})}).then(function(){return i.all([l.getEmployeeAccountData(a.data.selectedEmployee,a.fields),l.getCompanyAccountData(a.fields)])})["catch"](function(a){c.defaultErrorMessage(Strings.errors.DATEN_NICHT_GELADEN)}):b().then(function(){return l.getRelevantDataForSignature(a.data.selectedEmployee,a.data.signatureId)}).then(function(b){a.data.signatureTitle=b.signatureTitle,a.data.ckeEditorModel=b.signatureTpl,a.fields=b.fields}).then(function(){return f(function(){a.generatePreview(),a.data.ckeInitFinished=!0},1e3)})["catch"](function(a){"correctlyEnded"!==a&&c.defaultErrorMessage(Strings.errors.DATEN_NICHT_GELADEN)}))):void c.defaultErrorMessage(Strings.errors.DATEN_NICHT_GELADEN)},a.initData(),a.openTemplateModal=function(){var b="signature/designer/modal/templategallery/tpl_gallery_modal_main.html",d=g.open({animation:!0,templateUrl:b,controller:"SigTemplatesModalCtrl",size:"lg",windowClass:"sigtemplatemodal"});d.result.then(function(b){b?(a.data.ckeEditorModel=b,f(a.generatePreview,500)):c.defaultErrorMessage(Strings.errors.TECHNISCHER_FEHLER)},function(){})},a.editValue=function(b,c){var d=null;switch(b.type){case"singlevalue":d="signature/designer/modal/dataedit/singlevalue.html";break;case"image":d="signature/designer/modal/dataedit/imagevalue.html";break;case"link":d="signature/designer/modal/dataedit/linkvalue.html"}var e=g.open({animation:!0,templateUrl:d,controller:"SignatureDataModalCtrl",size:"md",resolve:{tagObject:b,additionalLabel:{value:c}},windowClass:"signature_value_edit_modal"});e.result.then(function(b){Array.isArray(b)?"everythingchanged"===b.result?(a.saveFieldValue(b.data,c),a.data.changesMade=!0):"onlydimensionchanged"===b.result?(a.generatePreview(),a.data.changesMade=!0):"everythingbutdimension"===b.result?a.saveFieldValue(b.data,c):"onlycolorchanged"===b.result?(a.generatePreview(),a.data.changesMade=!0):"everythingbutcolor"===b.result&&a.saveFieldValue(b.data,c):a.saveFieldValue(b,c)},function(){})},a.saveFieldValue=function(d,e){"Mitarbeiter"===e?j.setEmployeeInfoSingle(a.data.selectedEmployee,d.tag,d.type,d.value).then(function(b){if(b.success===!0){d.value=b.savedObject;var e=a.replaceFieldValue(d);e!==!0?alert(Strings.errors.TECHNISCHER_FEHLER):(l.dataManager.employeeData[d.tag]=d.value,a.generatePreview())}else c.defaultErrorMessage(Strings.errors.DATEN_NICHT_GELADEN)})["catch"](function(a){c.defaultErrorMessage("Bei der Verarbeitung Ihres Bildes ist leider ein Fehler aufgetreten. Bitte versuchen Sie es erneut. Sollten weiterhin Probleme auftreten, wenden Sie sich bitte an den Support unter "+Strings.supportdata.supportemail+" bzw. "+Strings.supportdata.supporttelnr)}):"Unternehmen"===e&&b.setCompanyInfoSingle(null,d.tag,d.type,d.value).then(function(b){if(b.success===!0){d.value=b.savedObject;var e=a.replaceFieldValue(d);e!==!0?alert(Strings.errors.TECHNISCHER_FEHLER):(l.dataManager.companyData[d.tag]=d.value,a.generatePreview())}else c.defaultErrorMessage(Strings.errors.DATEN_NICHT_GELADEN)})["catch"](function(a){c.defaultErrorMessage("Bei der Verarbeitung Ihres Bildes ist leider ein Fehler aufgetreten. Bitte versuchen Sie es erneut. Sollten weiterhin Probleme auftreten, wenden Sie sich bitte an den Support unter "+Strings.supportdata.supportemail+" bzw. "+Strings.supportdata.supporttelnr)})},a.getCampaignButtonClass=function(){var a=l.dataManager.campaignIsUsed;return a===!0?"btnblau":"btngrau"},a.getPlaceholderButtonClass=function(a){return(a.value&&"object"!=typeof a.value||a.value&&"object"==typeof a.value&&a.value.url)&&!a.markedAsMissing&&a.markedAsUsed?"btnblau":!a.locked&&a.markedAsUsed?"btngreen":a.markedAsMissing===!0&&a.locked?"btnrot":"btngrau"},a.replaceFieldValue=function(b){for(var c=!1,d=[a.fields.company.groups,a.fields.employee.groups],e=0;e<d.length;e++)for(var f=d[e],g=0;g<f.length;g++)for(var h=0;h<f[g].entries.length;h++)if(f[g].entries[h].tag===b.tag)return c=!0,f[g].entries[h]=b,c;return c},a.saveSignatureWithoutRollout=function(){a.generatePreview();if("create"===d.params.signatureId)return void c.defaultErrorMessage(Strings.errors.DATEN_NICHT_GELADEN);var b={};if(b.signatureTpl=a.data.ckeEditorModel,b.signatureData=l.prepareDataForBackend("signatureData",a.fields),b.title=a.data.signatureTitle,b.title)if(b.signatureTpl)if(b.signatureTpl&&b.signatureData&&b.title){if(l.generatePreviewComplete(b.signatureTpl,l.dataManager.fields,a.data.selectedEmployee),!l.dataManager.campaignIsUsed)return void c.defaultErrorMessage('Bitte fügen Sie den Kampagnen-Banner in Ihre Signatur ein. Diesen finden Sie auf der rechten Seite im Reiter "Unternehmen" an erster Position.');b.id=d.params.signatureId,k.update(b).then(function(a){a&&a.success===!0?(c.defaultSuccessMessage("Die Signatur wurde erfolgreich gespeichert."),d.go("base.signaturedetails",{signatureId:d.params.signatureId})):alert(Strings.errors.DATEN_NICHT_GELADEN)})["catch"](function(){alert(Strings.errors.TECHNISCHER_FEHLER)})}else alert(Strings.errors.TECHNISCHER_FEHLER);else c.defaultErrorMessage("Bitte füllen Sie die Signatur mit Inhalt, um sie zu speichern.");else c.defaultErrorMessage("Bitte geben Sie einen Titel für die Signatur ein.")},a.saveSignatureWithRollout=function(){a.generatePreview();var b=null;if("create"===d.params.signatureId)b="create";else{if("string"!=typeof d.params.signatureId)return void c.defaultErrorMessage(Strings.errors.DATEN_NICHT_GELADEN);b="edit"}var e={};if(e.signatureTpl=a.data.ckeEditorModel,e.signatureData=l.prepareDataForBackend("signatureData",a.fields),e.title=a.data.signatureTitle,e.title)if(e.signatureTpl)if(e.signatureTpl&&e.signatureData&&e.title){if(l.generatePreviewComplete(e.signatureTpl,l.dataManager.fields,a.data.selectedEmployee),!l.dataManager.campaignIsUsed)return void c.defaultErrorMessage('Bitte fügen Sie den Kampagnen-Banner in Ihre Signatur ein. Diesen finden Sie auf der rechten Seite im Reiter "Unternehmen" an erster Position.');"create"===b?k.create(e).then(function(a){a&&a.success===!0?d.go("base.signaturerollout",{signatureId:a.signatureId,mode:"create",signatureTitle:e.title}):c.defaultErrorMessage(Strings.errors.DATEN_NICHT_GELADEN)})["catch"](function(){alert(Strings.errors.TECHNISCHER_FEHLER)}):"edit"===b&&(e.id=d.params.signatureId,k.update(e).then(function(a){a&&a.success===!0?d.go("base.signaturerollout",{signatureId:d.params.signatureId,mode:"update",signatureTitle:e.title}):alert(Strings.errors.DATEN_NICHT_GELADEN)})["catch"](function(){alert(Strings.errors.TECHNISCHER_FEHLER)}))}else alert(Strings.errors.TECHNISCHER_FEHLER);else c.defaultErrorMessage("Bitte füllen Sie die Signatur mit Inhalt, um sie zu speichern.");else c.defaultErrorMessage("Bitte geben Sie einen Titel für die Signatur ein.")}}]),a.controller("SignatureDetailsCtrl",["$scope","$q","signatureService","alertService","employeeService","$state","userService","$http","$sce","$timeout","signatureHelperService","groupsService","paymentService",function(a,b,c,d,e,f,g,h,i,j,k,l,m){a.data={employees:[],selectedEmployee:"",signatureTpl:"",signatureStructureData:{},companyData:{},preview:"",signatureTitle:"",signatureId:"",activeInGroups:[],selectedGroups:[],filterText:""},a.deleteSig=function(){k.deleteSigs(a.data.signatureId,a).then(function(){f.go("base.signaturelist")},function(){})},a.editSignature=function(){f.go("base.signaturedesigner",{signatureId:a.data.signatureId})},a.generatePreview=function(){var b=k.generatePreviewComplete(a.data.selectedEmployee);a.data.preview=i.trustAsHtml(b)},a.getEmployeeAccountData=function(){var c=b.defer();return a.data.selectedEmployee?(e.getOne(a.data.selectedEmployee).then(function(b){if(b&&0!==!b.length)if(b[0].userInfo)a.data.employeeData=JSON.parse(b[0].userInfo),c.resolve();else{var d=a.data.selectedEmployee;if(d){var b=a.emptyEmployeeData;e.setEmployeeInfo(d,b).then(function(b){b.success===!0?(a.data.employeeData=a.emptyEmployeeData,c.resolve()):c.reject("EmployeeInfo speichern war nicht erfolgreich.")})}else c.reject("Mitarbeiter Daten konnten nicht vorbereitet werden.")}else c.reject()}),c.promise):c.reject()},a.initData=function(){function c(){var c=b.defer();return e.get().then(function(b){b&&Array.isArray(b)&&b.length>0?(a.data.employees=b,a.data.selectedEmployee=a.data.employees[0].id,c.resolve()):c.reject("no employees could be loaded")},function(){c.reject()}),c.promise}return f.params.signatureId?(a.data.signatureId=f.params.signatureId,a.updateSelectedUser=function(){k.getEmployeeAccountData(a.data.selectedEmployee,a.data.fields).then(function(){a.generatePreview()},function(b){a.initData()})},void c().then(function(){return k.getRelevantDataForSignature(a.data.selectedEmployee,a.data.signatureId,"toEdit")}).then(function(b){a.data.signatureTitle=b.signatureTitle,a.data.signatureTpl=b.signatureTpl,a.data.signatureStructureData=b.signatureData,a.data.activeInGroups=b.activeGroups,a.data.companyData=b.companyData,a.data.employeeData=b.employeeData,a.data.fields=b.fields,a.data.lastRollout=b.signatureLastRollout,a.data.signatureUpdatedAt=b.signatureUpdatedAt,a.data.companyInfoUpdatedAt=b.companyInfoUpdatedAt;var c=moment(new Date(a.data.lastRollout)),d=moment(new Date(a.data.companyInfoUpdatedAt)),e=moment(new Date(a.data.signatureUpdatedAt));!a.data.lastRollout||c.isBefore(d)||c.isBefore(e)?a.data.rolloutStatus="outdated":a.data.rolloutStatus="latest"}).then(function(){return j(function(){a.generatePreview()},1e3)})["catch"](function(a){d.defaultErrorMessage(Strings.errors.DATEN_NICHT_GELADEN)})):void d.defaultErrorMessage(Strings.errors.DATEN_NICHT_GELADEN)},a.initData(),a.removeSignaturefromGroups=function(b){var c=[],e="Möchten Sie Zuordnung der Signatur zu dieser Abteilung wirklich entfernen?";if(b)c.push(b);else{for(var f=0;f<a.data.activeInGroups.length;f++)c.push(a.data.activeInGroups[f].id);a.data.activeInGroups.length>0&&(e="Möchten Sie Zuordnung der Signatur zu diesen Abteilungen wirklich entfernen?")}bootbox.confirm({size:"small",message:e,callback:function(b){b===!0&&l.setSignature(c,null).then(function(b){b.success===!0?(d.defaultSuccessMessage("Die Zuordnung wurde erfolgreich entfernt."),a.initData()):d.defaultErrorMessage(Strings.errors.TECHNISCHER_FEHLER)})["catch"](function(a){d.defaultErrorMessage(Strings.errors.TECHNISCHER_FEHLER)})}})},a.getAmountOfMembersInWhichSignatureIsActive=function(){var b=0;if(a.data.activeInGroups&&0!==a.data.activeInGroups.length)for(var c=0;c<a.data.activeInGroups.length;c++)b+=a.data.activeInGroups[c].amountOfMembers;else b=0;return b},a.rolloutSignature=function(){0===a.getAmountOfMembersInWhichSignatureIsActive()?d.defaultErrorMessage("Diese Signatur ist in keiner Abteilung aktiv, die Mitarbeiter enthält. Weisen Sie die Signatur mindestens einer Abteilung zu, die über Mitglieder verfügt, um sie ausrollen zu können."):m.getUserStatus().then(function(a){return a&&a.success&&a.success!==!1?1==a.forceAllow||a.hasSubscription===!0||a.hasTestTime===!0?b.resolve():b.reject("nosubscription"):(d.defaultErrorMessage(Strings.errors.DATEN_NICHT_GELADEN),b.reject())}).then(function(){c.rolloutSignature(a.data.signatureId).then(function(b){b.success===!0?a.initData():d.defaultErrorMessage(Strings.errors.DATEN_NICHT_GELADEN)})},function(b){"nosubscription"===b?d.rolloutDeniedNoSubscription(a.data.preview,function(){f.go("base.booking")}):d.defaultErrorMessage(Strings.errors.DATEN_NICHT_GELADEN)})["catch"](function(a){d.defaultErrorMessage(Strings.errors.DATEN_NICHT_GELADEN)})},a.isSelectedAll=function(){return a.data.selectedGroups.length===a.data.activeInGroups.length},a.selectAll=function(b){for(var c=b.target,d=c.checked?"add":"remove",e=0;e<a.data.activeInGroups.length;e++){var f=a.data.activeInGroups[e];n(d,f)}},a.selectAllOuter=function(){for(var b=a.data.selectedGroups.length===a.data.activeInGroups.length?"remove":"add",c=0;c<a.data.activeInGroups.length;c++){var d=a.data.activeInGroups[c];n(b,d)}};var n=function(b,c){var d=jQuery.grep(a.data.selectedGroups,function(a,b){return a.id===c.id});if("add"===b&&0===d.length&&a.data.selectedGroups.push(c),"remove"===b&&d.length>0)for(var e=0;e<a.data.selectedGroups.length;e++){var f=a.data.selectedGroups[e];if(f.id===c.id){a.data.selectedGroups.splice(e,1);break}}};a.updateSelection=function(a,b){var c=a.target,d=c.checked?"add":"remove";n(d,b)},a.isSelected=function(b){var c=jQuery.grep(a.data.selectedGroups,function(a,c){return a.id===b.id});return 0!==c.length},a.rowClicked=function(b){for(var c=b.id,d="add",e=0;e<a.data.selectedGroups.length;e++)if(c===a.data.selectedGroups[e].id){d="remove";break}n(d,b)},a.getSelectedClass=function(b){return a.isSelected(b)?"selected":""}}]),a.controller("SignatureListCtrl",["$scope","$q","signatureService","alertService","signatureHelperService","listHelperService",function(a,b,c,d,e,f){a.rightbar={activeTab:"company"},a.data={signatures:[],selectedSigs:[],filterText:""},a.config={listheight:400},a.list=f,a.predicate="title",a.reverse=!0,a.order=function(b){a.reverse=a.predicate===b&&!a.reverse,a.predicate=b},a.initData=function(){f.all=a.data.signatures,f.selected=a.data.selectedSigs,c.getAll().then(function(b){b&&b.success!==!1?a.data.signatures=b.data:alert(Strings.errors.DATEN_NICHT_GELADEN)})},a.initData(),a.deleteSigs=function(b){e.deleteSigs(b,a).then(function(){a.initData()},function(){a.initData()})},a.isSelectedAll=function(){return a.data.selectedSigs.length===a.data.signatures.length},a.selectAll=function(b){for(var c=b.target,d=c.checked?"add":"remove",e=0;e<a.data.signatures.length;e++){var f=a.data.signatures[e];g(d,f)}},a.selectAllOuter=function(){for(var b=a.data.selectedSigs.length===a.data.signatures.length?"remove":"add",c=0;c<a.data.signatures.length;c++){var d=a.data.signatures[c];g(b,d)}};var g=function(b,c){var d=jQuery.grep(a.data.selectedSigs,function(a,b){return a.id===c.id});if("add"===b&&0===d.length&&a.data.selectedSigs.push(c),"remove"===b&&d.length>0)for(var e=0;e<a.data.selectedSigs.length;e++){var f=a.data.selectedSigs[e];if(f.id===c.id){a.data.selectedSigs.splice(e,1);break}}};a.updateSelection=function(a,b){var c=a.target,d=c.checked?"add":"remove";g(d,b)},a.isSelected=function(b){var c=jQuery.grep(a.data.selectedSigs,function(a,c){return a.id===b.id});return 0!==c.length},a.rowClicked=function(b){for(var c=b.id,d="add",e=0;e<a.data.selectedSigs.length;e++)if(c===a.data.selectedSigs[e].id){d="remove";break}g(d,b)},a.getSelectedClass=function(b){return a.isSelected(b)?"selected":""}}]),a.controller("SignatureRolloutCtrl",["$scope","alertService","$state","$uibModal","$q","employeeService","signatureService","signatureHelperService","paymentService","groupsService","listHelperService","employeeImportService","$sce",function(a,b,c,d,e,f,g,h,i,j,k,l,m){a.workflow={currentStep:"",breadcrumps:[],breadcrumpsdone:[]},a.signatureData={sigHtml:"",id:""},a.groupData={title:"",activeSignature:"",allGroups:[],selectedGroups:[],filteredGroups:[]},a.employeeData={allEmployees:[],filteredEmployees:[],selectedEmployees:[],currentGroup:"empty",firstname:"",lastname:"",email:""},a.resultData={group:{groupsAssigned:0},employee:{amountOfAddedEmployees:0},signature:{rolledout:!1}},a.listHandler={},a.getEmployees=function(){var b=e.defer();return f.get().then(function(c){a.employeeData.allEmployees=c,b.resolve()},function(){b.reject()}),b.promise},a.getGroups=function(){var b=e.defer();return j.get().then(function(c){a.groupData.allGroups=c,a.groupData.filteredGroups=[];for(var d=0;d<c.length;d++)c[d].activeSignature!==a.signatureData.id&&a.groupData.filteredGroups.push(c[d]);b.resolve()},function(){b.reject()}),b.promise},a.initData=function(){if(k.selectionType="multi",a.$watch("workflow.currentStep",function(b,c){"employee_selectexisting"===b&&a.recalcAvatars()}),!c.params||!c.params.signatureId)return void b.defaultErrorMessage(Strings.errors.DATEN_NICHT_GELADEN);if("create"===c.params.mode)a.workflow.outerheadline="Signatur erstellen",a.resultData.signature.signatureCreatedOrUpdated="created",a.workflow.breadcrumpsdone=["Signatur erstellt"];else{if("update"!==c.params.mode)return void b.defaultErrorMessage(Strings.errors.DATEN_NICHT_GELADEN);a.workflow.breadcrumpsdone=["Signatur bearbeitet"],a.workflow.outerheadline="Signatur bearbeiten",a.workflow.breadcrumps=["Signatur ausrollen"],a.resultData.signature.signatureCreatedOrUpdated="updated"}a.signatureData.id=c.params.signatureId,a.signatureData.title=c.params.signatureTitle,h.getRelevantDataForSignature("dummy",a.signatureData.id).then(function(){var b=h.generatePreviewComplete("dummy");if(b)return a.signatureData.sigHtml=m.trustAsHtml(b),a.resultData.signature.activeInGroups=h.dataManager.activeGroups,e.resolve();throw"nosightml"},function(){throw"nosightml"}).then(i.getUserStatus).then(function(b){if(b.success!==!0)throw"nodata";return b.success!==!0||b.hasSubscription!==!0&&b.forceAllow!==!0&&b.hasTestTime!==!0?b.success===!0&&b.hasSubscription===!1?e.reject():void 0:(a.getGroups(),a.getEmployees(),e.resolve())}).then(function(){return"created"===a.resultData.signature.signatureCreatedOrUpdated?(a.workflow.currentStep="group_nogroup",a.workflow.breadcrumps=["Abteilung zuweisen"]):"updated"===a.resultData.signature.signatureCreatedOrUpdated&&(0===a.resultData.signature.activeInGroups.length||0===a.countMembersOfAssignedgroups()?a.workflow.currentStep="nomembersassigned":a.workflow.currentStep="signature_results",a.workflow.breadcrumps=["Signatur ausrollen"]),e.resolve()},function(b){return a.workflow.currentStep="noaccount",a.workflow.breadcrumps=["Mailtastic aktivieren"],e.resolve()})["catch"](function(a){b.defaultErrorMessage(Strings.errors.DATEN_NICHT_GELADEN)})},a.sendExampleMail=function(){f.sendInvitationTestmail().then(function(a){a.success===!0?alert("Wir haben Ihnen eine Beispiel-Einladungs-E-Mail gesendet."):alert(Strings.errors.DATEN_NICHT_GELADEN)},function(a){alert(Strings.errors.DATEN_NICHT_GELADEN)})},a.countMembersOfAssignedgroups=function(){if(a.resultData.signature.activeInGroups){for(var b=0,c=0;c<a.resultData.signature.activeInGroups.length;c++)b+=a.resultData.signature.activeInGroups[c].amountOfMembers;return b}return 0},a.addGroup=function(b){"new"===b?a.workflow.currentStep="group_createnew":"existing"===b&&(a.workflow.currentStep="group_selectexisting",k.all=a.groupData.filteredGroups,k.selected=a.groupData.selectedGroups,a.listHandler=k)},a.createGroup=function(){a.loadingPromise=j.add({title:a.groupData.title,activeSignature:a.signatureData.id}).then(function(b){b.success===!0?(a.resultData.group.groupsAssigned=1,a.employeeData.currentGroup=b.groupId,a.workflow.breadcrumpsdone.push("Abteilung(en) zugewiesen"),a.workflow.breadcrumps=["Mitarbeiter hinzufügen"],a.resultData.group.groupSet=!0,a.resultData.group.multipleGroups=!1,a.resultData.group.groupsSet=[{title:a.groupData.title,activeSignature:a.signatureData.id,id:b.groupId}],a.resultData.group.amountOfGroupsSet=1,a.resultData.group.amountOfMembersGroupsSet=0,a.resultData.group.groupTitlesAdded=a.groupData.title,a.workflow.currentStep="employee_results"):alert(Strings.errors.TECHNISCHER_FEHLER)})},a.setSignatureForGroupFromList=function(){if(a.groupData.selectedGroups&&a.groupData.selectedGroups[0]){for(var c=[],d=0,e="",f=0;f<a.groupData.selectedGroups.length;f++)c.push(a.groupData.selectedGroups[f].id),d+=a.groupData.selectedGroups[f].amountOfMembers,e+=a.groupData.selectedGroups[f].title,f!==a.groupData.selectedGroups.length-1&&(e+=a.groupData.selectedGroups[f].title+=", ");j.setSignature(c,a.signatureData.id).then(function(f){f.success===!0?(a.workflow.breadcrumpsdone.push("Abteilung zugewiesen"),a.resultData.group.groupSet=!0,a.resultData.group.multipleGroups=!0,a.resultData.group.groupsSet=a.groupData.selectedGroups,a.resultData.group.amountOfGroupsSet=c.length,1===c.length&&(a.employeeData.currentGroup=c[0]),a.resultData.group.amountOfMembersGroupsSet=d,a.resultData.group.groupTitlesAdded=e,a.resultData.group.amountOfMembersGroupsSet>0?(a.workflow.currentStep="signature_results",a.workflow.breadcrumps=["Signatur ausrollen"]):(a.workflow.currentStep="employee_results",a.workflow.breadcrumps=["Mitarbeiter hinzufügen"])):b.defaultErrorMessage(Strings.errors.DATEN_NICHT_GELADEN)})}else alert("Bitte eine Gruppe selektieren")},a.addEmployee=function(b){if("new"===b)a.employeeData.email="",a.employeeData.firstname="",a.employeeData.lastname="",a.workflow.currentStep="employee_createnew";else if("existing"===b){a.employeeData.selectedEmployees=[],a.employeeData.filteredEmployees=[];for(var c=0;c<a.employeeData.allEmployees.length;c++){var d=jQuery.grep(a.resultData.group.groupsSet,function(b,d){return b.id===a.employeeData.allEmployees[c].currentGroup});0===d.length&&a.employeeData.filteredEmployees.push(a.employeeData.allEmployees[c])}a.workflow.currentStep="employee_selectexisting",k.all=a.employeeData.filteredEmployees,k.selected=a.employeeData.selectedEmployees,a.listHandler=k}else"import"===b&&(a.workflow.currentStep="employee_import")},a.setEmployeesFromList=function(){if(a.employeeData.selectedEmployees&&a.employeeData.selectedEmployees[0])if(a.employeeData.currentGroup&&"empty"!==a.employeeData.currentGroup){for(var c=[],d=0;d<a.employeeData.selectedEmployees.length;d++)c.push(a.employeeData.selectedEmployees[d].id);var g=null;g=a.employeeData.currentGroup,f.moveToGroup(c,g).then(function(d){d.success===!0?(a.resultData.employee.amountOfAddedEmployees+=c.length,j.get().then(function(b){return a.groupData.allGroups=b,e.resolve()}).then(function(){return a.getEmployees()}).then(function(){for(var b="",c=0;c<a.groupData.allGroups.length;c++)if(a.groupData.allGroups[c].id==g){b=a.groupData.allGroups[c].title;break}a.resultData.employee.groupTitleToWhichTheEmpsWereAdded=b,a.workflow.currentStep="signature_results",a.workflow.breadcrumpsdone.push("Mitarbeiter hinzugefügt"),a.workflow.breadcrumps=["Signatur ausrollen"]})):b.defaultErrorMessage(Strings.errors.TECHNISCHER_FEHLER)})}else b.defaultErrorMessage("Bitte wählen Sie die Gruppe aus, denen die Mitarbeiter hinzugefügt werden sollen.");else b.defaultErrorMessage("Bitte wählen Sie mindestens einen Mitarbeiter aus.")},a.createEmployee=function(){function c(c){if(!$("#createempmodalcheckbox").prop("checked")&&c!==!0)return!1;"empty"===a.employeeData.currentGroup&&(a.employeeData.currentGroup=null);var d=a.employeeData.currentGroup;a.loadingPromise=f.add(a.employeeData).then(function(c){c.success===!1&&1===c.code?b.defaultErrorMessage("Es existiert bereits ein Mitarbeiter mit der angegebenen E-Mail-Adresse. Bitte überprüfen Sie Ihre Eingaben. Ihr Abonnement hat sich nicht geändert."):c.success===!1?alert(Strings.errors.TECHNISCHER_FEHLER):(a.resultData.employee.amountOfAddedEmployees+=1,j.get().then(function(b){return a.groupData.allGroups=b,e.resolve()}).then(function(){return a.getEmployees()}).then(function(){for(var b="",c=0;c<a.groupData.allGroups.length;c++)if(a.groupData.allGroups[c].id==d){b=a.groupData.allGroups[c].title;break}a.resultData.employee.groupTitleToWhichTheEmpsWereAdded=b,a.workflow.currentStep="signature_results",a.workflow.breadcrumpsdone.push("Mitarbeiter hinzugefügt"),a.workflow.breadcrumps=["Signatur ausrollen"]}),i.syncEmployees().then(function(a){}))})}if("empty"===a.employeeData.currentGroup)return void alert("Bitte wählen Sie die Abteilung aus, der der neue Mitarbeiter hinzugefügt werden soll.");for(var g=0;g<a.employeeData.allEmployees.length;g++)if(a.employeeData.allEmployees[g].email===a.employeeData.email)return void b.defaultErrorMessage("Es existiert bereits ein Mitarbeiter mit der angegebenen E-Mail-Adresse. Bitte überprüfen Sie Ihre Eingaben.");i.getUserStatus().then(function(e){if(e.success===!1)alert(Strings.errors.DATEN_NICHT_GELADEN);else if(1==e.forceAllow)c(!0);else if(e.hasTestTime===!0)c(!0);else if(e.hasSubscription===!0)e.amountOfFreeMembers>0?c(!0):b.addemployee({amount:1,firstname:a.employeeData.firstname,lastname:a.employeeData.lastname,billing_interval:e.billing_interval,customPrice:e.customPrice},c,function(){});else{d.open({animation:!0,templateUrl:"booking/accountexpiredmodal/modals/unallowed_action_modal.html",controller:"AccountExpiredModalInstanceCtrl",size:"lg",windowClass:"expiredmodalcontainer"})}})},a.abort=function(){a.resultData.signature.title=a.signatureData.title,a.resultData.signature.id=a.signatureData.id,b.assistantAbortSignatureRollout(a.resultData,function(){c.go("base.signaturelist")},function(){})},a.backFromAddingEmployees=function(){a.resultData.employee.groupTitleToWhichTheEmpsWereAdded?a.workflow.currentStep="signature_results":a.countMembersOfAssignedgroups()>0?a.workflow.currentStep="signature_results":a.workflow.currentStep="employee_results"},a.rolloutSignature=function(){g.rolloutSignature(a.signatureData.id).then(function(c){c.success===!0?(a.resultData.signature.rolledout=!0,a.resultData.signature.amountOfInvitationsSent=c.amountOfInvitationsSent,a.resultData.signature.amountWithEasySync=c.amountWithEasySync,a.resultData.signature.amountWithGoogleSync=c.amountWithGoogleSync,a.workflow.breadcrumpsdone.push("Signatur ausgerollt"),a.workflow.breadcrumps=["Fertig!"]):b.defaultErrorMessage(Strings.errors.DATEN_NICHT_GELADEN)})},a.processAfterImport=function(){a.resultData.employee.amountOfAddedEmployees+=a.config.resultdata.employee.amountOfImported;var b=null;"empty"!==a.employeeData.currentGroup&&(b=a.employeeData.currentGroup);for(var c="",d=0;d<a.groupData.allGroups.length;d++)if(a.groupData.allGroups[d].id==b){
c=a.groupData.allGroups[d].title;break}a.resultData.employee.groupTitleToWhichTheEmpsWereAdded=c,a.workflow.currentStep="signature_results",a.workflow.breadcrumpsdone.push("Mitarbeiter hinzugefügt"),a.workflow.breadcrumps=["Signatur ausrollen"]},a.fileChanged=function(b){l.fileChanged(b).then(function(){return l.checkImportData(a.config.loadingPromise)}).then(function(){return l.importUsers(a.employeeData.currentGroup,a.config,a.loadingPromise)}).then(function(){a.processAfterImport()})["catch"](function(a){document.getElementById("employeeimport").value=null})},a.config={resultdata:{employee:{idsAdded:[]}}},a.importUsers=function(){l.importUsers(a.employeeData.currentGroup,a.config,a.loadingPromise).then(function(b){a.processAfterImport()})["catch"](function(a){document.getElementById("employeeimport").value=null})}}])}(angular.module("mailtasticApp.signature",["ckeditor"])),function(a){"use strict";function b(a){if(window.getSelection){var b=window.getSelection();b.removeAllRanges();var c=document.createRange();c.selectNodeContents(a),b.addRange(c)}else if(document.selection){var d=document.body.createTextRange();d.moveToElementText(a),d.select()}}var c={outlookwin:{title:"Outlook (Win)",video:"https://www.youtube.com/embed/bk6Xst6euQk",showBanner:!1,showSnippet:!1,showOutlookSnippet:!0},outlookmac:{title:"Outlook (Mac)",video:"https://www.youtube.com/embed/bk6Xst6euQk",showBanner:!0,showSnippet:!1},gmail:{title:"Gmail",video:'https://www.youtube.com/embed/5uBsfHA5LBo"',showBanner:!0,showSnippet:!1},thunderbird:{title:"Thunderbird",video:'https://www.youtube.com/embed/5uBsfHA5LBo"',showBanner:!1,showSnippet:!0},macmail:{title:"Mac Mail",video:'https://www.youtube.com/embed/5uBsfHA5LBo"',showBanner:!0,showSnippet:!1},macmailold:{title:"Mac Mail (alt)",video:'https://www.youtube.com/embed/5uBsfHA5LBo"',showBanner:!1,showSnippet:!0},other:{title:"Andere",video:'https://www.youtube.com/embed/5uBsfHA5LBo"',showBanner:!1,showSnippet:!1},webtools:{title:"Web-Tools",video:"",showBanner:!1,showSnippet:!0},windows_easyintegrate:{title:"Outlook (Windows - EasyIntegrate)",video:"",showBanner:!1,showSnippet:!0}};a.controller("IntegrationCtrl",["$scope","employeeService","$stateParams","alertService","$q","$sce","$location","$state",function(a,d,e,f,g,h,i,j){a.datacompletiononly=!1,a.workflow={step:"explanation",step3headline:"Daten ergänzt"},a.outlookWin={showOutlookSnippetInstallCode:"true"},a.manual=c,a.currentManualTitle="",a.mode="admin",a.currentManual=[],a.htmlSnippet="",a.outlooklink1="",a.outlooklink2="",a.outlookInstallationCode="",a.userId="",a.htmlSnippetRaw="",a.dataEditUrl="",a.pureSnippet="",a.userData={},a.signatureData={preview:""},a.formData={tagsToComplete:[]},a.admindata={firstname:"",lastname:"",email:""},a.setManual=function(b){a.currentManual=a.manual[b];var c=$(".navbar-toggle").is(":visible");c&&$(".navbar-collapse").collapse("hide")},a.othermailclient={clientname:""},a.sendothermailclientnotification=function(){d.sendothermailclientnotification(null,a.othermailclient.clientname).then(function(b){b.success===!0?(alert("Herzichen Dank für Ihre Nachricht. Wir werden umgehend eine Lösung für Ihren E-Mail-Client zur Verfügung stellen."),a.othermailclient.clientname=""):alert(Strings.errors.TECHNISCHER_FEHLER)})},a.getClass=function(b){return"Mac Mail"===b&&"Mac Mail (alt)"===a.currentManual.title?"active":a.currentManual.title===b?"active":""},a.isShownInsideWebApp=function(){return i.absUrl().contains("installation")},a.generateSnippets=function(b){var c=b.sigOrCampaign;if(a.sigOrCampaign=b.sigOrCampaign,a.userId=e.eid,a.admindata=b.admindata,a.userData=b.userdata,a.outlookInstallationCode=e.eid,"failure"===c)a.htmlSnippetRaw="Daten konnte nicht geladen werden",a.htmlSnippet="Daten konnte nicht geladen werden",a.outlooklink1="Daten konnte nicht geladen werden",a.outlooklink2="Daten konnte nicht geladen werden",a.outlookInstallationCode="Daten konnte nicht geladen werden",a.signatureData.preview="Daten konnten nicht geladen werden",alert(Strings.errors.ACCOUNT_ACTIVATION_ERROR_EMPLOYEE);else{if("signature"!==c&&"campaign"!==c)throw new Error("received data invalid was weather campaign nor failure nor signature");a.thunderbirdSnippet=b.snippet.replace('width="700" height="210"',"").replace("m=o&","").replace("?track=n","");var d=b.snippet.replace('width="700" height="210"',"").replace('moz-do-not-send="true"',"").replace("m=o&","");a.signatureData.preview=h.trustAsHtml(d),a.htmlSnippetRaw=d,"signature"===c&&Array.isArray(b.fieldsToComplete)&&(0===b.fieldsToComplete.length?a.workflow.step3headline="Daten komplett":a.formData.tagsToComplete=b.fieldsToComplete)}},a.saveDataAndGenerateSignature=function(){d.complementUserInfoData(e.eid,e.ac,a.formData.tagsToComplete).then(function(b){b.success===!0?"employeedatacompletion"===j.current.name?a.workflow.step="finished":(a.workflow.step="integration",d.getIntegrationData(e.eid,e.ac).then(function(b){b.success===!0?a.generateSnippets(b.data):f.defaultErrorMessage(Strings.errors.TECHNISCHER_FEHLER)})):f.defaultErrorMessage(Strings.errors.DATEN_NICHT_GELADEN)})["catch"](function(a){f.defaultErrorMessage(Strings.errors.TECHNISCHER_FEHLER)})},a.goToStep=function(b){a.workflow.step=b},a.openHelpModal=function(){var b="";b=a.admindata.firstname?a.admindata.firstname+" "+a.admindata.lastname:!a.admindata.email,f.integrationHelpModal(b)},a.activateEmployeeDone=!1,a.initData=function(){if("employeedatacompletion"!==j.current.name){var b=/^((?!chrome|android).)*safari/i.test(navigator.userAgent),c=!!document.documentMode,h=!c&&!!window.StyleMedia;b===!0&&f.defaultErrorMessage("Leider funktioniert die reibungslose Installation nicht mit dem Safari Browser. Bitte kopieren Sie den Link aus der Adresszeile und verwenden Sie für die einmalige Installation Chrome oder Firefox in aktueller Version. Herzlichen Dank!"),h===!0&&f.defaultErrorMessage("Leider funktioniert die reibungslose Installation aktuell nicht mit dem EDGE Browser. Bitte kopieren Sie den Link aus der Adresszeile und verwenden Sie für die einmalige Installation Chrome oder Firefox  in aktueller Version. Herzlichen Dank!")}return a.$watch("workflow.step",function(b,c){"integration"===b&&($("#manualselect").selectpicker("render"),$("#manualselect").off("changed.bs.select"),$("#manualselect").on("changed.bs.select",function(b){try{a.$apply(function(){a.currentManual=a.manual[b.target.value]})}catch(b){f.defaultErrorMessage(Strings.errors.TECHNISCHER_FEHLER)}}))}),e.ac&&e.eid?(i.absUrl().contains("&edit=true")||(a.dataEditUrl=i.absUrl()+"&edit=true"),void d.getIntegrationData(e.eid,e.ac).then(function(b){return b.success!==!0?g.reject():(b=b.data,a.generateSnippets(b),void("true"!==e.edit&&"employeedatacompletion"!==j.current.name||(a.workflow.step="datacompletion",a.datacompletiononly=!0)))})["catch"](function(a){f.defaultErrorMessage(Strings.errors.DATEN_NICHT_GELADEN)})):void f.defaultErrorMessage(Strings.errors.TECHNISCHER_FEHLER)},a.initData(),a.step2=function(){0===a.formData.tagsToComplete.length?a.workflow.step="integration":a.workflow.step="datacompletion"};var k=navigator.appVersion.search("Safari")!=-1&&navigator.appVersion.search("Chrome")==-1&&navigator.appVersion.search("CrMo")==-1&&navigator.appVersion.search("CriOS")==-1,l=navigator.userAgent.toLowerCase().indexOf("msie")!=-1||navigator.userAgent.toLowerCase().indexOf("trident")!=-1,m=$("#ie-clipboard-contenteditable"),n=$("#hidden-input"),o="",p=function(a){},q=function(){n.val(" "),n.focus().select()},r=function(){m.focus();var a=document.createRange();a.selectNodeContents(m.get(0));var b=window.getSelection();b.removeAllRanges(),b.addRange(a)},s=function(b){var c=window.clipboardData;if("copy"==b){var d="";d="Thunderbird"===a.currentManual.title?a.thunderbirdSnippet.replaceAll("?track=n",""):"Outlook (Win)"===a.currentManual.title?a.outlookInstallationCode:a.htmlSnippetRaw.replaceAll("?track=n",""),c.setData("Text",d),m.html(d),r(),setTimeout(function(){q(),m.empty()},0)}},t=function(b,c){var d=c.clipboardData;if("copy"==b){var e="";e="Thunderbird"===a.currentManual.title?a.thunderbirdSnippet.replaceAll("?track=n",""):"Outlook (Win)"===a.currentManual.title?a.outlookInstallationCode:a.htmlSnippetRaw.replaceAll("?track=n",""),d.setData("text/plain",e),d.setData("text/html",e)}};n.on("input",function(a){var b=n.val();o+=b,p(o),k?(n.focus(),setTimeout(q,0)):q()}),["copy"].forEach(function(a){document.addEventListener(a,function(b){console.log(a),l?s(a):(t(a,b),q(),b.preventDefault())})}),$(document).mouseup(q),a.selectSignature=function(a){var b=document.execCommand("copy");b===!0?f.defaultSuccessMessage("Die Inhalte wurden in die Zwischenablage kopiert."):f.defaultErrorMessage("Die Inhalte konnten nicht in die Zwischenablage kopiert werden. Bitte markieren und kopieren Sie die Inhalte selbst. Sollte es zu Schwierigkeiten kommen zögern Sie bitte nicht uns zu kontaktieren:<br>"+Strings.supportdata.supporttelnr+"<br>"+Strings.supportdata.supportemail)},a.imageClicked=function(a){a.preventDefault();var c=document.getElementById("image_installation_link");b(c)},a.textClicked=function(){}}]).filter("trusted",["$sce",function(a){return function(b){return a.trustAsResourceUrl(b)}}]).filter("tagTypeFilter",function(){return function(a,b){for(var c=[],d=0;d<a.length;d++)a[d].type===b&&c.push(a[d]);return c}}).directive("selectOnClick",function(){return{link:function(a,b){var c;b.on("click",function(){this.select(),c=this}),b.on("blur",function(){c=null})}}}),a.controller("VersaCommerceCtrl",["$scope","$uibModal","employeeService","alertService","$injector","paymentService","$q",function(a,b,c,d,e,f,g){a.initData=function(){var b=e.get("StorageFactory");a.userId=b.get("userId")},a.createVersaCommerceUsers=function(){d.defaultConfirmPrompt("Möchten Sie die Nutzer und Abteilungen für Versa Commerce jetzt erstellen?").then(f.getUserStatus,function(){return g.reject("VALIDBREAK")}).then(function(a){if(a.success===!1)alert(Strings.errors.DATEN_NICHT_GELADEN);else{if(1==a.forceAllow)return a.showBuyModal=!1,g.resolve(a);if(a.hasTestTime===!0)return a.showBuyModal=!1,g.resolve(a);if(a.hasSubscription===!0)return a.amountOfFreeMembers>8?(a.showBuyModal=!1,g.resolve(a)):(a.showBuyModal=!0,g.resolve(a));b.open({animation:!0,templateUrl:"booking/accountexpiredmodal/modals/unallowed_action_modal.html",controller:"AccountExpiredModalInstanceCtrl",size:"lg",windowClass:"expiredmodalcontainer"})}}).then(function(a){return new Promise(function(b,e){a.showBuyModal===!0?d.importVersaCommerce({totalAmount:9,validAmount:9,freeAmount:a.amountOfFreeMembers,alreadyExistant:0,emailsAsString:"",billing_interval:a.billing_interval,customPrice:a.customPrice},function(){return!!$("#versamodalcheckbox").prop("checked")&&(document.getElementById("versamodalcheckbox").value=null,void c.addVersaCommerceUsers().then(function(){b()}))},function(){document.getElementById("versamodalcheckbox").value=null}):c.addVersaCommerceUsers().then(function(){b()})})}).then(function(){d.defaultSuccessMessage("Die Nutzer wurden erfolgreich hinzugefügt und befinden Sich in Ihrer Mitarbeiter-Liste."),f.syncEmployees()})["catch"](function(a){"VALIDBREAK"===a||(alert(Strings.errors.DATEN_NICHT_GELADEN),f.syncEmployees(),document.getElementById("versamodalcheckbox").value=null)})},a.initData()}]),a.controller("GoogleSyncCtrl",["$scope","$filter","$uibModal","$log","$stateParams","googlesyncservice","employeeService","browseService","authService","userService","groupsService","paymentService","$window","alertService","$q","listHelperService",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){a.sampledata="Sample Page",a.config={breadcrumpsdone:""},a.pwdErrorMsg="",a.allselectedUser=!1,a.animationsEnabled=!0,a.currentSyncType="",a.currentStructurType="",a.groupMemberList=[],a.step={startSync:""},a.rowCheckItems={allselectedUser:!1},a.object={isConditionchecked:!1,isActivecheck:"",googleStructurechecked:"",isGoogleConditionchecked:!1,currentPage:"newgooglesync"},a.syncUpdateModel={selectedSetting:""},a.companyInfo={syncInfoId:null,admin:"",syncAdminEmail:"",isAutomaticSync:null,isGoogleStructure:null,accessTokenKey:"",isDisconnected:!1},a.editInfo={syncInfoId:null,admin:"",syncAdminEmail:"",isAutomaticSync:null,isGoogleStructure:null,accessTokenKey:"",isDisconnected:!1},a.syncDisconnectModel={currentState:"state1",currentSyncDisconnectType:"",adminPwd:""},p.selectionType="multi",a.list=p,a.syncAdminObject={adminEmail:"",name:""},a.syncDisconnectTypes=[],a.adminPwd="",a.authUrl="",a.googleSyncTypes=[],a.googleStructureType=[],a.groupMembersGoogle=[],a.isSyncDeActivated=!1,a.tempArrayForFilter=[];a.newUsers=[],a.employeedata=[],a.syncInfoModel={totalUserCount:0,alreadyUserCount:0,alreadyUsersEmail:"",syncableMemebersCount:0,isAccepted:!1},a.selectedUsers=[],a.filterText="";var q=b("orderBy"),r=!1;a.availalableUsersList={toShow:[],all:[],selected:[]},a.columnName="",a.reverse=!0,a.sortBy=function(b){a.reverse=a.columnName===b&&!a.reverse,a.columnName=b},a.startSyncDisconnect=function(){a.syncDisconnectModel.currentState="state1",a.addDisconnectTypes(),a.syncDisconnectModel.currentSyncDisconnectType=""},a.addDisconnectTypes=function(){a.syncDisconnectTypes=[];for(var b=["Mitarbeiter behalten","Mitarbeiter entfernen"],c=0;c<2;c++){var d={disconnectType:b[c],id:c+1};a.syncDisconnectTypes.splice(1,0,d)}},a.getDisconnectType=function(){},a.continueSyncDisconnect=function(){return"state1"==a.syncDisconnectModel.currentState?void(a.syncDisconnectModel.currentState="state2"):"state2"==a.syncDisconnectModel.currentState&&""!=a.syncDisconnectModel.currentSyncDisconnectType?void(a.syncDisconnectModel.currentState="state3"):void("state3"==a.syncDisconnectModel.currentState&&j.verifyPassword(a.syncDisconnectModel.adminPwd).then(function(b){1==b.success?(a.companyInfo.isDisconnected=!0,f.deleteInfo(a.companyInfo.syncInfoId).then(function(b){for(var c=[],d=0;d<a.groupMembersGoogle.length;d++)c.push(a.groupMembersGoogle[d].id);"Mitarbeiter entfernen"==a.syncDisconnectModel.currentSyncDisconnectType?g.deleteMany(c).then(function(a){l.syncEmployees().then(function(a){m.location.reload()})}):g.updateSyncActivation(c,!1).then(function(a){m.location.reload()})})):a.pwdErrorMsg="* Passwort ist falsch"}))},a.getAuthUrl=function(){i.getAuthUrl().then(function(b){a.authUrl=b,a.addSyncStructure()})},a.startSyncProcess=function(){window.$windowScope=a,a.object={isConditionchecked:!0,isActivecheck:!0,googleStructurechecked:"",isGoogleConditionchecked:!1,currentPage:"googlesync"};window.open(a.authUrl,"Authenticate Account","location=0,status=0,width=600,height=750")},a.authCompletedCB=function(b){a.$apply(function(){void 0!=b.code&&i.getToken(b.code).then(function(b){a.Token=JSON.stringify(b),i.setAuthToken(b),a.step.startSync="processStart",a.object.currentPage="googlesync"})})},a.addGoogleSyncTypes=function(){for(var b=["Automatisch (empfohlen)","Manuell"],c=0;c<2;c++){var d={syncType:b[c],id:c+1};a.googleSyncTypes.splice(1,0,d)}a.currentSyncType="Manuell",a.getAuthUrl()},a.addSyncStructure=function(){for(var b=["GoogleApp-Strukur übernehmen","Neue Struktur erstellen"],c=0;c<2;c++){var d={structureType:b[c],id:c+1};a.googleStructureType.splice(1,0,d)}a.currentStructurType="",a.getCompanyInfo()},a.getCompanyInfo=function(){a.step.startSync="",f.get().then(function(b){b.length>0?(a.companyInfo.syncInfoId=b[0].syncInfoId,a.companyInfo.admin=b[0].admin,a.companyInfo.syncAdminEmail=b[0].syncAdminEmail,a.companyInfo.isAutomaticSync=Boolean(b[0].isAutomaticSync),a.companyInfo.isGoogleStructure=Boolean(b[0].isGoogleStructure),a.companyInfo.isDisconnected=Boolean(b[0].isDisconnected),a.companyInfo.accessTokenKey=b[0].accessTokenKey,i.setAuthToken(JSON.parse(a.companyInfo.accessTokenKey)),g.getGoogleSyncUsersID(a.companyInfo.admin,a.companyInfo.syncAdminEmail).then(function(a){return o.resolve(a)}).then(function(a){return new Promise(function(b,c){f.getListOfUsers().then(function(d){d.success===!1&&666===d.code?(n.defaultErrorMessage("Sie können sich nur mit Google Synchronisieren, wenn Sie Google Apps for Work nutzen und sich hier mit Ihrem Admin Account anmelden. Als G-Mail Nutzer sind sie nicht automatisch Google Apps for Work Admin."),c()):b({googleUsersFromMailtastic:a,googleUsersFromGoogle:d})})["catch"](function(a){c(a)})})}).then(function(a){return new Promise(function(b,c){g.get().then(function(d){d.success===!1?(n.defaultErrorMessage("Sie können sich nur mit Google Synchronisieren, wenn Sie Google Apps for Work nutzen und sich hier mit Ihrem Admin Account anmelden. Als G-Mail Nutzer sind sie nicht automatisch Google Apps for Work Admin."),c()):b({googleUsersFromMailtastic:a.googleUsersFromMailtastic,googleUsersFromGoogle:a.googleUsersFromGoogle,allEmployeesInMailtastic:d})})["catch"](function(a){c(a)})})}).then(function(b){a.groupMembersGoogle=b.googleUsersFromMailtastic,a.alluserList=b.googleUsersFromGoogle,a.groupMembersGoogle.forEach(function(b){a.tempArrayForFilter.splice(1,0,b)}),a.cuntasyncdt="",a.countAsync();var c=a.alluserList.filter(function(b){return b.email==a.companyInfo.syncAdminEmail});c.length>0&&(a.syncAdminObject.adminEmail=c[0].email,a.syncAdminObject.name=c[0].firstname+" "+c[0].lastname);for(var d=[],e=0;e<a.alluserList.length;e++){var f=$.grep(a.groupMembersGoogle,function(b){return b.email==a.alluserList[e].email});0===f.length&&(a.alluserList[e].isNotYetImported=!0,d.push(a.alluserList[e]))}for(var e=0;e<d.length;e++){var f=$.grep(b.allEmployeesInMailtastic,function(a){return a.email==d[e].email});1===f.length&&(d[e].isNotYetManagedByGoogle=!0,d[e].isNotYetImported=!1,d[e].id=f[0].id)}a.groupMembersGoogle.push.apply(a.groupMembersGoogle,d),a.checkIfOneUserIsNotSynced()})["catch"](function(a){n.defaultErrorMessage(Strings.errors.DATEN_NICHT_GELADEN)})):a.companyInfo={syncInfoId:null,admin:"",adminEmail:"",isAutomaticSync:!1,isGoogleStructure:!0,accessTokenKey:"",isDisconnected:!1}})},a.Activecheck=function(){},a.getTokenData=function(){j.getAccountData().then(function(b){a.adminAccount=b,a.addGoogleSyncTypes()})},a.getTokenData(),a.getSyncType=function(b,c){0==c?(a.currentSyncType=b,"Automatisch (empfohlen)"==b?a.companyInfo.isAutomaticSync=!0:a.companyInfo.isAutomaticSync=!1):(a.editSyncType=b,"Automatisch (empfohlen)"==b?a.isAutomaticSyncEdit=!0:a.isAutomaticSyncEdit=!1)},a.getSyncStructure=function(b,c){0==c?(a.currentStructurType=b,"GoogleApp-Strukur übernehmen"==b?a.companyInfo.isGoogleStructure=!0:a.companyInfo.isGoogleStructure=!1):(a.editStructurType=b,"Automatisch (empfohlen)"==b?a.isGoogleStructureEdit=!0:a.isGoogleStructureEdit=!1)},a.open=function(){f.getListOfUsers().then(function(b){return b.success===!1&&666===b.code?n.defaultErrorMessage("Sie können sich nur mit Google Synchronisieren, wenn Sie Google Apps for Work nutzen und sich hier mit Ihrem Admin Account anmelden. Als G-Mail Nutzer sind sie nicht automatisch Google Apps for Work Admin."):(a.alluserList=b,a.syncInfoModel.totalUserCount=a.alluserList.length,void g.get().then(function(b){if(a.employees=b,a.alluserList.length>0)for(var c=0;c<a.alluserList.length;c++){var d=a.employees.filter(function(b){return b.email==a.alluserList[c].email});null!=d&&d.length>0&&(0==d[0].isFromGoogle||1==d[0].isFromGoogle&&0==d[0].isSyncActivated)&&(a.syncInfoModel.alreadyUserCount=a.syncInfoModel.alreadyUserCount+1,""==a.syncInfoModel.alreadyUsersEmail?a.syncInfoModel.alreadyUsersEmail=d[0].email:a.syncInfoModel.alreadyUsersEmail=a.syncInfoModel.alreadyUsersEmail+" , "+d[0].email)}if(a.syncInfoModel.syncableMemebersCount=a.syncInfoModel.totalUserCount-a.syncInfoModel.alreadyUserCount,1==a.companyInfo.isAutomaticSync)if(null==a.companyInfo.syncInfoId){a.companyInfo.admin="";var e=a.alluserList.filter(function(a){return 1==a.isAdmin});e.length>0&&(a.companyInfo.syncAdminEmail=e[0].email),1==a.companyInfo.isGoogleStructure?f.add(a.companyInfo).then(function(b){for(var c=0;c<a.alluserList.length;c++){var d={id:"",email:a.alluserList[c].email,firstname:a.alluserList[c].firstname,lastname:a.alluserList[c].lastname,currentGroup:null,isFromGoogle:!0,isAutoSync:!0,adminEmail:a.companyInfo.syncAdminEmail,isSyncAdmin:!1,syncAdmin:null,isSyncActivated:!0,group:""};if(a.employees.length>0)var e=a.employees.filter(function(b){return b.email==a.alluserList[c].email&&b.adminEmail==a.companyInfo.syncAdminEmail});null!=e&&e.length>0?1==e[0].isFromGoogle&&0==e[0].isSyncActivated&&(d.id=e[0].id,a.employeedata.push(d)):a.employeedata.push(d)}g.addGoogleSyncedUsers(a.employeedata).then(function(b){a.data=b,l.syncEmployees().then(function(a){m.location.reload()})})}):f.add(a.companyInfo).then(function(b){for(var c=0;c<a.alluserList.length;c++){var d={id:"",email:a.alluserList[c].email,firstname:a.alluserList[c].firstname,lastname:a.alluserList[c].lastname,currentGroup:null,isFromGoogle:!0,isAutoSync:!0,adminEmail:a.companyInfo.syncAdminEmail,isSyncAdmin:!1,syncAdmin:null,isSyncActivated:!0};if(a.employees.length>0)var e=a.employees.filter(function(b){return b.email==a.alluserList[c].email&&b.adminEmail==a.companyInfo.syncAdminEmail});null!=e&&e.length>0?1==e[0].isFromGoogle&&0==e[0].isSyncActivated&&(d.id=e[0].id,a.employeedata.push(d)):a.employeedata.push(d)}g.addGoogleSyncedUsers(a.employeedata).then(function(b){a.data=b,l.syncEmployees().then(function(a){m.location.reload()})})})}else f.update(a.companyInfo).then(function(a){m.location.reload()});else{if(a.object.currentPage="manualSync",a.alluserList.length>0)for(var c=0;c<a.alluserList.length;c++){var d=a.employees.filter(function(b){return b.email==a.alluserList[c].email});if(null!=d&&d.length>0)1==d[0].isFromGoogle;else{var h={id:"",firstname:a.alluserList[c].firstname,lastname:a.alluserList[c].lastname,email:a.alluserList[c].email,isSyncChecked:!0,group:a.alluserList[c].group,isGooglesynced:!0,isSyncActivated:!0};a.newUsers.splice(1,0,h)}}a.rowCheckItems.allselectedUser=!0,a.isSelectedAllSyncUsers(!0),a.recalcAvatars()}}))})},a.syncManualUsers=function(){if(a.object.currentPage="manualSync",a.newUsers.length>0){for(var b=0;b<a.newUsers.length;b++)void 0!=a.newUsers[b].isSyncChecked&&1==a.newUsers[b].isSyncChecked&&a.selectedUsers.push(a.newUsers[b]);a.syncInfoModel.syncableMemebersCount=a.selectedUsers.length}if(0===a.selectedUsers.length){var c=a.alluserList.filter(function(a){return 1==a.isAdmin});return a.companyInfo.admin="",c.length>0&&(a.companyInfo.syncAdminEmail=c[0].email),a.companyInfo.accessTokenKey=a.Token,a.companyInfo.syncInfoId?f.update(a.companyInfo).then(function(a){m.location.reload()}):f.add(a.companyInfo).then(function(a){m.location.reload()})}if(null==a.companyInfo.syncInfoId){var c=a.alluserList.filter(function(a){return 1==a.isAdmin});a.companyInfo.admin="",c.length>0&&(a.companyInfo.syncAdminEmail=c[0].email),a.companyInfo.accessTokenKey=a.Token,a.processGoogleUsersImport(a.selectedUsers)}else f.update(a.companyInfo).then(function(a){m.location.reload()})},a.processGoogleUsersImport=function(b){function d(){1==a.companyInfo.isGoogleStructure?a.importUsersWithGoogleStructure(b):a.importGoogleUsersOwnGroupStructure(b)}l.getUserStatus().then(function(a){if(a.success===!1)alert(Strings.errors.DATEN_NICHT_GELADEN);else{if(1==a.forceAllow)return a.showBuyModal=!1,o.resolve(a);if(a.hasTestTime===!0)return a.showBuyModal=!1,o.resolve(a);if(a.hasSubscription===!0)return a.amountOfFreeMembers>=b.length?(a.showBuyModal=!1,o.resolve(a)):(a.showBuyModal=!0,o.resolve(a));c.open({animation:!0,templateUrl:"booking/accountexpiredmodal/modals/unallowed_action_modal.html",controller:"AccountExpiredModalInstanceCtrl",size:"lg",windowClass:"expiredmodalcontainer"})}}).then(function(c){return new Promise(function(e,f){c.showBuyModal===!0?n.importGoogleSyncUsers({totalAmount:b.length,validAmount:b.length,freeAmount:c.amountOfFreeMembers,alreadyExistant:0,emailsAsString:"",billing_interval:c.billing_interval,customPrice:c.customPrice},function(){return!!$("#googlemodalcheckbox").prop("checked")&&(document.getElementById("googlemodalcheckbox").value=null,void d(a.selectedUsers))},function(){document.getElementById("googlemodalcheckbox").value=null}):d(a.selectedUsers)})})["catch"](function(a){alert(Strings.errors.DATEN_NICHT_GELADEN),l.syncEmployees(),document.getElementById("googlemodalcheckbox").value=null})},a.importAllSelectedFromList=function(){var b=[];if(null!=a.companyInfo.syncInfoId&&""==a.step.startSync){for(var c=0;c<a.groupMembersGoogle.length;c++)1==a.groupMembersGoogle[c].isSyncChecked&&1==a.groupMembersGoogle[c].isNotYetImported&&b.push(a.groupMembersGoogle[c]);b.length>0?a.processGoogleUsersImport(b):n.defaultErrorMessage("Wählen Sie mindestens einen Benutzer aus, der importiert werden kann.")}},a.deactivateAllSelectedFromList=function(){if(0==a.companyInfo.isAutomaticSync&&null!=a.companyInfo.syncInfoId&&""==a.step.startSync){for(var b=[],c=0;c<a.groupMembersGoogle.length;c++)1==a.groupMembersGoogle[c].isSyncChecked&&1==a.groupMembersGoogle[c].isSyncActivated&&b.push(a.groupMembersGoogle[c].id);if(0===b.length)return n.defaultErrorMessage("Wählen Sie mindestens einen Benutzer aus, der aktiviert werden kann.");a.countAsync(),a.amountOfUsersToDeactivate=b.length,a.selectedUsersToDeactivate=b;var d=angular.element("#dgSyncDeActivationModelMany");d.modal("show")}},a.continueDeactivateAllSelectedFromList=function(){g.updateSyncActivation(a.selectedUsersToDeactivate,!1).then(function(b){if(b.success!==!0)n.defaultErrorMessage(Strings.errors.DATEN_NICHT_GELADEN);else{a.countAsync();var c=angular.element("#dgSyncDeActivationModelMany");c.modal("hide");var d=angular.element("#dgdeActivationDoneModel");d.modal("show")}a.amountOfUsersToDeactivate=0,a.selectedUsersToDeactivate=[],a.getCompanyInfo()})},a.activateAllSelectedFromList=function(){if(0==a.companyInfo.isAutomaticSync&&null!=a.companyInfo.syncInfoId&&""==a.step.startSync){for(var b=[],c=0;c<a.groupMembersGoogle.length;c++)1==a.groupMembersGoogle[c].isSyncChecked&&0==a.groupMembersGoogle[c].isSyncActivated&&b.push(a.groupMembersGoogle[c].id);if(0===b.length)return n.defaultErrorMessage("Wählen Sie mindestens einen Benutzer aus, der aktiviert werden kann.");g.updateSyncActivation(b,!0).then(function(b){var c=angular.element("#dgActivationDoneModel");c.modal("show"),a.getCompanyInfo()})}},a.importGoogleUsersOwnGroupStructure=function(b){a.employeedata=[],f.add(a.companyInfo).then(function(c){for(var d=0;d<b.length;d++){var e=b[d].email===a.companyInfo.syncAdminEmail,h={id:b[d].id,email:b[d].email,firstname:b[d].firstname,lastname:b[d].lastname,currentGroup:null,isFromGoogle:!0,isAutoSync:!1,adminEmail:a.companyInfo.syncAdminEmail,isSyncAdmin:e,syncAdmin:null,isSyncActivated:!0};a.employeedata.push(h)}g.addGoogleSyncedUsers(a.employeedata).then(function(b){a.data=b,b.success===!0&&o.all([f.updateSignature(b.empsAdded)["catch"](),l.syncEmployees()["catch"]()]).then(function(){a.getCompanyInfo(),n.defaultSuccessMessage(b.empsAdded.length+" Mitarbeiter wurden erfolgreich importiert und Mailtastic in deren Signatur integriert.")})["catch"](function(a){n.defaultSuccessMessage(Strings.errors.DATEN_NICHT_GELADEN)})})})},a.importUsersWithGoogleStructure=function(b){var c=[];b.forEach(function(a,b){c.push(new Promise(function(b,c){var d={title:"",activeCampaign:null,activeSignature:null,owner:null,isDefault:!1,createdAt:"",updatedAt:""},e=a.group.split("/"),f=e[e.length-1];d.title=f,k.addSyncGroup(d).then(function(c){var d=c.groupId;a.currentGroup=d,b()})["catch"](function(){c("could not add sync group")})}))}),o.all(c).then(function(){return f.add(a.companyInfo)}).then(function(c){a.employeedata=[];for(var d=0;d<b.length;d++){var e={id:b[d].id,email:b[d].email,firstname:b[d].firstname,lastname:b[d].lastname,currentGroup:b[d].currentGroup,isFromGoogle:!0,isAutoSync:!1,adminEmail:a.companyInfo.syncAdminEmail,isSyncAdmin:!1,syncAdmin:null,isSyncActivated:!0,group:a.NewGroupID};a.employeedata.push(e)}return g.addGoogleSyncedUsers(a.employeedata)}).then(function(b){b.success===!0&&o.all([f.updateSignature(b.empsAdded)["catch"](),l.syncEmployees()["catch"]()]).then(function(){a.getCompanyInfo(),n.defaultSuccessMessage(b.empsAdded.length+" Mitarbeiter wurden erfolgreich importiert. Und mailtastic in deren Signatur integriert.")})["catch"](function(a){n.defaultSuccessMessage(Strings.errors.DATEN_NICHT_GELADEN)})})["catch"](function(a){n.defaultErrorMessage(Strings.errors.DATEN_NICHT_GELADEN)})},a.navigateBack=function(){"googlesync"==a.object.currentPage&&null==a.companyInfo.syncInfoId&&(a.object.currentPage="newgooglesync",a.object={isConditionchecked:!1,isActivecheck:"",googleStructurechecked:"",isGoogleConditionchecked:!1,currentPage:"newgooglesync"})},a.abort=function(){m.location.reload()},a.selectAllUsers=function(){},a.isSelectedAllSyncUsers=function(b){void 0!=b&&(1==a.companyInfo.isAutomaticSync?a.groupMembersGoogle.forEach(function(a){a.isSyncChecked=b}):a.newUsers.forEach(function(a){a.isSyncChecked=b}))},a.isSelectedForAllUsers=function(b){void 0!=b&&a.groupMembersGoogle.forEach(function(a){a.isSyncChecked=b})},a.order=function(b){a.orderText=b,r=!r,a.groupMembersGoogle=q(a.groupMembersGoogle,a.orderText,r)},a.userRowClicked=function(a){},a.isMultiSelected=function(){if(null!=a.companyInfo.syncInfoId&&""==a.step.startSync)for(var b=0,c=0;c<a.groupMembersGoogle.length;c++)if(a.groupMembersGoogle[c].isSyncChecked&&(b++,b>1))return!0;return!1},a.isRowSelected=function(b,c,d){void 0!=b&&(a.rowCheckItems.allselectedUser=!1,1==c?a.newUsers[d].isSyncChecked=b.isSyncChecked:a.groupMembersGoogle[d].isSyncChecked=b.isSyncChecked)},a.countAsync=function(){a.cuntasyncdt=0;for(var b=0;b<=a.groupMembersGoogle.length-1;b++)1==a.groupMembersGoogle[b].isSyncActivated&&a.cuntasyncdt++},a.changeUserStatus=function(b,c){0==a.companyInfo.isAutomaticSync&&(a.selectedGroupMembers=b,1==c&&(a.syncInfoModel={totalUserCount:1,alreadyUserCount:0,alreadyUsersEmail:a.selectedGroupMembers.email,syncableMemebersCount:1,isAccepted:!1},a.selectedGroupMembers.isSyncActivated=!0,g.update(a.selectedGroupMembers).then(function(b){a.countAsync();var c=angular.element("#dgActivationDoneModel");c.modal("show"),a.getCompanyInfo()})))},a.importUser=function(b){var c=[];c.push(b),a.processGoogleUsersImport(c)},a.setUserManagedByGoogle=function(b){g.setUserManagedByGoogle(b).then(function(b){n.defaultSuccessMessage("Der Mitarbeiter wird jetzt über den Mailtastic-Google-Sync verwaltet."),a.getCompanyInfo()})["catch"](function(a){n.defaultErrorMessage(Strings.errors.DATEN_NICHT_GELADEN)})},a.deActivateSelectedUser=function(){a.cuntasyncdt="",a.selectedGroupMembers.isSyncActivated=!1,g.update(a.selectedGroupMembers).then(function(b){a.checkIfOneUserIsNotSynced(),a.getCompanyInfo();var c=angular.element("#dgSyncDeActivationModel");c.modal("hide");var d=angular.element("#dgdeActivationDoneModel");d.modal("show")})},a.checkIfOneUserIsNotSynced=function(){if(a.isSyncDeActivated=!1,a.groupMembersGoogle.length>0)var b=a.groupMembersGoogle.filter(function(a){return 0==a.isSyncActivated||1==a.isNotYetImported});void 0!=b&&b.length>0&&(a.isSyncDeActivated=!0)},a.changeSynchronizationType=function(b,c){a.syncUpdateModel.selectedSetting=b,1==c?(a.editSyncType="Automatisch (empfohlen)",a.isAutomaticSyncEdit=!0):(a.editSyncType="Manuell",a.isAutomaticSyncEdit=!1)},a.changeSynchronizationStructure=function(b,c){a.syncUpdateModel.selectedSetting=b,1==c?(a.editStructurType="GoogleApp-Strukur übernehmen",a.isGoogleStructureEdit=!0):(a.editStructurType="Neue Struktur erstellen",a.isGoogleStructureEdit=!1)},a.updateSyncType=function(){a.updateContent={adminID:"",isAutoSync:!1},1==a.object.isActivecheck?(a.companyInfo.isAutomaticSync=a.isAutomaticSyncEdit,f.update(a.companyInfo).then(function(b){a.updateContent.adminID=a.companyInfo.admin,1==a.isAutomaticSyncEdit?a.updateContent.isAutoSync=!0:a.updateContent.isAutoSync=!1;for(var c=[],d=0;d<a.groupMembersGoogle.length;d++)c.push(a.groupMembersGoogle[d].id);g.updateSyncUsersType(c,a.updateContent.isAutoSync).then(function(a){m.location.reload()})})):alert("haben Sie gelesen und die AGB akzeptiert.?");
},a.updateSyncStructure=function(){"GoogleApp-Strukur übernehmen"===a.editStructurType?a.companyInfo.isGoogleStructure=!0:"Neue Struktur erstellen"===a.editStructurType&&(a.companyInfo.isGoogleStructure=!1),f.update(a.companyInfo).then(function(a){a.success===!0?m.location.reload():n.defaultErrorMessage(Strings.errors.DATEN_NICHT_GELADEN)})}}]).controller("SyncInfoModelInstanceCtrl",["$scope","$modalInstance","dataObject","$uibModal","employeeService","browseService","alertService","googlesyncservice","authService","paymentService",function(a,b,c,d,e,f,g,h,i,j){a.syncInfoModel={totalUserCount:0,alreadyUserCount:0,alreadyUsersEmail:"",syncableMemebersCount:0,isAccepted:!1},a.syncInfoModel=c,a.paymentStatus={freeUsersCount:0,amountOfFreeMembers:0,billing_interval:"",daysLeft:0,forceAllow:!1,hasSubscription:!1,hasTestTime:!1},a.returnContent={isAllowed:!1},a.getUserStatus=function(){a.syncInfoModel.isAccepted=!1,j.getUserStatus().then(function(b){a.paymentStatus=b})},a.getUserStatus(),a.syncGoogleUsers=function(){1==a.syncInfoModel.isAccepted?(a.returnContent.isAllowed=!0,b.close(a.returnContent)):alert("haben Sie gelesen und die AGB akzeptiert.?")},a.abortsyncInfoModel=function(){b.close()}}])}(angular.module("mailtasticApp.integration",["ui.bootstrap"])),function(a){"use strict";function b(){return!("object"!=typeof Intl||!Intl||"function"!=typeof Intl.NumberFormat)}a.config(["$stateProvider","$locationProvider","$httpProvider","uiSelectConfig","$urlRouterProvider",function(a,b,c,d,e){c.defaults.headers.get||(c.defaults.headers.get={}),c.interceptors.push("AuthInterceptor"),c.defaults.headers.get["If-Modified-Since"]="Mon, 26 Jul 1997 05:00:00 GMT",e.otherwise("/login"),a.state("base",{"abstract":!0,templateUrl:"snippets/navigationsidebar.html",controller:"NavigationCtrl"}).state("base.account",{url:"/account",templateUrl:"account/main.html",controller:"AccountCtrl"}).state("betauser",{url:"/createbetauser",templateUrl:"createbeta/createbeta.html",controller:"CreateBetaCtrl"}).state("base.campaigns",{url:"/campaigns",templateUrl:"campaigns/structure.html",controller:"CampaignsCtrl"}).state("base.campaigns.campaignlist",{url:"/campaigns/list",params:{mode:{value:null},hiddenParam:"YES"},templateUrl:"campaigns/list/campaignlist.html",controller:"CampaignListCtrl"}).state("base.campaigns.campaigndetail",{url:"/campaigns/details/:campaignId",templateUrl:"campaigns/details/campaigndetails.html",controller:"CampaignDetailsCtrl",params:{campaignId:{value:null},hiddenParam:"YES"}}).state("base.dashboard",{url:"/dashboard",templateUrl:"dashboard/dashboard.html",controller:"DashboardCtrl"}).state("base.employees",{url:"/employees",templateUrl:"employees/structure.html",controller:"EmployeeStructureCtrl"}).state("base.employees.employeelist",{url:"/employees/list",templateUrl:"employees/list/employeeslist.html",controller:"EmployeesListCtrl"}).state("base.employees.employeedetail",{url:"/employee/details/:employeeId",params:{employeeId:{value:null},hiddenParam:"YES"},templateUrl:"employees/details/employeedetails.html",controller:"EmployeeDetailsCtrl"}).state("base.employees.groupdetails",{url:"/groups/details/:groupId",params:{groupId:{value:null},hiddenParam:"YES"},templateUrl:"groups/details/groupdetails.html",controller:"GroupDetailsCtrl"}).state("base.employees.grouplist",{url:"/groups/list",templateUrl:"groups/list/grouplist.html",controller:"GroupListCtrl"}).state("base.assistant",{url:"/create/assistant/:state",params:{state:{value:null}},templateUrl:"assistant/main.html",controller:"AssistantCtrl"}).state("base.integration",{url:"/installation?ac&eid&edit",templateUrl:"integration/integration.html",controller:"IntegrationCtrl"}).state("activationadmin",{url:"/activation/admin?ac&eid&edit",templateUrl:"login/login.html",controller:"loginCtrl"}).state("employeeactivation",{url:"/activation/employee?ac&eid&edit",templateUrl:"integration/integration.html",controller:"IntegrationCtrl"}).state("employeedatacompletion",{url:"/datacompletion/employee?ac&eid&edit",templateUrl:"integration/integration.html",controller:"IntegrationCtrl"}).state("base.starthelp",{url:"/starthelp",templateUrl:"help/start/start.html",controller:"StarthelpCtrl"}).state("base.faq",{url:"/faq",templateUrl:"help/faq/faq.html",controller:"FaqCtrl"}).state("resetpass",{url:"/passreset?pc&aid",templateUrl:"login/login.html",controller:"loginCtrl"}).state("register",{url:"/register?ref",templateUrl:"register/register.html",controller:"RegisterCtrl"}).state("registercomplete",{url:"/registercomplete",templateUrl:"register/register.html",controller:"RegisterCompleteCtrl",params:{email:{value:null}}}).state("base.booking",{url:"/booking?mode",templateUrl:"booking/main.html",controller:"BookingCtrl"}).state("base.signaturedesigner",{url:"/signature/designer/:signatureId",templateUrl:"signature/designer/main.html",controller:"SignatureDesignerCtrl"}).state("base.signaturelist",{url:"/signature/list",templateUrl:"signature/list/signatureList.html",controller:"SignatureListCtrl"}).state("base.signaturedetails",{url:"/signature/details/:signatureId",templateUrl:"signature/details/signatureDetails.html",controller:"SignatureDetailsCtrl"}).state("base.signaturerollout",{url:"/signature/rollout/:signatureId/:mode/:signatureTitle",templateUrl:"signature/rollout/rollout_main.html",controller:"SignatureRolloutCtrl",params:{signatureId:{value:null},mode:{value:"create"},signatureTitle:{value:null}}}).state("login",{url:"/login",templateUrl:"login/login.html",controller:"loginCtrl",params:{force:{value:!1}},hiddenParam:"YES",resolve:{user:["$q","StorageFactory","userService",function(a,b,c){var d=a.defer(),e=b.get("accessToken"),f=b.get("userId");if(null!=e&&""!=e&&null!=f&&""!=f){var g={accessToken:e,userId:f};c.checkToken(g).then(function(a){a.success===!0?d.reject("loggedIn"):d.resolve()})}else d.resolve();return d.promise}]}}).state("base.googlesync",{url:"/googleappsync",templateUrl:"googlesync/main.html",controller:"GoogleSyncCtrl"}).state("base.versacommerce",{url:"/versacommerce",templateUrl:"versacommerce/main.html",controller:"VersaCommerceCtrl"})}]).run(["$rootScope","StorageFactory","userService","$state","$location","$window","paymentService","intercomService",function(a,b,c,d,e,f,g,h){a.strings=Strings,a.recalcAvatars=function(){$(document).trigger("regenerateAvatars")},a.$on("$stateChangeError",function(a,b,c,e,f,g){"login"===b.name&&"loggedIn"===g&&(h.userLoggedIn(),d.go("base.dashboard",{},{reload:!1}))}),a.$on("$stateChangeSuccess",function(c,d,i,j,k){f.ga("send","pageview",{page:e.url()}),f.Appcues&&f.Appcues.start(),d.name.contains("base")&&g.getUserStatus().then(function(b){b&&(b.forceAllow===!0?(a.trialarea.showtimeleft=!1,a.trialarea.daysLeft=0,a.trialarea.showexpired=!1):b.hasSubscription===!0?(a.trialarea.showtimeleft=!1,a.trialarea.daysLeft=0,a.trialarea.showexpired=!1):b.hasTestTime===!0?(a.trialarea.showtimeleft=!0,a.trialarea.showexpired=!1,a.trialarea.daysLeft=b.daysLeft):a.trialarea.showexpired=!0)}),h.update(),"base.employees.employeelist"===d.name&&"base.employees.employeelist"!==j.name?b.clearSelectedListData("employee"):"base.employees.grouplist"===d.name&&"base.employees.grouplist"!==j.name?b.clearSelectedListData("group"):"base.campaigns.campaignlist"===d.name&&"base.campaigns.campaignlist"!==j.name&&b.clearSelectedListData("campaign"),$(document).unbind("copy")}),a.Math=window.Math,a.labels={views:"Impressions",clicks:"Clicks",rate:"Click Rate"},a.trialarea={showexpired:!1,showtimeleft:!1,daysleft:0},h.userLoggedIn()}]).value("cgBusyDefaults",{message:"Inhalte werden geladen",backdrop:!1}).controller("NavigationCtrl",["$scope","$location","StorageFactory","$state","$rootScope","userService","alertService","intercomService","$uibModal","groupsService","$translate",function(a,b,c,d,e,f,g,h,i,j,k){a.getClass=function(a){return b.path().substr(0,a.length)==a?"active":""},a.data={groups:[]},a.changeLanguage=function(a){k.use(a)},a.initData=function(){a.getGroups()},a.startTour=function(){var a="tour/tour_modal_main.html",b=i.open({animation:!0,templateUrl:a,controller:"TourModalCtrl",size:"lg",backdrop:"static",windowClass:"tourmodal"});b.result.then(function(){f.setTourWasSeen().then()},function(){f.setTourWasSeen().then()})},a.getClassEmp=function(){var a=b.path();return"/employees/employees/list"===a||"/employees/employee/details"===a?"active":""},a.getClassIntegration=function(){var a=b.path();return"/installation"===a?"active":""},a.getClassGroup=function(){var a=b.path();return"/employees/groups/list"===a||"/employees/groups/details"===a?"active":""},a.getClassHelp=function(){return"/integration"==b.path().substr(0,14)||"/start"==b.path().substr(0,7)||"/help"==b.path().substr(0,6)?"active":""},a.logout=function(){c.remove(["logged_in","accessToken","userId"]),e.trialarea.showexpired=!1,e.trialarea.showtimeleft=!1,h.shutDown(),d.go("login",{},{reload:!1})},a.getShown=function(){var a=b.path().substr(b.path().lastIndexOf("/"));return"/login"!=a},a.getElementShown=function(){var a=b.path().split("/"),c=a[a.length-1],d=a[a.length-2];return"activation"!==d||"employee"!==c},a.getCurrentLink=function(){return""},a.openOwnIntegrationPage=function(){f.getAccountData().then(function(a){var b=a.activationCode,c=a.id;g.integrationAdditionalInfoForAdminModal(function(){d.go("base.integration",{ac:b,eid:c})})})}}]).run(["$rootScope","$http",function(a,b){a.userdata={companyName:"netstag",activeCampaigns:2,totalDisplays:4,employees:8},b.defaults.headers.common["Access-Control-Allow-Headers"]="*"}]).directive("previewiniframe",[function(){function a(a,b){var c=document.createElement("iframe"),d=b[0];d.appendChild(c);var e=c.contentDocument.body;a.$watch("content",function(){setTimeout(function(){e.innerHTML=a.content,a.$apply()},500)})}return{link:a,restrict:"E",scope:{content:"="}}}]).config(["$translateProvider",function(a){a.translations("en",en),{BUTTON_TEXT_EN:"english",BUTTON_TEXT_DE:"german"},a.translations("de",de),{BUTTON_TEXT_EN:"english",BUTTON_TEXT_DE:"german"},a.useStaticFilesLoader({prefix:"locale/",suffix:".json"}),a.preferredLanguage("de"),a.fallbackLanguage("en"),a.useSanitizeValueStrategy(null)}]).factory("AuthInterceptor",["$q","$injector","intercomService",function(a,b,c){return{request:function(a){return a},response:function(d){if(401===d.status||403===d.status){var e=b.get("StorageFactory");e.remove("accessToken"),b.get("browseService").navigate("/login"),c.shutDown()}return a.resolve(d)},responseError:function(d){if(401===d.status||403===d.status){var e=b.get("StorageFactory");e.remove("accessToken"),b.get("browseService").navigate("/login"),c.shutDown()}return a.reject(d)}}}]).filter("germannumber",function(){return function(a){var c=a||"";return c=b()?c.toLocaleString("de-DE",{maximumFractionDigits:2}):c.toFixed(2)}});moment.locale("de")}(angular.module("mailtasticApp",["ui.bootstrap","angular-loading-bar","ui.router","uiSwitch","ngFileUpload","cgBusy","ui.select","ngSanitize","angular-chartist","color.picker","LocalStorageModule","mailtasticApp.factories","mailtasticApp.services","mailtasticApp.modal","mailtasticApp.modalGroup","mailtasticApp.modalExpired","mailtasticApp.modalCampaign","mailtasticApp.modalEmployee","mailtasticApp.modalPassReset","mailtasticApp.groupSigModal","mailtasticApp.sigEditFieldModal","mailtasticApp.sigTemplatesModal","mailtasticApp.installation","mailtasticApp.starthelp","mailtasticApp.faq","mailtasticApp.login","mailtasticApp.dashboard","mailtasticApp.campaigns","mailtasticApp.employees","mailtasticApp.groups","mailtasticApp.account","mailtasticApp.register","mailtasticApp.assistant","mailtasticApp.booking","mailtasticApp.signature","mailtasticApp.integration","mailtasticApp.employeeEditUserInfoModal","pascalprecht.translate"]));;GlobalConfig={};var env="amazon";switch(env){case"local":GlobalConfig.config={apiUrl:"http://localhost:3333"};break;case"amazon":GlobalConfig.config={apiUrl:"http://default-environment-q3w7vutw76.elasticbeanstalk.com"};break;case"production":GlobalConfig.config={apiUrl:"https://www.app.mailtastic.de/api"}}GlobalConfig.config.env=env;;Strings={},Strings.errors={TECHNISCHER_FEHLER:"Leider ist ein technischer Fehler aufgetreten. Bitte versuchen Sie es erneut oder wenden Sich an den technischen Support unter 06182 955 70 00 oder support@mailtastic.de",DATEN_NICHT_GELADEN:"Die Daten konnten nicht geladen werden. Sollten weiterhin Probleme auftreten wenden Sie sich bitte den Support. Herzlichen Dank für Ihr Verständnis.",ACCOUNT_ACTIVATION_ERROR_EMPLOYEE:"Ihr Account konnte leider nicht zugeordnet werden. Bitte wenden Sie sich an die Person, die Sie eingeladen hat oder direkt an den kostenlosten Support von mailtastic unter 06182 955 70 00 oder support@mailtastic.de"},Strings.infos={CAMPAIGN_GROUP_REMOVED:"Die Kampagne wird von dieser Abteilung nun nicht mehr verwendet. Bitte denken Sie daran der Abteilung bei Bedarf eine neue Kampagne zuzuweisen.",CAMPAIGN_GROUPS_REMOVED:"Die Kampagne wird von diesen Abteilungen nun nicht mehr verwendet. Bitte denken Sie daran diesen Abteilungen bei Bedarf eine neue Kampagne zuzuweisen.",CAMPAIGN_GROUP_ADDED:"Der Abteilung wurde erfolgreich die Kampagne zugewiesen."},Strings.supportdata={supporttelnr:"06182 955 70 00",supportemail:"support@mailtastic.de"},Strings.registration={PASSWORD_TOO_SHORT:"Ihr Passwort muss mindestens 6 Zeichen lang sein. Bitte geben Sie ein neues Passwort ein.",PASSWORD_REP_NOT_EQU:"Ihre eingegebenen Passwörter stimmen nicht überein. Bitte versuchen Sie es erneut.",ACCOUNT_ALREADY_CREATED:"Sie verfügen bereits über einen Account. Bitte loggen Sie sich mit Ihren Daten ein. Sollten Sie Ihr Passwort vergessen haben, können Sie dies jederzeit zurücksetzen lassen. Bitte versuchen Sie es erneut oder wenden Sich an den technischen Support unter 06182 955 70 00 oder support@mailtastic.de",ACCOUNT_SUCCESSFULL_CREATED:"Ihr Account wurde erfolgreich aktiviert. Sie können sich nun mit Ihren Zugangsdaten einloggen."},Strings.login={ACTIVATION_NEEDED:"Bitte aktivieren Sie zuerst Ihren Account, indem Sie auf den Link in der E-Mail klicken. Sollten Sie keine E-Mail erhalten haben, wenden Sie sich bitte an den technischen Support unter 06182 955 70 00 oder support@mailtastic.de - Herzlichen Dank.",LOGIN_WRONG:"Login konnte nicht durchgeführt werden. Bitte überprüfen Sie Ihre Login-Daten oder wenden Sie sich an den Support unter unter 06182 955 70 00 oder support@mailtastic.de - Herzlichen Dank."},Strings.passreset={EMAIL_NOT_EQU:"Die E-Mail-Adressen stimmen nicht überein. Bitte versuchen Sie es erneut.",NO_ACCOUNT:"Sie verfügen noch über keinen aktivierten Account. Bitte registrieren Sie einen Account und aktivieren Sie diesen. Sollte es weiterhin zu Problemen kommen, wenden Sie sich bitte an den technischen Support unter 06182 955 70 00 oder support@mailtastic.de - Herzlichen Dank.",PASS_MAIL_SENT:"Sie haben eine E-Mail mit weiteren Anweisungen zum Zurücksetzen des Passworts erhalten.",PASS_SUC_RESET:"Ihr Passwort wurde erfolgreich neu gesetzt. Bitte loggen Sie sich nun mit Ihrem neuen Passwort ein."},Strings.employeeimport={EXCEL_INVALID:"<br><strong>Es ist ein Problem aufgetreten</strong><br><br>Ihre Datei konnte leider nicht korrekt eingelesen werden. Bitte verwenden Sie die vorgegebene Beispieldatei.<br><br> Sollte es weiterhin zu Problemen kommen, wenden Sie sich bitte an den technischen Support unter 06182 955 70 00 oder support@mailtastic.de - Herzlichen Dank.",EXCEL_NO_ENTRY:"<br><strong>Es ist ein Problem aufgetreten</strong><br><br>Ihre Datei enthält keine Mitarbeiter. Bitte tragen Sie die gewünschten Mitarbeiter in Ihrer Excel-Datei ein.<br><br> Sollte es weiterhin zu Problemen kommen, wenden Sie sich bitte an den technischen Support unter 06182 955 70 00 oder support@mailtastic.de - Herzlichen Dank.",EXCEL_EMAIL_MISSINS:"<br><strong>Es ist ein Problem aufgetreten</strong><br><br>In Ihrer Datei wurde bei mindestens einem Mitarbeiter keine E-Mail-Adresse eingetragen.<br><br> Bitte überprüfen Sie Ihre Excel-Datei und versuchen Sie es erneut. Sollte es weiterhin zu Problemen kommen, wenden Sie sich bitte an den technischen Support unter 06182 955 70 00 oder support@mailtastic.de - Herzlichen Dank.",EXCEL_IMPORT_SUCCESSFUL:"Ihre Mitarbeiter wurden erfolgreich importiert.",EXCEL_IMPORT_UNSUCCESSFUL:"<br><strong>Es ist ein Problem aufgetreten</strong><br><br>Ihre Mitarbeiter konnten nicht korrekt importiert werden.<br><br> Bitte überprüfen Sie die Liste Ihrer Mitarbeiter und importieren evt. fehlende erneut. Sollte es weiterhin zu Problemen kommen, wenden Sie sich bitte an den technischen Support unter 06182 955 70 00 oder support@mailtastic.de - Herzlichen Dank.",EXCEL_ALL_EMAIL_EXISTENT:"<br><strong>Es ist ein Problem aufgetreten</strong><br><br>Alle Mitarbeiter in der hochgeladenen Liste sind bereits vorhanden. Es wurde kein neuer Mitarbeiter hinzugefügt.",EXCEL_WRONG_FORMAT:'<br><strong>Es ist ein Problem aufgetreten</strong><br><br>Ihre hochgeladene Datei hat ein falsches Format. Bitte verwenden Sie nur Excel-Dateien mit der Endung "xlsx".<br><br> Sollte es weiterhin zu Problemen kommen, wenden Sie sich bitte an den technischen Support unter 06182 955 70 00 oder support@mailtastic.de - Herzlichen Dank.',EXCEL_EMAIL_MALFORMED:"<br><strong>Es ist ein Problem aufgetreten</strong><br><br>Eine der eingegebenen E-Mail-Adressen ist nicht korrekt. Bitte überprüfen Sie die folgende Adresse:"},Strings.payment={errors:{SYNC_SUBSCRIPTION_MISSING:"<br><strong>Es ist ein Problem mit Ihrem Abonnement aufgetreten</strong><br><br>Wenden Sie sich bitte an den Support unter 06182 955 70 00 oder support@mailtastic.de - Herzlichen Dank.",CHANGE_BILLING_INFO_FAILED:"<br><strong>Es ist ein Problem aufgetreten</strong><br><br>Ihre Zahlungsinformationen konnten nicht aktualisiert werden. Sollten weiterhin Probelem auftreten, wenden Sie sich bitte an den Support unter 06182 955 70 00 oder support@mailtastic.de - Herzlichen Dank.",CHANGE_PAYMENT_INTERVAL:"Ihre Abonnement konnte nicht erfolgreich aktualisiert werden. Wenden Sie sich bitte an den Support unter 06182 955 70 00 oder support@mailtastic.de - Herzlichen Dank."},success:{CHANGE_BILLING_INFO_SUCCESS:"Ihre Zahlungsdaten wurden erfolgreich aktualisiert.",CHANGE_PAYMENT_INTERVAL:"Ihre Zahlungsdaten wurden erfolgreich aktualisiert."}},Strings.signature={list:{errors:{DELETION_FAILED:"<strong>Die Signatur konnte leider nicht gelöscht werden.</strong><br><br>Wenden Sie sich bitte an den Support unter 06182 955 70 00 oder support@mailtastic.de - Herzlichen Dank."},success:{DELETION_COMPLETED:"Die Signatur wurde gelöscht."}},designer:{errors:{CREATION_FAILED:""},success:{CREATION_COMPLETED:"Ihre Signatur wurde erfolgreich erstellt."}}};;!function(a,b){function c(a,c){var d=b.createElement("canvas"),e=d.getContext("2d"),c=c||50,f="rgb(209, 209, 234)";return d.width=c,d.height=c,e.font="20.0px Roboto Condensed",e.textAlign="center",e.fillStyle=f,e.fillRect(0,0,d.width,d.height),e.fillStyle="#FFF",e.fillText(a,c/2,c/1.5),dataURI=d.toDataURL(),d=null,dataURI}a.AvatarImage=c}(window,document),function(a,b){function c(){for(var a=b.querySelectorAll("img[letters]"),c=0,d=a.length;c<d;c++){var e=a[c];e.src=AvatarImage(e.getAttribute("letters"),e.getAttribute("width")),e.removeAttribute("letters")}}b.addEventListener("DOMContentLoaded",function(a){setTimeout(function(){c()},500)}),$(document).on("regenerateAvatars",function(a){setTimeout(function(){c()},100)})}(window,document);;"use strict";function alert(a){bootbox.alert(a)}angular.module("mailtasticApp.modal",[]),angular.module("mailtasticApp.modalCampaign",["ui.bootstrap"]).controller("CampaignModalCtrl",["$scope","$uibModal","$log","campaignService",function(a,b,c,d){a.items=["item1","item2","item3"],a.animationsEnabled=!0,a.open=function(d){var e={id:d},f=b.open({animation:a.animationsEnabled,templateUrl:"campaigns/modal/campaign_modal.html",controller:"CampaignModalInstanceCtrl",size:"lg",resolve:{campaignId:e},windowClass:"employeeModal"});f.result.then(function(b){a.selected=b},function(){c.info("Modal dismissed at: "+new Date)})},a.toggleAnimation=function(){a.animationsEnabled=!a.animationsEnabled}}]).controller("CampaignModalInstanceCtrl",["$scope","$modalInstance","campaignId","campaignService","browseService","$state","alertService",function(a,b,c,d,e,f,g){a.modaloptions={heading:"Kampagne erstellen",mode:"create"},a.campaigndata={title:"",url:"",image:""},c&&c.id&&(c=c.id,a.modaloptions.heading="Kampagne bearbeiten",d.getOne(c).then(function(b){a.campaigndata=b,a.modaloptions.mode="update"})),a.checkfile=function(a){a&&0===a.length&&alert("Bitte stellen Sie sicher, dass die Dateigröße unter 1MB liegt und es sich um eine Bilddatei handelt.")},a.myPromise=null,a.createCampaign=function(){"create"===a.modaloptions.mode?a.loadingPromise=d.add(a.campaigndata).then(function(a){if(a.success===!0){var c=a.id;c?f.go("base.campaigns.campaigndetail",{campaignId:c}):e.reload(),b.close()}else alert(Strings.errors.TECHNISCHER_FEHLER)}):"update"===a.modaloptions.mode&&(a.loadingPromise=d.update(a.campaigndata).then(function(a){a.success===!0?(e.reload(),g.defaultSuccessMessage("Ihre Änderungen wurden erfolgreich gespeichert."),b.close()):alert(Strings.errors.TECHNISCHER_FEHLER)}))},a.cancel=function(){b.dismiss("cancel")}}]);;"use strict";function alert(a){bootbox.alert(a)}angular.module("mailtasticApp.sigEditFieldModal",[]).controller("SignatureDataModalCtrl",["$scope","$modalInstance","tagObject","additionalLabel","alertService",function(a,b,c,d,e){a.modaloptions={heading:"",headingAddition:"",mode:"create"},a.formdata={tag:"",value:""},a.changedOtherThanDimension=!1,a.imageDimensionsAvailable=!1,a.changedImageDimension=!1,a.changedLinkColor=!1,a.changedOtherThanLinkColor=!1,a.imageFormData={showAs:"image",altText:"",linkText:"",image:"",url:"",whichImage:"default",initialdimension:{width:"",height:""}},a.imageDimensionData={mode:"default",width:"",height:""},a.linkFormData={linkText:"",url:""},a.linkColorData={color:""},a.whichImageChanged=function(){"default"===a.imageFormData.whichImage&&(a.imageFormData.image=c.defaultImage),a.changedOtherThanDimension=!0},a.initData=function(){switch(a.$watch("linkColorData.color",function(b,c){b!==c&&(a.changedLinkColor=!0)}),a.imageDimensionsAvailable=!1,a.modaloptions.heading=c.label,a.modaloptions.headingAddition=d.value,a.formdata.tag=c.tag,a.formdata.value=c.value,c.type){case"image":c.value&&"object"==typeof c.value||(c.value={showAs:"text"}),a.imageFormData.altText=c.value.altText,a.imageFormData.image=c.value.image,a.imageFormData.linkText=c.value.linkText,a.imageFormData.showAs=c.value.showAs,a.imageFormData.url=c.value.url,a.imageFormData.initialdimension=c.value.initialdimension,a.imageDimensionData.mode=c.imgdimension?c.imgdimension.mode:"default",c.imgdimension&&c.imgdimension.width?(a.imageDimensionData.width=c.imgdimension.width,a.imageDimensionData.height=c.imgdimension.height,a.imageDimensionsAvailable=!0):c.value.initialdimension&&c.value.initialdimension.width?(a.imageDimensionData.width=c.value.initialdimension.width,a.imageDimensionData.height=c.value.initialdimension.height,a.imageDimensionsAvailable=!0):(a.imageDimensionData.width="",a.imageDimensionData.height="",a.imageDimensionsAvailable=!1),c.value.whichImage?a.imageFormData.whichImage=c.value.whichImage:a.imageFormData.whichImage="default";for(var b in a.linkFormData)a.linkFormData[b]=c.value[b];break;case"singlevalue":break;case"link":for(var b in a.linkFormData)a.linkFormData[b]=c.value[b];c.linkcolor?a.linkColorData.color=c.linkcolor:a.linkColorData.color="#000000";break;default:e.defaultErrorMessage(Strings.errors.DATEN_NICHT_GELADEN)}a.whichImageChanged(),a.changedOtherThanDimension=!1,a.changedImageDimension=!1,a.changedLinkColor=!1},a.initData(),a.checkfile=function(b){a.changedOtherThanDimension=!0,b&&0===b.length?e.defaultErrorMessage("Bitte stellen Sie sicher, dass die Dateigröße kleiner als 1MB ist und es sich um eine Bilddatei handelt."):b&&b[0].$ngfHeight&&(a.imageDimensionData.width=b[0].$ngfWidth,a.imageDimensionData.height=b[0].$ngfHeight,a.imageDimensionsAvailable=!0)},a.myPromise=null,a.saveValue=function(){function b(){c.value=a.formdata.value,a.ok(c)}function d(){if(c.value=a.imageFormData,"text"===c.value.showAs)c.value.image="";else if(c.value.image.$ngfHeight){if(c.value.initialdimension||(c.value.initialdimension={width:"",height:""}),c.value.initialdimension.width=c.value.image.$ngfWidth,c.value.initialdimension.height=c.value.image.$ngfHeight,c.imgdimension.width=c.value.image.$ngfWidth,c.imgdimension.height=c.value.image.$ngfHeight,"custom"===a.imageDimensionData.mode){var b=c.value.image.$ngfWidth,d=c.value.image.$ngfHeight,e=b/a.imageDimensionData.width,f=d/e;c.imgdimension.height=f,c.imgdimension.width=a.imageDimensionData.width,c.imgdimension.mode="custom"}}else if("custom"===a.imageDimensionData.mode&&c.value.initialdimension&&c.value.initialdimension.width){var b=c.value.initialdimension.width,e=b/a.imageDimensionData.width,f=c.value.initialdimension.height/e;c.imgdimension.height=f,c.imgdimension.width=a.imageDimensionData.width,c.imgdimension.mode="custom"}var g=[];a.changedOtherThanDimension===!0&&a.changedImageDimension===!0?(g.result="everythingchanged",g.data=c,a.ok(g)):a.changedOtherThanDimension===!0?(g.result="everythingbutdimension",g.data=c,a.ok(g)):a.changedImageDimension===!0?(g.result="onlydimensionchanged",g.data=c,a.ok(g)):a.ok(c)}function e(){c.value=a.linkFormData,c.linkcolor=a.linkColorData.color;var b=[];a.changedOtherThanLinkColor===!0&&a.changedLinkColor===!0?(b.result="everythingchanged",b.data=c,a.ok(b)):a.changedOtherThanLinkColor===!0?(b.result="everythingbutcolor",b.data=c,a.ok(b)):a.changedLinkColor===!0?(b.result="onlycolorchanged",b.data=c,a.ok(b)):a.ok(c)}if(c.tag===a.formdata.tag)switch(c.type){case"singlevalue":b();break;case"image":d();break;case"link":e()}else alert(Strings.errors.DATEN_NICHT_GELADEN)},a.ok=function(a){b.close(a)},a.cancel=function(){b.dismiss("cancel")}}]);;function validateDependencies(){angular.module("app")._invokeQueue.forEach(validateDependenciesForType),angular.module("filters")._invokeQueue.forEach(validateDependenciesForType),angular.module("services")._invokeQueue.forEach(validateDependenciesForType),angular.module("filters")._invokeQueue.forEach(validateDependenciesForType)}function validateDependenciesForType(a){for(var b=a[2][1].toString(),c=b.substring(b.indexOf("(")+1,b.indexOf(")")).split(","),d=0;d<c.length;d++){var e=c[d].trim();e.indexOf("$")>=0&&(e="\\"+e);var f=new RegExp(e,"gi"),g=(b.match(f)||[]).length;1==g&&console.log(a[2][0]+" : "+e)}}function validateResources(){angular.module("app",[]).run(function(a,b){function c(c,d){for(key in d)d.hasOwnProperty(key)&&(d[key]=!1);for(var e=[],f=["app.js","services.js","filters.js","controllers.js"],g=0;g<f.length;g++){var h=a({url:"js/{0}".format(f[g])}).then(function(a){var b=a.data.match(/\$translate.instant\(("|')([A-Za-z0-9_\[\]]*?)("|')/g);if(!isEmpty(b))for(var e=0;e<b.length;e++){var f=b[e].replace("$translate.instant","").replace(/[^\w\s]/gi,"");void 0===d[f]?console.log(c+" : "+f):d[f]=!0}});e.push(h)}for(var i=["dashboard.html","login.html"],g=0;g<i.length;g++){var h=a({url:"dashboard/{0}".format(i[g])}).then(function(a){var b=a.data.match(/(translate|translate-attr-placeholder)=("|')([A-Za-z0-9_\[\]]*?)("|')/g);if(!isEmpty(b))for(var e=0;e<b.length;e++){var f=b[e].replace("translate=","").replace("translate-attr-placeholder=","").replace(/[^\w\s]/gi,"");void 0===d[f]?console.log(c+" : no match : "+f):d[f]=!0}});e.push(h)}b.all(e)["finally"](function(){for(key in d)d.hasOwnProperty(key)&&d[key]===!1&&key.indexOf("Guide")==-1&&console.log(c+" : not used: "+key)})}c("en",en)})}validateResources();;"use strict";function alert(a){bootbox.alert(a)}angular.module("mailtasticApp.employeeEditUserInfoModal",[]).controller("EmployeeUserInfoEditModalCtrl",["$scope","$uibModal","$log","signatureHelperService",function(a,b,c,d){a.animationsEnabled=!0,a.open=function(d){var e={employeeId:d},f=b.open({animation:a.animationsEnabled,templateUrl:"employees/details/employeeDataEditModal/employeeUserInfoEdit_modal.html",controller:"EmployeeUserInfoEditModalInstanceCtrl",resolve:{dataObject:e},windowClass:"employeeModal"});f.result.then(function(a){},function(){c.info("Modal dismissed at: "+new Date)})},a.toggleAnimation=function(){a.animationsEnabled=!a.animationsEnabled}}]).controller("EmployeeUserInfoEditModalInstanceCtrl",["$scope","$modalInstance","dataObject","employeeService","alertService","$uibModal","signatureHelperService","$q","browseService",function(a,b,c,d,e,f,g,h,i){a.modaloptions={heading:"Neuen Mitarbeiter hinzufügen",saveButtonText:"Hinzufügen",mode:"create",currentStep:"choose",cameFromChoose:!1,groupId:null},a.employeedata={email:"",firstname:"",lastname:"",currentGroup:""},a.data={employees:[],selectedEmployees:[],userInfoFormFields:[]},a.groups=[],a.showPreview=!1,a.init=function(){c&&(c.employeeId?(a.employeedata.id=c.employeeId,g.loadJsonFieldStructure().then(function(a){return g.dataManager.fields=a,h.resolve()}).then(function(){return g.getEmployeeAccountData(a.employeedata.id,g.dataManager.fields).then(function(){return h.resolve()})}).then(function(){if(g.dataManager&&g.dataManager.signatureData&&g.dataManager.employeeData&&g.dataManager.fields){try{for(var b=[g.dataManager.fields.employee.groups],c=[],d=0;d<b.length;d++)for(var e=b[d],f=0;f<e.length;f++)for(var i=0;i<e[f].entries.length;i++)c.push(e[f].entries[i])}catch(j){return h.reject("getUserFieldsToComplete: exception on iterating over fields")}return a.data.userInfoFormFields=c,h.resolve()}return h.reject("prepare user fields in employee userinfo edit modal: not all data was loaded")})["catch"](function(a){e.defaultErrorMessage(Strings.errors.DATEN_NICHT_GELADEN)})):e.defaultErrorMessage(Strings.errors.DATEN_NICHT_GELADEN))},a.init(),a.saveEmployeeInfoData=function(){var b=g.prepareDataForBackend("employee",g.dataManager.fields);b?d.setEmployeeInfo(a.employeedata.id,b).then(function(b){b.success!==!0?e.defaultErrorMessage(Strings.errors.TECHNISCHER_FEHLER):(e.defaultSuccessMessage("Ihre Änderungen wurden gespeichert."),a.cancel(),i.reload())}):e.defaultErrorMessage(Strings.errors.TECHNISCHER_FEHLER)},a.loadingPromise=null,a.cancel=function(){b.dismiss("cancel")}}]);;"use strict";function alert(a){bootbox.alert(a)}angular.module("mailtasticApp.modalEmployee",[,"ui.bootstrap"]).controller("EmployeeModalCtrl",["$scope","$uibModal","$log","groupsService",function(a,b,c,d){a.animationsEnabled=!0,a.open=function(d,e,f){var g={employeeId:d,groupId:e,step:f},h=b.open({animation:a.animationsEnabled,templateUrl:"employees/modal/employee_modal.html",controller:"EmployeeModalInstanceCtrl",resolve:{dataObject:g},windowClass:"employeeModal"});h.result.then(function(a){},function(){c.info("Modal dismissed at: "+new Date)})},a.toggleAnimation=function(){a.animationsEnabled=!a.animationsEnabled}}]).controller("EmployeeModalInstanceCtrl",["$scope","$modalInstance","dataObject","employeeService","browseService","groupsService","XLSXReaderService","paymentService","alertService","$uibModal",function(a,b,c,d,e,f,g,h,i,j){a.modaloptions={heading:"Neuen Mitarbeiter hinzufügen",saveButtonText:"Hinzufügen",mode:"create",currentStep:"choose",cameFromChoose:!1,groupId:null},a.employeedata={email:"",firstname:"",lastname:"",currentGroup:""},a.data={employees:[],selectedEmployees:[]},a.groups=[],a.showPreview=!1,a.importdata={json:[],amountOfEmployees:null,filename:""},a.fileChanged=function(b){a.sheets=[],a.excelFile=b[0],a.importdata.filename=a.excelFile.name;var c=/(?:\.([^.]+))?$/;return"xlsx"!==c.exec(a.importdata.filename)[1]?void alert(Strings.employeeimport.EXCEL_WRONG_FORMAT):void g.readFile(a.excelFile,a.showPreview).then(function(b){b.json?Array.isArray(b.json)&&0!==b.json.length?(a.importdata.json=b.json,a.checkImportData()):alert(Strings.employeeimport.EXCEL_NO_ENTRY):alert(Strings.employeeimport.EXCEL_INVALID)})},a.checkImportData=function(){var b=/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,c=[],e=[];a.loadingPromise=d.get().then(function(d){for(var f=0;f<a.importdata.json.length;f++){if(!a.importdata.json[f].Email)return alert(Strings.employeeimport.EXCEL_EMAIL_MISSINS),void(a.importdata.json=null);if(b.test(a.importdata.json[f].Email)===!1)return alert(Strings.employeeimport.EXCEL_EMAIL_MALFORMED+"<br>"+a.importdata.json[f].Email),void(a.importdata.json=null);var g=jQuery.grep(d,function(b,c){return b.email===a.importdata.json[f].Email});g.length>0?e.push(a.importdata.json[f].Email):c.push(a.importdata.json[f].Email),a.importdata.json[f].Vorname||(a.importdata.json[f].Vorname=""),a.importdata.json[f].Nachname||(a.importdata.json[f].Nachname="")}a.importdata.validEntrys=c,a.importdata.alreadyInSystemEntrys=e,a.importUsers()})},a.sendExampleMail=function(){d.sendInvitationTestmail().then(function(a){a.success===!0?i.defaultSuccessMessage("Wir haben Ihnen eine Beispiel-Einladungs-E-Mail gesendet."):i.defaultErrorMessage(Strings.errors.DATEN_NICHT_GELADEN)},function(a){i.defaultErrorMessage(Strings.errors.DATEN_NICHT_GELADEN)})},a.importUsers=function(){function b(){c(!0)}function c(b){if(!$("#importmodalcheckbox").prop("checked")&&b!==!0)return!1;if(a.importdata.json.length<1)alert(Strings.employeeimport.EXCEL_NO_ENTRY);else if(a.importdata.validEntrys.length<1);else{var c=null;c="empty"===a.employeedata.currentGroup?null:a.employeedata.currentGroup,d.addMany(a.importdata.json,c).then(function(b){if(b.success===!0){var c=b.idsAdded;d.sendInvitations(c).then(function(b){if(b.success===!0){var c=a.importdata.json.length;b.adresses&&(c=a.importdata.json.length-b.adresses.length),alert("<strong>"+c+" Mitarbeiter wurde(n) erfolgreich importiert.</strong><br>Diese haben eine Einladung zu Mailtastic, sowie die Anleitung zum selbstständigen Einbinden des Kampagnen-Banners erhalten.")}else i.defaultErrorMessage(Strings.errors.DATEN_NICHT_GELADEN);h.syncEmployees().then(function(a){}),document.getElementById("employeeimport").value=null,a.importdata.json=[],e.reload(),a.cancel()})["catch"](function(a){i.defaultErrorMessage(Strings.errors.DATEN_NICHT_GELADEN)})}else alert(76===b.code?Strings.employeeimport.EXCEL_ALL_EMAIL_EXISTENT:Strings.employeeimport.EXCEL_IMPORT_UNSUCCESSFUL)})}}return"empty"===a.employeedata.currentGroup?void i.defaultErrorMessage("Bitte wählen Sie die Abteilung aus, der die neuen Mitarbeiter hinzugefügt werden sollen."):void(a.loadingPromise=h.getUserStatus().then(function(d){if(d.success===!1)alert(Strings.errors.DATEN_NICHT_GELADEN);else{for(var e="",f=0;f<a.importdata.alreadyInSystemEntrys.length;f++)e+=a.importdata.alreadyInSystemEntrys[f],f!==a.importdata.alreadyInSystemEntrys.length-1&&(e+=", ");if(1==d.forceAllow)i.importEmployeeFree({filename:a.importdata.filename,totalAmount:a.importdata.json.length,validAmount:a.importdata.validEntrys.length,freeAmount:d.amountOfFreeMembers,alreadyExistant:a.importdata.alreadyInSystemEntrys.length,emailsAsString:e},b,function(){});else if(d.hasTestTime===!0)i.importEmployeeFree({filename:a.importdata.filename,totalAmount:a.importdata.json.length,validAmount:a.importdata.validEntrys.length,freeAmount:d.amountOfFreeMembers,alreadyExistant:a.importdata.alreadyInSystemEntrys.length,emailsAsString:e},b,function(){});else if(d.hasSubscription===!0)d.amountOfFreeMembers>=a.importdata.validEntrys.length?i.importEmployeeFree({filename:a.importdata.filename,totalAmount:a.importdata.json.length,validAmount:a.importdata.validEntrys.length,freeAmount:d.amountOfFreeMembers,alreadyExistant:a.importdata.alreadyInSystemEntrys.length,emailsAsString:e},b,function(){}):i.importEmployeeBuy({filename:a.importdata.filename,totalAmount:a.importdata.json.length,validAmount:a.importdata.validEntrys.length,freeAmount:d.amountOfFreeMembers,alreadyExistant:a.importdata.alreadyInSystemEntrys.length,emailsAsString:e,billing_interval:d.billing_interval},c,function(){});else{j.open({animation:!0,templateUrl:"booking/accountexpiredmodal/modals/unallowed_action_modal.html",controller:"AccountExpiredModalInstanceCtrl",size:"lg",windowClass:"expiredmodalcontainer"})}}}))},a.init=function(){c&&(c.groupId&&(a.modaloptions.groupId=c.groupId,a.employeedata.currentGroup=c.groupId),c.step&&(a.modaloptions.currentStep=c.step),c.employeeId?a.modaloptions.mode="update":a.modaloptions.mode="create")},a.init(),a.selectedGroup={selected:{}},a.loadingPromise=null,a.loadGroups=function(){a.loadingPromise=f.get().then(function(b){if(a.groups=b,c&&c.employeeId){var e=c.employeeId;a.modaloptions.heading="Mitarbeiter bearbeiten",a.modaloptions.saveButtonText="Änderungen speichern",a.loadingPromise=d.getOne(e).then(function(b){b=b[0],a.employeedata=b,a.employeedata.currentGroup=b.currentGroup.toString(),a.modaloptions.mode="update"})}else a.modaloptions.groupId&&(a.employeedata.currentGroup=a.modaloptions.groupId)})},a.showOtherImportPos=function(){i.otherImportPos()},a.loadEmployees=function(){a.modaloptions.groupId&&d.get().then(function(b){a.data.employees=[];for(var c=0;c<b.length;c++)b[c].currentGroup!==a.modaloptions.groupId&&a.data.employees.push(b[c]);a.recalcAvatars()})},a.loadGroups(),a.loadEmployees(),a.modaldata={selectedEmployees:[]},a.createEmployee=function(){function c(c){return!(!$("#createempmodalcheckbox").prop("checked")&&c!==!0)&&("empty"===a.employeedata.currentGroup&&(a.employeedata.currentGroup=null),void(a.loadingPromise=d.add(a.employeedata).then(function(a){if(a.success===!1&&1===a.code)alert("Es existiert bereits ein Mitarbeiter mit der angegebenen E-Mail-Adresse. Bitte überprüfen Sie Ihre Eingaben.");else{var c=[a.id];d.sendInvitations(c).then(function(a){a.success===!0?i.defaultSuccessMessage("Der Mitarbeiter wurde erfolgreich hinzugefügt und hat eine Einladung zu Mailtastic, sowie die Anleitung zum selbstständigen Einbinden des Kampagnen-Banners erhalten."):i.defaultErrorMessage(Strings.errors.DATEN_NICHT_GELADEN),h.syncEmployees().then(function(a){}),e.reload(),b.close()})["catch"](function(a){i.defaultErrorMessage(Strings.errors.DATEN_NICHT_GELADEN)})}})["catch"](function(a){i.defaultErrorMessage(Strings.errors.DATEN_NICHT_GELADEN)})))}"create"===a.modaloptions.mode?h.getUserStatus().then(function(b){if(b.success===!1)alert(Strings.errors.DATEN_NICHT_GELADEN);else if(1==b.forceAllow)c(!0);else if(b.hasTestTime===!0)c(!0);else if(b.hasSubscription===!0)b.amountOfFreeMembers>0?c(!0):i.addemployee({amount:1,firstname:a.employeedata.firstname,lastname:a.employeedata.lastname,billing_interval:b.billing_interval,customPrice:b.customPrice},c,function(){});else{j.open({animation:!0,templateUrl:"booking/accountexpiredmodal/modals/unallowed_action_modal.html",controller:"AccountExpiredModalInstanceCtrl",size:"lg",windowClass:"expiredmodalcontainer"})}}):"update"===a.modaloptions.mode&&("empty"!==a.employeedata.currentGroup&&a.employeedata.currentGroup?a.loadingPromise=d.update(a.employeedata).then(function(){e.reload(),b.close()}):i.defaultErrorMessage("Bitte wählen Sie eine Abteilung aus."))},a.cancel=function(){b.dismiss("cancel")},a.addUsersToGroup=function(){if(a.modaloptions.groupId)if(0===a.modaldata.selectedEmployees.length)alert("Bitte wählen Sie zumindest einen Mitarbeiter aus.");else{for(var b=[],c=0;c<a.modaldata.selectedEmployees.length;c++)b.push(a.modaldata.selectedEmployees[c].id);d.moveToGroup(b,a.modaloptions.groupId).then(function(b){alert(b.success===!0?"Die Mitarbeiter wurden erfolgreich der Abteilung hinzugefügt.":Strings.errors.TECHNISCHER_FEHLER),e.reload(),a.cancel()})}else alert(Strings.errors.TECHNISCHER_FEHLER),a.cancel()},a.isSelectedAll=function(){return a.data.selectedEmployees.length===a.data.employees.length},a.selectAll=function(b){for(var c=b.target,d=c.checked?"add":"remove",e=0;e<a.data.employees.length;e++){var f=a.data.employees[e];k(d,f)}},a.selectAllOuter=function(){for(var b=a.data.selectedEmployees.length===a.data.employees.length?"remove":"add",c=0;c<a.data.employees.length;c++){var d=a.data.employees[c];k(b,d)}};var k=function(b,c){var d=jQuery.grep(a.modaldata.selectedEmployees,function(a,b){return a.id===c.id});if("add"===b&&0===d.length&&(a.modaldata.selectedEmployees.push(c),a.recalcAvatars()),"remove"===b&&d.length>0)for(var e=0;e<a.modaldata.selectedEmployees.length;e++){var f=a.modaldata.selectedEmployees[e];if(f.id===c.id){a.modaldata.selectedEmployees.splice(e,1);break}}};a.updateSelection=function(a,b){var c=a.target,d=c.checked?"add":"remove";k(d,b)},a.isSelected=function(b){var c=jQuery.grep(a.modaldata.selectedEmployees,function(a,c){return a.id===b.id});return 0!==c.length},a.rowClicked=function(b){for(var c=b.id,d="add",e=0;e<a.modaldata.selectedEmployees.length;e++)if(c===a.modaldata.selectedEmployees[e].id){d="remove";break}k(d,b)}}]).controller("EmployeeDeleteModalInstanceCtrl",["$scope","$modalInstance","empsToDelete","employeeService","browseService","paymentService",function(a,b,c,d,e,f){a.modaloptions={currentStep:"first",empsToDelete:c},a.finish=function(){b.close(!0)},a.cancel=function(){b.close(!1)},a.deleteUsers=function(){return 0===c.length?void alert("Bitte mindestens einen Mitarbeiter auswählen"):void d.deleteMany(c).then(function(c){c.success===!0?(f.syncEmployees().then(function(){}),a.setStep("third")):b.cancel()})},a.setStep=function(b){a.modaloptions.currentStep=b}}]);;var en={imprint:"imprint",ask:"ask? +49 6182 955 70 00   |  ","E-Mail-Signatur-Marketing":"Intelligent<br>E-Mail-signature-marketing<br>with Mailtastic",WelcometoMailtastic:"Welcome to Mailtastic . Please log in with<br>your credentials",nowlogin:"Now log in",ForgotPassword:"Forgot Password?",Noaccountyet:"No account yet?",registernow:"Register now",Youradvisor:"Your advisor",TaoBauer:"Tao Bauer",campaigns:"Campaigns",Employee:"Employee",Current:"Current",Youradvisor:"Your advisor",TaoBauer:"Tao Bauer",campaigns:"Campaigns",Employee:"Employee",Current:"Current",youropinioncounts:"Your opinion counts",howcanwe:"How Can We<br>Improve ?",toimproveyou:"To provide you with the maximum benefit , we are constantly developing Mailtastic on.",Pleaseletmeknowhow:"Please let me know how we can improve our product for you.",Sendfeedback:"Send feedback",Statisticsdepartment:"Statistics department",Currentlyarenodata:"Currently are no data",Oncefirstdataareavailable:"Once first data are available , you can compare the performance of departments.",Employee:"Employee",Current:"Current",Activecampaigns:"Active campaigns",Createcampaign:" Create campaign",Youcurrentlyhavenoactivecampaign:"You currently have no active campaign",Nowcreateacampaignandassignthem:"Now create a campaign and assign them to a department to let you view at this point.",bestemployee:"Top 3 employees",personnelstatistics:"Personnel statistics",Addemployees:"Add employees",seen:"seen:",clicks:"clicks:",clickRate:"click Rate",bestemployee:"Top 3 employees",OVERVIEW:"DASHBOARD",DEPARTMENTS:"DEPARTMENTS",EMPLOYEE:"EMPLOYEE",CAMPAIGNS:"CAMPAIGNS",SIGNATURES:"SIGNATURES",ViewTour:"View Tour",logout:"logout",language:"Language",german:"german",english:"english",account:"Account ",preferences:"PREFERENCES",imprint:"Imprint",resources:"RESSOURCES",statistics:"Statistics",Allcampaigns:"All campaigns",Nofiguresinthisperiodfor:"No figures in this period for this campaign before",Assignthiscampaigntoanactivedepartment:"Assign this campaign to an active department to at this point to see the statistics soon.",Employee:"Employee",departments:"Departments",All:"All",Newdepartment:" New department",Inthecentralregiononeormoreemployees:"In the central region , one or more employees to obtain further information at this point.",Actions:"Actions",Delete:"Delete",Lookat:"Look at",Edit:"Edit",Sendinvitationagain:"Send invitation again",active:"Active",Inactive:"Inactive",MemberofDivision:"Member of Division",Currentlyinthedepartment:"Currently, in the department",assignedtoanycampaign:"assigned to any campaign.",Assignacampaigntodisplayabannercampaigninthe:"Assign a campaign to display a banner campaign in the e-mail this department member of that department",Actions:" Actions",Delete:"Delete",sendinvitationsagain:"Send invitations again",Movetodepartment:"Move to department:",selectdepartment:"Select department...",Assignedcampaign:"Assigned campaign",Thedepartmentoftheemployee:"The department of the employee is not assigned to campaign",hasnotyetintegratedthecampaign:"has not yet integrated the campaign banners in the e- mail signature.",remindemployees:" Remind employees",hasintegratedthecurrentcampaignbanner:"has integrated the current campaign banner.",Toassiganemployeetoanothercampaign:"To assign an employee to another campaign , you move it easily to the appropriate department , or assign the Department",anothercampaign:"Another campaign.",Assignedsignature:"Assigned signature",Thedepartmentoftheemployeeisassigned:"The department of the employee is assigned a signature",hasnotyetintegratedthelatestreleased:" has not yet integrated the latest released version of this signature .",hasincorporatedthelatestreleasedversion:"has incorporated the latest released version of this signature.",Thissignaturehasnotyetbeenrolledouttoyourcreation:"This signature has not yet been rolled out to your creation.",Forsignature:" For signature",Toassignadifferentsignaturetoanemployeemove:"To assign a different signature to an employee , move it easily in the appropriate department or assign the Department",adifferentsignatureto:" a different signature to .",userdata:"User data",Department:"Department:",assigndepartment:"Assign department",Emailaddress:"E-mail Address:",edituserdata:"Edit user data",Employee:"Employee:",Edit:"Edit",Delete:"Delete",Actions:"Actions",Sendinvitationagain:"Send invitation again",Department:"Department:",assigndepartment:"Assign department",Toassignaemployeetoanothercampaign:"To assign an employee to another campaign , you move it easily in the appropriate department.",Currentlyinthedepartment:"Currently, in the department",assignedtoanycampaign:"assigned to any campaign.",Assignacampaigntodisplayabannercampaign:"Assign a campaign to display a banner campaign in the e-mail this department member of that department.",ATTENTIONYourfreetrialperiodhasexpired:"ATTENTION : Your free trial period has expired. Your account is now inactive.",Learnmore:"Learn more",Activateaccountnow:"Activate account now",Yourfreetrialendsin:"Your free trial ends in",meet:"Meet.",bookMailtastic:"book Mailtastic",Employee:"Employee",Thisdivisioncurrentlyhasnoemployees:"This division currently has no employees",Createnew:"Create new",existing:"Existing",Import:"Import",Addemployees:"Add employees",Createnew:"Create new",existing:"Existing",Import:"Import",Assignedcampaign:"Assigned campaign",CampaignPerformanceDepartment:"Campaign Performance Department",Createdon:"Created on:",Employeeshavenotyetincorporated:"Employees have not yet incorporated the campaign",rememberthisemployees:"remember this ( n ) employees",Allemployeeshaveintegratedthecampaignbanner:"All employees have integrated the campaign banner.",Createdon:"Created on:",ThisdepartmentisnotassignedCampaign:"This department is not assigned Campaign",Fromthedropthecampaignwhosebanneryou:"From the drop the campaign , whose banner you want to display in the e-mails of the department members",Employeesinthisdepartment:"Employees in this department",selectall:"Select all",action:"Action",Delete:"Delete",sort:"Sort",firstgivenname:"first given name",Surname:"Surname",Emailaddress:"E-mail address",campaignstatus:"Campaign status",Addemployees:"Add employees",Createnew:"Create new",existing:"existing",Import:"Import",Current:" Current",Notuptodate:" Not up to date",Unassigned:" Unassigned",signature:"Signature",active:"active",Inactive:"Inactive",Unassigned:"Unassigned",campaign:"Campaign",Lookat:"Look at",Delete:"Delete",Edit:"Edit",Sendinvitationagain:"Send invitation again",WarningThisdepartmenthasnostaff:"Warning - This department has no staff!",Nowaddemployees:"Now add employees",SharetheDepartmentofcurrentcampaignperformance:"Share the Department of current campaign performance",Absolute:"Absolute",Relative:" Relative",Currentlyarenodata:"Currently are no data",Oncefirstdataareavailableyoucansee:"Once first data are available , you can see the statistics here.",Oncefirstdataperformanceofdepartments:"Once first data are available , you can compare the performance of departments.",Assignedsignature:"Assigned signature",Thissignaturehasnotyetbeenrolled:"This signature has not yet been rolled out to your creation.",Forsignature:" For signature",Employeeshavenotyetincorporatedthe:"Employees have not yet incorporated the latest released version of this signature.",rememberthisemployees:"remember this ( n ) employees","Allemployeesofthisdepartmenthavecurrentlysignature .":"All employees of this department have currently rolled out signature.",choosesignature:"Choose signature....",Thisdivisionisnotyetassignedasignature:"All employees of this department have currently rolled out signature.",Fromthedropthesignaturethatyouwanttodisplayintheemails:"All employees of this department have currently rolled out signature.",Department:"Department",Employee:"Employee",Actions:"Actions",Addemployees:"Add employees",Delete:"Delete",Edit:"Edit",Createnew:"Create new",existing:"Existing",Import:"Import",Activecampaign:"Active campaign",Createdon:"Created on:",ThisdepartmentisnotassignedCampaign:"This department is not assigned Campaign",Fromthedropyouwantdepartmentmembers:"From the drop the campaign , whose banner you want to display in the e-mails of the department members.",Aboutdepartmentstoorganizeyouremployeesandassigncampaignsandcampaignbanner:"About departments to organize your employees and assign campaigns and campaign banner",Howwouldyouliketocallthedepartment:"How would you like to call the department?",title:"title",Whichcampaignshouldbeused:"Which campaign should be used?",campaign:"Campaign",Selectcampaign:"Select campaign",abort:"Abort",storedepartment:"Store department",Selectexistingdepartment:"Select existing department",Whichdepartmentsyourcampaigntodisplay:"Which departments your campaign to display?",selectall:"Select all",Departmentswherethecampaignhasalreadybeenallocatedarenotincluded:"Departments , where the campaign has already been allocated , are not included in the list.",abort:"Abort",AssignSelectedDepartments:"Assign Selected Departments",Createanewdepartment:"Create a new department",AddExistingDepartment:"Add Existing Department",departments:"Departments",Createanewdepartment:"Create a new department",Sort:"Sort",membersOf:"Members Of",Createdon:"Created on",Activecampaign:"Active campaign",members:"members",Edit:"Edit",Delete:"Delete",All:"All",action:"action",Delete:"Delete",sort:"Sort",title:"title",Createdepartment:"Create department",Employee:"Employee",campaign:"Campaign",Inactive:"Inactive",active:"Active",Nostatus:"No status",UnassignedCampaign:"Unassigned Campaign",signature:"Signature",Current:"Current",Notuptodate:"Not up to date",Nostatus:"No status",Unassignedsignature:"Unassigned signature",Lookat:"Look at",Edit:"Edit",All:"All",action:"action",Unassigntodepartment:"Unassign to department",AddDivision:"Add Division",Createnew:"Create new",Existing:"Existing",sort:"Sort",Thiscampaignwillbeusedinanydepartment:"This campaign will be used in any department",Assignaroundheretogetanoverview:"Assign around here to get a department to this Kamapne , an overview.",Employee:"Employee",campaign:"Campaign:",UnassignedCampaign:"Unassigned Campaign",setcampaign:"Set campaign",Lookat:"Look at",Edit:"Edit",campaigns:"Campaigns",All:"All",active:"Active",Inactive:"Inactive",Inthecentralregiononeormorecampaigns:"In the central region , one or more campaigns to get more information at this point.",Actions:"Actions",Delete:"Delete",Lookat:"Look at",Edit:"Edit",Createdonca:"Created on",Activeindepartments:"Active in departments",Assigntogetthiscampaigntoadepartmentinformation:"Assign to get this campaign to a department , for more information.",deletecampaigns:"Delete campaignsn",Currentlyinthecampaign:"Currently, the campaign",assignedtoadepartment:"Assigned to a department.",selectdepartment:"Select department...",appearsinthesignaturesofthecorrespondingdepartmentmembers:"A campaign consists of a banner ( Vector ) and the URL to the corresponding content . Only when the campaign of a department has been assigned , the banner appears in the signatures of the corresponding department members.",CampaignTitle:"Campaign Title*",Workingtitleonlvisiblinternally:"Working title , only visible internally",DestinationURLinclWww:"Destination URL ( incl . Www ) *",Whereshouldyourbannerleft:"Where should your banner left ?",CampaigncolorStatistical:"Campaign color ( Statistical ) *",Colorofthecampaignforstatistics:"Color of the campaign for statistics",Selectacampaignbanner:"Select a campaign banner *",FileformatsofCampaigns:"File formats : .jpg / .jpeg / .png / .gif <br>Maximum file size : 2MB <br>Maximum banner size : 700x210 pixels ( Larger pictures are automatically adjusted )",Werecommendnottoexceedbannersize:"We recommend not to exceed a banner size of 500x150 px.",UploadPhoto:"Upload Photo",Preview:"Preview:",abort:"Abort",campaigns:"Campaigns",Activecampaigns:"Active campaigns",Inactivecampaigns:"Inactive campaigns",Createanewcampaign:"Create a new campaign",listsort:"List Sort",seen:"Seen",clicks:"clicks",clickRate:"click Rate",listfiltering:"list filtering",active:"Active",Inactive:"Inactive",All:"All",CreatedOn:"Created on",appropriate:"Appropriate",Nocampaignyet:"No campaign yet",Createyourfirstcampaigntogetanoverviewhere:"Create your first campaign , to get an overview here.",Activeindepartment:"Active in department",and:"...and",more:"More.",activeinanydepartment:"Active in any department",All:"All",action:"action",Createcampaign:" Create campaign",CreatedOn:"Created on",campaign:"Campaign",Assigningadepartment:"Assigning a department",Createnew:"Create new",existing:"Existing",activein:"Active in",departments:"Departments,",Employee:"Employee",nofiguresareyetavailableforthiscampaignbefore:"no figures are yet available for this campaign before",Assignthiscampaignepointto:"Assign this campaign to an active department to at this point to see the statistics soon.",CreatedOn:"Created on",statistics:"Statistics",Allcampaigns:"All campaigns",Nofiguresinthisperiodforthiscampaignbefore:"No figures in this period for this campaign before",Assignthiscampaigntoanactivedepartmentstatisticssoon:"Assign this campaign to an active department to at this point to see the statistics soon.",placedstoredvalue:"placed , stored value",content:"content",company:"Company",Employee:"Employee",placedvalueissetbystaff:"placed , value is set by staff",placednorelatedvalue:"placed , no related value",campaignbanner:"Campaign banner",Department:"Department",Createasignature:"Create a signature",signaturename:"Signature name:",Editsignature:"Edit signature",Yoursignatureinafewsteps:"Your signature in a few steps",Takealookinourtemplatgalleryandchoose:"Take a look in our template gallery and choose a professional template ",chooseTemplate:"choose Template",Previewsignature:"Preview signature",Update:"Update",Tagsforwhichnoinformationhasbeenstoredare:"Tags for which no information has been stored , are not displayed.",Contentswhicharerepresentedastags:"Contents which are represented as tags are supplemented by the staff.",YouhavemadechangesDoyouwanttosavethis:"You have made changes . Do you want to save this ?",remainforaslongasyouremployeesyouremployees:"The current state of the signature ( state prior to editing) will remain for as long as your employees ' current  until you save the revised just prior and roll out again to your employees . When you roll out the stand , you can decide later.",abort:"Abort",saveChanges:"save Changes",NameTags:"Name Tags",targetlink:"target link",Viewas:"View as:",graphic:"graphic",Alternativetextfordisplayerrors:"Alternative text for display errors",linktext:"link text",GraphicsSource:"Graphics Source",StandardDisplay:"Standard Display",owngraphic:"Own graphic",UploadPhoto:"Upload Photo",Preview:"Preview:",Sizeofthepermanentlysetaftersavingthesignature:"Size of the graphic ( permanently set after saving the signature )",originalsize:"Original size",Manually:"Manually",Widthinpx:"Width ( in px )",Achangetothesignaturesallemployees:"A change of this information applies to the signatures of all employees .",Changesinthisinformationareincludedsignaturesemployees:"Changes in this information are included in the signatures of the employees as soon as the newest state was rolled out and updated by your staff .",rejection:"Rejection",Save:"Save",NameTags:"Name Tags",targetlink:"target link",linkcolor:"link color",Achangeofthisinformationappliestothesignature:"A change of this information applies to the signatures of all employees.",linktext:"link text",Achangetothesignaturesallemployees:"A change of this information applies to the signatures of all employees .",Changesinthisinformationareincludedsignaturesemployees:"Changes in this information are included in the signatures of the employees as soon as the newest state was rolled out and updated by your staff .",rejection:"Rejection",Save:"Save",NameTags:"Name Tags",value:"Value",Add:"(Add",onetocreateaparagraph:"one to create a paragraph )",Achangetothesignaturesallemployees:"A change of this information applies to the signatures of all employees.",Changesinthisinformationareincludedsignaturesemployees:"Changes in this information are included in the signatures of the employees as soon as the newest state was rolled out and updated by your staff .",rejection:"Rejection",Save:"Save",Acampaignconsistsofabannecorresponding:"A campaign consists of a banner ( Vector ) and the URL to the corresponding content . Only when the campaign of a department has been assigned , the banner appears in the signatures of the corresponding department members.",CampaignTitle:"Campaign Title *",Workingtitleonlyvisibleinternally:"Working title , only visible internally",DestinationURLinclWww:"Destination URL ( incl . Www ) *",Whereshouldyourbannerleft:"Where should your banner left ?",CampaigncolorStatistical:"Campaign color ( Statistical ) *",Colorofthecampaignforstatistics:"Color of the campaign for statistics",Selectacampaignbanner:"Select a campaign banner *",Fileformatsjpgjpeg:"File formats : .jpg / .jpeg / .png <br>Maximum file size : 1MB <br>Maximum banner size : 700x210 pixels ( Larger pictures are automatically adjusted )",Werecommendbannersizeof500x150px:"We recommend not to exceed a banner size of 500x150 px.",UploadPhoto:"Upload Photo",Preview:"Preview:",usetemplate:"Use template",TemplateGallery:"Template Gallery",unlocking:"Unlocking",Lock:"Lock","Import All":"Import selected","Activate All":"Activate selected","Deactivate All":"Deactivate selected",signature:"signature:",rollout:"roll out",Thissignatureisnotactive:"This signature is not active in any department",Departments:"Department (s)",activein:"Active in",CreateNew:"Create New",Chooseexisting:"Choose existing",Assigningadepartment:"Assigning a department",preview:"Preview",Editsignature:"Edit signature",Thesignaturehasnotyetbeenrolledmodification:"The signature has not yet been rolled out to the preparation, modification!",Someemployeeshaveinvolvedversionsignature:"Some employees have involved no or an outdated version of the signature.",rollsignature:"Roll signature",Thesignaturewason:"The signature was on",rolledpmandsinceneitherthesignaturenoramended:"rolled pm and since neither the signature nor the Company have been amended.",Departmentsthatareassignedtothissignature:"Departments that are assigned to this signature",selectall:"Select all",action:"Action",Removeassignmentforsignature:"Remove assignment for signature",sort:"Sort",title:"title",rolledout:"Rolled out",active:"active",Assigningadepartment:"Assigning a department",Thissignatureisnotactiveinanydepartment:"This signature is not active in any department!",Assignthissignatureemailsdepartmentmembers:"Assign this signature of a department in order to make them appear in the emails of the department members.",Employee:"Employee:",campaign:"Campaign",UnassignedCampaignbr:"Unassigned Campaign <br>",Open:"Open",Removeassignmentforsignature:"Remove assignment for signature",Therearenogroupscampaign:"There are no groups that can be assigned to the campaign.",NoteGroupsthatarealreadyassigneddisplayed:"Note : Groups that are already assigned to the campaign , are not displayed.",Selectexistingdepartment:"Select existing department",WhichdepartmentsYoursignatureshoulddisplayed:"Which departments Your signature should be displayed ?",selectall:"Select all",Departmentsalreadybeenallocatedincludedlist:"Departments , where the signature has already been allocated , are not included in the list.",abort:"Abort",AssignSelectedDepartments:"Assign Selected Departments",Aboutdepartmentstoorganizbannerssignatures:"About departments to organize your employees and assign campaigns , campaign banners and signatures",Howwouldyouliketocallthedepartment:"How would you like to call the department?",title:"title",Whichcampaignshouldbeused:"Which campaign should be used?",storedepartment:"store department",yoursignatures:"your signatures",Allsignatures:"All signatures",title:"title",rolledout:"rolled out",Createasignature:"Create a signature",sendinvitationsagain:"Send invitations again",Addemployees:"Add employees",Import:"Import",updatedon:"Updated on",InnoactiveDepartment:"In no active <br> Department",activein:"Active in",EmployeeZero:"0 Employee",Notrolled:"Not rolled",LastReviewNever:"Last Review: Never",Recentlyat:"Recently at",NoSignatureavailable:"No Signature available",CreateobtainaSummaryhere:"Create your first signature to obtain a <br>Summary here",Thesignature:"The signature",wassuccessfullycreated:"was successfully created.",hasbeensuccessfullyprocessed:"has been successfully processed.",hasbeen:"has been",Employeeassigned:"Employee ) assigned :",Thesignature:"The signature",departments:"Departments",is:"is",assignedstaff:"assigned staff )",employeewas:"Employee was",successfullytothedepartment:"Successfully to the department",added:"Added",Notallemployeeshavethelatestsignature:"Not all employees have the latest signature !",Thustheprocessedstateintegrationguide:"Thus, the processed state of the signature appears among your employees , this Mailtastic must incorporate into your e- mail client . Are you ready to inform the employees concerned and send you a quick integration guide ?",Thesignaturewassuccessfully:"The signature was successfully",Staffrolledoutviaemail:"Staff rolled out via email.",Theemployeeshavereceivedinstructionsreminder:"The affected employees have received instructions for independent integration of Mailtastic signature . Once an employee has integrated the latest version of the signature , indicating that its signature Current is . Employees whose signature  Not applicable is , you can always send a reminder.",rolledEasySynemployees:"rolled Easy - Sync employees.",EmployeeswhouseEasySyncthecurrentsignature:"Employees who use EasySync , automatically get leaked the current signature.",GoogleAppstaffrolledout:"Google Apps staff rolled out.",EmployeesAppsthecurrentsignature:"Employees who use Google Apps , automatically get leaked the current signature .",Addmorepeople:"Add more people",rollLater:"Roll Later",Doneforsignature:"Done for signature",Thesignature:"The signature",Thesignaturedepartmentwhichemployeesare:"The signature is assigned to a department in which employees are .",hasbeensuccessfullyprocessed:"has been successfully processed.",Assignsignatureleast1department:"Assign the signature of at least one department , and make sure that at least 1 employee is in this department.",Forsignature:"For signature",Thesignature:"The signature",hasbeensuccessfullysaved:"has been successfully saved",TorollsinglesignaturewillneedanactiveMailtasticfare:"To roll out the single signature to your employees , you will need an active Mailtastic fare.",WouldenableunlimiteduseyournewsignatureMailtasticfare:"Would you now need to enable unlimited use of your new signature a Mailtastic fare?",BookMailtasticfarenow:"Book Mailtastic fare now",Aboutandassigncampaignsandcampaignbanner:"About departments to organize your employees and assign campaigns and campaign banner",Howwouldtocallthedepartment:"How would you like to call the department?",Back:"Back",UnassignedCampaign:"Unassigned Campaign <br>",Theredepartmentsthatcanbeassociatedwiththesignature:"There are no departments that can be associated with the signature.",Notedepartmentsthatarealreadyassigneddisplayed:"Note : departments that are already assigned to the signature will not be displayed.",Thissignaturesignaturenowadepartment:"This signature is not yet active . Assign the signature now a department.",Inorderyoumustassignrelevantemployeesare:"In order for the signature in the e-mails of your employees is angzeigt , you must assign the signature the departments in which the relevant employees are.",endprematurely:"End prematurely",WhichdepartmentsYoursignatureshouldbedisplayed:"Which departments Your signature should be displayed ?",Departmentsbeenassignedincludedthelist:"Departments , where the signature has already been assigned , are not included in the list.",AssignSelectedDepartments:"Assign Selected Departments",Whichdepartmentassignthenewemployee:"Which department you want to assign the new employee?",WedisturbyouremployeenvitationemployeeWewillremindyouagain:"We do not want to disturb your employees . New employees receive only an invitation e- mail , if you instruct Mailtastic to notify the employee . We will remind you again.",Sendasemailtome:"Send as e- mail to me",Whodowanttoadd:"Who do you want to add ?",add:"Add",Theassigneddepartmentsareempty:"The assigned departments are empty!",Atpresentthesignaturedepartmentsadded:"At present, the signature will be displayed in any employee . Now add an employee to the appropriate departments added.",Thereemployeewhocanbeassignedtothegroup:"There are no employees who can be assigned to the group .",NoteEmployeeswhothegrouparenotdisplayed:"Note : Employees who already belong to the group are not displayed.",ViaExcel:"Via Excel",Othersources:"Other sources",WedonotanMailtasticnotifywilremindyouagain:"We do not want to disturb your employees . New employees receive only an invitation e- mail , if you instruct Mailtastic to notify the employee . We will remind you again .",Whichdepartmenttoassignthenewemployee:"Which department you want to assign the new employee ?","1FilltheExceltemplate":"1. Fill in the Excel template",downloadtemplate:"download template","2UploadExceldocument":"2. Upload Excel document",Chooseafile:"Choose a file","3StaffImport":"3. Staff Import",Employeestoagaineveniftheyexistinthepresenttable:"Employees who have already been added to Mailtastic will not be imported again ( even if they exist in the present table ).",importstaff:"import staff",Whichdepartmenttoassignthenewemployee:"Which department you want to assign the new employee?","EmployeesareinformedconfirmationtheuseofMailtastic.":"Employees are informed only later and only after confirmation from you about the use of Mailtastic.",Whichemployeesassignyournewdepartment:"Which employees you want to assign your new department ?",Employeesdepartmentarenotlisted:"Employees who are already members of this department are not listed.",Assignselectedemployees:"Assign selected employees",Incentralinformationatthispoint:"In the central region of one or more departments to get more information at this point.",assignedtoanycampaign:"assigned to any campaign.",Assigncampaigntobannercampaignthatdepartment:"Assign a campaign to display a banner campaign in the e-mail this department member of that department.",Cleardivisions:"Clear divisions",Assigncampaigns:"Assign campaign:",NeedHelp:"Need Help?",NoproblemIliketohelpSimply:"No problem - I like to help You personally ! <br>Use our <br>free live chat ( below <br> right) or call us <br>Simply : 06182 955 70 00",Gmailusers:"Gmail users",activebracket:"active)",Imported:"Imported",Synchronized:"Synchronized",cancelGmailSync:"Cancel Gmail Sync",WarningGoogleAdminaccountcontinue:"Warning: You are about to delete the connection to the Google Admin account . Do you really want to continue?",BandagedGoogleAdminaccount:"Bandaged Google Admin account:",WarningdeleteaccountDoyoureallywanttocontinue:"Warning: You are about to delete the connection to the Google Admin account . Do you really want to continue?",HowcoursesynchronizationwereappliedasMailtasticmember:"How do you want to do with the employees who in the course the synchronization were applied as Mailtastic member?",selectadjustment:"Select adjustment",Removeemployee:"Remove employee",AllemployeesconnectionGoogleasMailtasticusers:"All employees who applied via the connection with Google as Mailtastic users were , will be permanently deleted and canceled the synchronization.",retainemployees:"retain employees",AllMailtasticusersretainedandcanstillbemanaged:"All employees who applied via the connection with Google as Mailtastic users were retained and can still be managed",deletetheconnectionaccountcontinue:"Warning: You are about to delete the connection to the Google Admin account . Do you really want to continue?",Pleaseenteryourpasswordtoconfirmthedeletion:"Please enter your password to confirm the deletion:",Enterpassword:"Enter password",Clearconnectionnow:"Clear connection now",Setsynchronization:"Set synchronization",HowyouwanttosyncGmailwithMailtastic:"How you want to sync Gmail with Mailtastic?",Automaticsynchronizationrecommended:"Automatic synchronization ( recommended)",AllGmailsynchronizedMailtasticuptodateMore:"All Gmail users and their signatures are automatically synchronized with Mailtastic and kept up to date. More...",Manualsynchronization:"Manual synchronization",ThereGmailuserssynchronizedusersthemselves:"There are only the signatures of the manual for Mailtastic activated Gmail users synchronized , but not the users themselves . More ...",Continue:"Continue",OrganizationalstructureofyourGoogleAppaccounts:"take organizational structure of your GoogleApp accounts",GmaildepartmentsassignedcorrespondAccounts:"Gmail users to be added to Mailtastic are departments assigned that correspond to the organizations of your Google Accounts.",Createanewstructure:"Create a new structure",Gmailuserstheorganizedmanuallybyyou:"Gmail users to be added to Mailtastic are automatically in the Standard department moved and can be organized manually by you.",ConjunctionwithGooglemade:"Conjunction with Google made",Settingorganization:"Setting organization",TheconnectiontoyourWorksuccessfullyestablished:"The connection to your ” Google Apps for Work ”  - account has been successfully established.",HoworganizetheGoogleAppusersinMailtastic:"How you want to organize the GoogleApp users in Mailtastic ?",takeorganizationalstructureyourGoogleAppaccounts:"take organizational structure of your GoogleApp accounts",GmaildepartmentsorganizationsAccounts:"Gmail users to be added to Mailtastic are departments assigned that correspond to the organizations of your Google Accounts.",Gmailmanuallybyyou:"Gmail users to be added to Mailtastic are automatically in the “ Standard department ” moved and can be organized manually by you.",SyncCancel:"Sync Cancel",ConnectingtotheGooglemailaccount:"Connecting to the Google mail account",Synchronizeyoursignatureautomaticallykeepdate:"Synchronize your Gmail account with your company Mailtastic to a uniform E -mail signature roll out to all employees and to automatically keep up to date.",Itthiseasy:"It's this easy :",ClickConnecttoGoogleApps:"Click “Connect to Google Apps ”,",selectMailtasticthehortsetupwizard:"select the Google Admin account you want to connect with and follow Mailtastic the short setup wizard.",DuringallTheSynchronizationdisabledatanytime:"During the following process you can choose if the synchronization for all To enable Gmail users ( recommended) , or only for certain users . The Synchronization can be disabled at any time .",ConnecttoGoogleApps:"Connect to Google Apps",ConnecttoGmailprepared:"Connect to Gmail prepared",Organizationwasmade:"Organization was made",ThetheGoogleaccountwassuccessfullyestablished:"The connection to the Google account was successfully established",OrganisationoftheforWorkstructure:"Organisation of the  “Google Apps for Work” - users in Mailtastic was “Creating a new structure” set to",OrganisationtakedepartmentalstructureofGoogleset:"Organisation of the “Google Apps for Work” - users in Mailtastic was “take departmental structure of Google” on set",Whichyouwanttoenablesynchronization:"(Which Google Apps users you want to enable synchronization ?)",googleuserswhicharealreadyexistingarenotshowed:"Google Users which are already added to mailtastic are not showed here but can be managed in the next step.",SignaturesSyncinactive:"Signatures - Sync inactive",importNostaffavailable:"to import No staff available",EitheremployeesMailtasticavailable:"Either your Google Apps For Work account does not include employees or all employees are already in Mailtastic available",
managewithgoogle:"Manage with Google Sync",SignaturesSyncactive:"Signatures - Sync active",enablesync:"Enable sync",disablesynchronization:"disable synchronization",importusers:"Import users",disableemployeessync:"disable employees sync",Cautionyouareabout:"Caution , you are about",Gmailsynchronizationreallywanttocontinue:"Gmail users to exclude from automatic synchronization . Do you really want to continue?",Userstherelevantemployeesyourtariff:"Users continue as an employee at Mailtastic and can be activated at any time for synchronization. Delete the relevant employees , to remove the user from your tariff.",CautionyouareabouttoGmail:"Caution , you are about to Gmail",excludefromautomaticsynchronizationcontinue:"exclude from automatic synchronization . Do you really want to continue?",Theusewillstillbeperformedyourtariff:"The user will still be performed as an employee at Mailtastic and can be activated at any time for synchronization. Delete the relevant employees , to remove the user from your tariff.",Enableemployeessync:"Enable employees sync",Manualoptionsynchronizationandthentryagain:"To enable synchronization f fi r individual users. w'a'uhlen please For the employee - sync the Manual option ~ synchronization and then try again",shoot:"Shoot",AutoSyncforthisemployeewasstopped:"Auto Sync for this) employee was stopped.",Changessnippetreservessignature:"Changes to signatures will no longer be played on this (n) employees. The campaign will continue to be updated as long as the employee does and the Mailtastic snippet reserves in its signature.",done:"Done",TheChangesautomatically:"The or the employee has been successfully added to the list of synchronsierenden employee (s). Changes to signatures and campaign are transferred automatically from now in their signature.",settings:"Settings",WarningreconcilingoverMailtastic:"Warning: There are users in your Gmail account whose signatures are not reconciling over Mailtastic!",Inthelowertheusersandenablesync:"In the lower area you can import the users and enable sync",TheyourGoogleAdminaccountisactive:"The connection to your Google Admin account is active",ConnectedtoGooglmailaccount:"Connected to Google mail account:",solvingconnection:"solving connection",SettingfortheorganizationofGoogleusers:"Setting for the organization of Google users",GoogleAppassumestructure:"Google App assume structure",departmentsassignedthatcorrespondyourGoogleAccounts:"Google users to be added to Mailtastic are departments assigned that correspond to the organizations of your Google Accounts.",Googleuserstobeaddedtostandarddepartment:"Google users to be added to Mailtastic are assigned to the standard department.",Change:"Change",Cautionyouareabout:"Caution, you are about",excludesynchronizationcontinue:"exclude Gmail from automatic synchronization. Do you really want to continue?",Theuserwillstillbeperformedsynchronizationyourtariff:"The user will still be performed as an employee at Mailtastic and may at any time be re-enabled for synchronization. Delete the appropriate staff to remove the user from your tariff.",Mailtastic14days:"Test Mailtastic free for 14 days",Noautomaticrenewal:"No automatic renewal",Setupinminutes:"Setup in minutes",achievedirectresults:"Achieve direct results",Pleasevalidemailaddress:"Please enter a valid e - mail address",Please6characters:"Please forgive at least 6 characters",Thepasswordsdonotmatch:"The entered passwords do not match",Registernow:"Register now",PleaseaccepttheTermsandConditions:"Please accept the Terms and Conditions",Iacceptthe:"I accept the",Conditions:"Conditions",and:"and",PrivacyPolicy:"Privacy Policy",Youalreadyhaveanaccount:"You already have an account?",loginnow:"log in now",Equalwego:"Equal we go!",company:"Company",recommender:"Recommender",now:"now",create:"Create",Pleaseopennowinbox:"Please open now<br> your e- mail inbox !",Tocompleteregistrationactivation:"To complete the registration process , please click on the activation link you via email",havereceived:"have received.",Shouldyourspamfolder:"Should you not receive an email in the next few minutes , please check whether the e-mail is possibly ended up in your spam folder.",SavePassword:"Save Password",Resetnow:"Reset now",Emailaddress:"E-mail address*",RepeatEmail:"Repeat E-mail*",NewPassword:"New Password*",Repeatnewpassword:"Repeat new password*",Hello:"Hello",welcomeMailtastic:"Welcome Mailtastic",introduction:"Introduction",completedata:"complete data",askspersonaldatasheet:"asks you to supplement your personal data sheet:",Donotworrycompanyemailsignature:"Do not worry - the data entered are only used to create your personal company e -mail signature.",Alldataarealreadycomplete:"All data are already complete.",Ineedhelp:"I need help",storedataandtothenextstep:"store data and to the next step",Thatitthanksforyourhelp:"That's it - thanks for your help!",Yournewsuccessfullyactive:"Your new signature is now displayed among your e- mails if you have successfully completed the integration . Once you submit the first e-mail with the new signature , you will be “active” for the administrator as indicated .",Yourpersonalalwaysreachlink:"Your personal information , you can always reach and adjust via the following link:",introduction:"Introduction",instructions:"Instructions",Anyquestions:"Any questions?",Yourcontactpersoninyourcompany:"Your contact person in your company:",Fortechnicalquestionstime:"For technical questions please contact our Mailtastic team happy any time free of charge:",Yoursuccessfullytestedcompletely:"Your data has been successfully tested and are completely!",Thisisyournew:"This is your new",Mailtasticsignature:"Mailtastic-signature.",Campaignbannerss:"Campaign banners.",asksyouyournew:"asks you , your new",nowintegrate:"now integrate.",asksyouyournewMailtastic:"asks you , your new Mailtastic",CampaignBanner:"Campaign Banner",nowinyouremailsignature:"now integrate in your e -mail signature.",Simplyfollowinginstructions:"Simply follow the following instructions:",IntegrationInstructions:"Integration Instructions",Wheresignatureoryourcampaignbanner:"Where do you want to include your signature or your campaign banner?",Choose:"Choose...",Other:"Other...",Ineedhelp:"I need help",DoneImailtasticintegrated:"Done I mailtastic integrated!",asksyourhelp:"asks <br> your help:","1WHATISIT":"1. WHAT IS IT?",ForthecentralpresentationservicesofMailtastic:"For the central e-mail marketing management and the presentation of a single e- mail signature your company uses the services of Mailtastic.",asksyourcompanyignaturenow:"asks you to update your company's signature now:","2WHATDOIMAKE":"2. WHAT DO I MAKE?",ToensureThatsisquiteeasy:"To ensure that your e- mail signature in the future is always up to date , you need to include Mailtasitc in your e -mail signature . Thats is quite easy:",Pamperintegrationprocessconduct:"Pamper yourself in the next section : step by step through the short integration process conduct.",Continuetonextstep:"Continue to next step",Exceptionalabout3minutes:"Exceptional time: about 3 minutes.",STEP1:"STEP 1",OpenGmailrightandchooseSettings:"Open Gmail, click on the top right, click the gear icon and choose “Settings”",STEP2:"STEP 2",Scrolldowntothetoinsert:"Scroll down to the section labeled “Signature” and select the e- mail account in you want to insert the campaign banner",CopyMailtasticblueButtonstotheclipboard:"Copy the Mailtastic signature or the campaign banner by clicking the blue Buttons to the clipboard:",MailtasticCampaignBannertoclipboard:"Mailtastic Signature / Campaign Banner <br> to clipboard",IfContentsyouroldcopiedblankField:"If you get assigned a complete Mailtastic signature , delete the Contents of your old signature and add the copied Mailtastic signature in the blank Field.",Iftheexistingsignaturetext:"If you get assigned a campaign banner, add it with a Paragraph spacing one under the existing signature text.",SavetheSaveChangesThatit:"Save the settings now by clicking on the bottom of the page “Save Changes” button. That's it!",Done:"Done!",YourMailtasticEmailsdisplayed:"Your Mailtastic signature or your campaign banner is now in your Emails displayed.",CautionMozillaFirefoxbanner:"Caution: This process works not currently using the browser “Safari”. Please use temporarily “Mozilla Firefox” or “Google Chrome” in order to link the banner.",StarttheprogramMailonyourMac:"Start the program “Mail” on your Mac...",AndMailmenusettings:"... And you open the “Mail” menu item “Settings...”",Clickthisemailaccounteasilycreatehereon:"Click on the menu item “signatures” and select the E -mail account (the left pane) and the signature (medium range) from where you want to include the campaign banner. (If you do not have a signature at this e- mail account,You can easily create here on “+”. )",STEP4:"STEP 4",CopytheblueButtonstotheclipboard:"Copy the Mailtastic signature or the campaign banner by clicking the blue Buttons to the clipboard:",UnlesstheContentsemptybox:"Unless you 've got a complete Mailtastic signature zugeordent , delete the Contents of your old signature and paste the copied Mailtastic signature in the empty box.",UnlesswithParagraphexistingsignaturetext:"Unless you 've got a campaign banner zugeordent , add it with a Paragraph spacing one under the existing signature text.",Importantex:"Important:",Ifyouonlywantleastyet:"If you only want to insert the campaign banners , a letter in the signature must be present next to the banner at least yet.",STEP5:"STEP 5",NowtheSelectCampaignbannersdisplayed:"Now close the signature window . Once you write a new e-mail and the Select appropriate signature , your new Mailtastic signature or your Campaign banners displayed.",NOINSTRUCTIONSFOUND:"NO INSTRUCTIONS FOUND ?",SoonUntilhappyhelpyou:"Soon we can at this point instructions for even more E-mail clients. Until then, please let us know which client you are using and you are to contact our support team. We will be happy to help you!",WhatclientDOYOUUSE:"What is the E-mail client DO YOU USE?",Uniquetimeabout3minutes:"Unique time: about 3 minutes.",OpenMicrosoftoutlook:"Open Microsoft Outlook ...",AndleftofNewMail:"... And click on the top left of “New Mail”.",Thisopenssignaturesedit:"This opens the e-mail letter dialog box. Top right, click the “signature” on “signatures edit...”",STEP3:"STEP 3",ThisopenstheToinserthavepointabout:"This opens the signature management area . Select the signature in the the To insert Mailtastic signature or the signature graphic . ( If you have no have created signature , you can do so at this point about “+” . )",CopytheMailtasticsignatureblueButtonstotheclipboard:"Copy the Mailtastic signature or the campaign banner by clicking the blue Buttons to the clipboard:",UnlessMailtasticsignatureemptybox:"Unless you 've got a complete Mailtastic signature zugeordent , delete theContents of your old signature and paste the copied Mailtastic signature in the empty box.",Unlessyoucampaignexistingsignaturetext:"Unless you 've got a campaign banner zugeordent , add it with a Paragraph spacing among the existing signature - text:",Ifyouonlywantleastyet:"If you only want to insert the campaign banners , a letter in the signature must be present next to the banner at least yet.",Closedialogboxcorrespondingsignaturfrom:"Close the Signatures dialog box. Once you are a Write new e-mail , simply select the “signature” the corresponding signature from ...",AndtheMailtasticsignatureortheyoursignaturedisplayed:"... And the Mailtastic signature or the campaign banner in your signature displayed.",Exceptionaltimeabout1minute:"Exceptional time: about 1 minute .",STEP1OF3:"STEP 1 OF 3",ClickonthebuttontotheMailtasticProgramdownload:"Click on the button to the Mailtastic Program “EasySync” download:",STEP2OF3:"STEP 2 OF 3",OpenEasySyncandrunthefiledouble:"Open the folder where you have stored EasySync and run the file (double).",Followtheinstallationinstructions:"Follow the installation instructions.",ImportantNOTE:"Important NOTE:",Ifprogramsrequiresnoinstallation:"If you are unable to install any programs , you can Mailtastic Integration Wizard download that requires no installation . You can find it",STEP3OF3:"STEP 3 OF 3",MailtasticEasySyncopensenteryourintegration:"Mailtastic EasySync opens. Enter your e -mail address where you received the invitation email and then enter your integration code:",Copyintegrationcodetotheclipboard:"Copy integration code to the clipboard",Selectthesignatureunderyourexistingsignature:"Select the signature in their new Mailtastic signature or your campaign bannerto be integrated and start the integration . If you assigned a Mailtastic signature was , your old signature is replaced . If you assigned a campaign banner got , this is added under your existing signature.",Thatautomaticallysynchronizedfromnow:"That's it - your signature is automatically synchronized from now.",IfyouassignedCampaignBannerComposingcampaigndisplayedcorrectly:"If you assigned Campaign Banner is changed while you open Outlook , can the Composing an e-mail nor the old banner in the signature of their Email display. That's no problem - the recipient still gets the current campaign banner . After this Restart Outlook , the new campaign displayed correctly.",ClicktheIntegrationWizarddownload:"Click on the button to the Integration Wizard download:",OpenEasyIntegrateandrunthefiledouble:"Open the folder where you have stored EasyIntegrate and run the file (double).",mayRunthesoftwareonRun:"If you receive a security warning may Run the software on 'Run'.",TheMailtasticEnteryourintegrationcode:"The Mailtastic Inntegrations Wizard opens . Enter your integration code:",CopyIntegrationtotheclipboard:"Copy Integration-Ccode to the clipboard",Selectthesignatureaddedyourexistingsignature:"Select the signature in their new Mailtastic signature or your campaign banner to be integrated and start the integration . If you assigned a Mailtastic signature was , your old signature is replaced . If you assigned a campaign banner got , this is added under your existing signature.",Thatityouignaturehasbeenupdated:"That's it - your signature has been updated.",IfyouassignedCampaignBannerinout:"If you are associated with campaign banner is changed, while Outlook is open, when you compose an e-mail nor the old banner in the signature of your E-Mail. This is no problem - the receiver is still the current campaign banner. After the restart of Outlook is the new campaign are displayed correctly.",OpenMozillaThunderbird:"Open Mozilla Thunderbird",RightclickontheemailaccountselectSettings:"Right-click on the email account to which you want to add to the campaign banner and then select “Settings”",Copythemailtasticsignaturbuttonsintheclipboard:"Copy the mailtastic-signatur or the campaign banners by clicking the blue buttons in the clipboard:",MailtasticSignaturcampaignbannerscopytotheclipboard:"Mailtastic-Signatur / campaign banners<br>copy to the clipboard",STEP4A:"STEP 4 A",UnlessuseHTMLtheMailtasticintotheopenfield:"Unless you have “use HTML” is activated, and the Mailtastic signature want to insert , delete any existing code and add the Mailtastic signature into the open field.",Ifcampaigncodeexistexistingcode:"If you want to integrate a campaign banner and already signed code exists, add the campaign banners with just a paragraph spacing under the existing code.",Thebottomrightconfirmwithandthatwasit:"The bottom right or confirm with “OK” and that was it!",STEP4B:"STEP 4 B",signatureenabledpleaseclickonBrowse:"Unless you “Instead, a file as a signature Append” enabled , please click on “Browse”.",WordPadoreditorrightclickonthefileOpenWithWordPad:"... And open the signature file with WordPad or editor (right-click on the file - > Open With - > WordPad).",completecopiedMailtasticsignatureintheblankfield:"Unless you 've got a complete Mailtastic signature zugeordent, delete the existing contents of your old signature and add the copied Mailtastic signature in the blank field.",gotacampaignexistingsignaturetexton:"Unless you 've got a campaign banner zugeordent add, This with a paragraph spacing among the existing signature text on.",Nowjustyetandyouredone:"Now just yet “Save” and you're done!",MADE:"MADE!",campaignbannerwillbedisplayedinyouremails:"Your Mailtatic signature or your campaign banner will be displayed in your emails.",Mailtasticcountlessapplicationsintegrateuchas:"Mailtastic can in countless other applications integrate , such as",followingHTMLsnippetHTMLsignatureareatargetapplication:"and many more.Please copy to the following HTML snippet your Mailtastic signature or your campaign banner and integrate it into the HTML signature area of the target application.",Shouldquestionsariseintheintegrationpleaseus:"Should questions arise in the integration , please do not hesitate to contact us.",Selecttheimageontherightside:"Select the image on the right side",Clickonceinordertoselectitontheimage:"Click once in order to select it on the image.",Copytheimagetotheclipboard:"Copy the image to the clipboard",MailtasticSignaturcampaignbannerscopytotheclipboard:"Mailtastic-Signatur / campaign banners<br>copy to the clipboard",STEP4A:"STEP 4 A",UnlessuseHTMLtheMailtasticintotheopenfield:"Unless you have “use HTML” is activated, and the Mailtastic signature want to insert , delete any existing code and add the Mailtastic signature into the open field.",Ifcampaigncodeexistexistingcode:"If you want to integrate a campaign banner and already signed code exists, add the campaign banners with just a paragraph spacing under the existing code.",Thebottomrightconfirmwithandthatwasit:"The bottom right or confirm with “OK” and that was it!",STEP4B:"STEP 4 B",signatureenabledpleaseclickonBrowse:"Unless you “Instead, a file as a signature Append” enabled , please click on “Browse”.",WordPadoreditorrightclickonthefileOpenWithWordPad:"... And open the signature file with WordPad or editor (right-click on the file - > Open With - > WordPad).",completecopiedMailtasticsignatureintheblankfield:"Unless you 've got a complete Mailtastic signature zugeordent, delete the existing contents of your old signature and add the copied Mailtastic signature in the blank field.",gotacampaignexistingsignaturetexton:"Unless you 've got a campaign banner zugeordent add, This with a paragraph spacing among the existing signature text on.",Nowjustyetandyouredone:"Now just yet “Save” and you're done!",MADE:"MADE!",campaignbannerwillbedisplayedinyouremails:"Your Mailtatic signature or your campaign banner will be displayed in your emails."},de={imprint:"Impressum",ask:"Fragen? +49 6182 955 70 00   |","E-Mail-Signatur-Marketing":"Intelligentes<br>E-Mail-Signatur-Marketing<br>mit Mailtastic",WelcometoMailtastic:"Herzlich willkommen zu Mailtastic. Bitte loggen Sie sich mit<br>Ihren Zugangsdaten ein",nowlogin:"Jetzt einloggen",ForgotPassword:"Passwort vergessen?",Noaccountyet:"Noch keinen Account?",registernow:"Jetzt registrieren",Youradvisor:"Ihr Kundenberater",TaoBauer:"Tao Bauer",campaigns:"Kampagnen",Employee:"Mitarbeiter",Current:"Aktuell",Youradvisor:"Your advisor",TaoBauer:"Tao Bauer",campaigns:"Campaigns",Employee:"Employee",Current:"Current",youropinioncounts:"Ihre Meinung zählt",howcanwe:"Wie können wir<br>uns verbessern?",toimproveyou:"Um Ihnen den größtmöglichen Nutzen zu bieten, entwickeln wir Mailtastic ständig weiter.",Pleaseletmeknowhow:"Bitte lassen Sie mich wissen, wie wir unser Produkt für Sie verbessern können.",Sendfeedback:"Feedback senden",Statisticsdepartment:"Abteilungsstatistik",Currentlyarenodata:"Aktuell liegen noch keine Daten vor",Oncefirstdataareavailable:"Sobald erste Daten vorliegen, können Sie die Performance der Abteilungen vergleichen.",Employee:"Mitarbeiter",Current:"Current",Activecampaigns:"Aktive Kampagnen",Createcampaign:" Kampagne erstellen",Youcurrentlyhavenoactivecampaign:"Sie haben aktuell keine aktive Kampagne",Nowcreateacampaignandassignthem:"Erstellen Sie jetzt eine Kampagne und weisen Sie diese einer Abteilung zu, um Sie an dieser Stelle anzeigen zu lassen.",bestemployee:"Top 3 Mitarbeiter",personnelstatistics:"Personal Statistik",Addemployees:"Mitarbeiter hinzufügen",seen:"Gesehen:",clicks:"Klicks:",clickRate:"Klickrate",OVERVIEW:"ÜBERSICHT",DEPARTMENTS:"ABTEILUNGEN",EMPLOYEE:"MITARBEITER",CAMPAIGNS:"KAMPAGNEN",SIGNATURES:"SIGNATUREN",logout:"Ausloggen",ViewTour:"Tour ansehen",language:"Language",german:"Deutsch",english:"Englisch",account:"Konto ",preferences:"EINSTELLUNGEN",imprint:"Impressum",resources:"RESSOURCEN",statistics:"Statistik",Allcampaigns:"Alle Kampagnen",Nofiguresinthisperiodfor:"Zu dieser Kampagne liegen in diesem Zeitraum keine Zahlen vor",Assignthiscampaigntoanactivedepartment:"Weisen Sie dieser Kampagne einer aktiven Abteilung zu, um an dieser Stelle schon bald die Statistik einsehen zu können.",Employee:"Mitarbeiter",departments:"Abteilungen",All:"Alle",Newdepartment:" Neue Abteilung",Inthecentralregiononeormoreemployees:"Wählen Sie im mittleren Bereich eine oder mehrere Mitarbeiter aus, um an dieser Stelle weitere Informationen zu erhalten.",Actions:"Aktionen",Delete:"Löschen",Lookat:"Ansehen",Edit:"Bearbeiten",Sendinvitationagain:"Einladung erneut senden",active:"Aktiv",Inactive:"Inaktiv",MemberofDivision:"Mitglied in Abteilung",Currentlyinthedepartment:"Aktuell ist in der Abteilung",assignedtoanycampaign:"keine Kampagne zugewiesen.",Assignacampaigntodisplayabannercampaigninthe:"Weisen Sie dieser Abteilung eine Kampagne zu, um einen Kampagnenbanner in der E-Mail dieses Abteilungsmitglieds anzeigen zu lassen.",Actions:" Aktionen",Delete:"Löschen",sendinvitationsagain:"Einladungen erneut senden",Movetodepartment:"In Abteilung verschieben:",selectdepartment:"Abteilung wahlen...",Assignedcampaign:"Zugewiesene Kampagne",Thedepartmentoftheemployee:"Der Abteilung des Mitarbeiters ist keine Kampagne zugewiesen",hasnotyetintegratedthecampaign:"hat den Kampagnen-Banner noch nicht in die E-Mail-Signatur eingebunden.",remindemployees:" Mitarbeiter erinnern","hasintegratedthecurrentcampaignbanner .":"hat den aktuellen Kampagnenbanner integriert.",Toassiganemployeetoanothercampaign:"Um einem Mitarbeiter eine andere Kampagne zuzuweisen, verschieben Sie ihn einfach in die entsprechende Abteilung, oder weisen Sie der Abteilung eine andere Kampagne zu.",anothercampaign:"eine andere Kampagne zu.",Assignedsignature:"Zugewiesene Signatur",Thedepartmentoftheemployeeisassigned:"Der Abteilung des Mitarbeiters ist keine Signatur zugewiesen",hasnotyetintegratedthelatestreleased:" hat noch nicht die aktuellste freigegebene Version dieser Signatur eingebunden.",hasincorporatedthelatestreleasedversion:"hat die aktuellste freigegebene Version dieser Signatur eingebunden.",Thissignaturehasnotyetbeenrolledouttoyourcreation:"Diese Signatur wurde nach Ihrer Erstellung noch nicht ausgerollt.",Forsignature:" Zur Signatur",Toassignadifferentsignaturetoanemployeemove:"Um einem Mitarbeiter eine andere Signatur zuzuweisen, verschieben Sie ihn einfach in die entsprechende Abteilung, oder weisen Sie der Abteilung eine andere Signatur zu.",adifferentsignatureto:" eine andere Signatur zu.",Employee:"Mitarbeiter:",Edit:"Bearbeiten",Delete:"Löschen",edituserdata:"Nutzerdaten bearbeiten",Actions:"Aktionen",Sendinvitationagain:"Einladung erneut senden",Department:"Abteilung:",assigndepartment:"Abteilung zuweisen",Toassignaemployeetoanothercampaign:"Um einem Mitarbeiter eine andere Kampagne zuzuweisen, verschieben Sie ihn einfach in die entsprechende Abteilung.",Currentlyinthedepartment:"Aktuell ist in der Abteilung",assignedtoanycampaign:"keine Kampagne zugewiesen.",Assignacampaigntodisplayabannercampaign:"Weisen Sie dieser Abteilung eine Kampagne zu, um einen Kampagnenbanner in der E-Mail dieses Abteilungsmitglieds anzeigen zu lassen.",ATTENTIONYourfreetrialperiodhasexpired:"ACHTUNG: Ihre kostenlose Testphase ist abgelaufen. Ihr Konto ist nun inaktiv.",Learnmore:"Erfahren Sie mehr",Activateaccountnow:"Account jetzt aktivieren",Yourfreetrialendsin:"Ihre kostenlose Testphase endet in",meet:"Tagen.",bookMailtastic:"Mailtastic buchen",Employee:"Mitarbeiter",Thisdivisioncurrentlyhasnoemployees:"Diese Abteilung hat derzeit keine Mitarbeiter",Createnew:"Neu erstellen",existing:"Vorhandener",Import:"Importieren",Addemployees:"Mitarbeiter hinzufügen",Createnew:"Neu erstellen",existing:"Vorhandener",Import:"Importieren",Assignedcampaign:"Zugewiesene Kampagne",CampaignPerformanceDepartment:"Kampagnen-Performance der Abteilung",Createdon:"Erstellt am:",Employeeshavenotyetincorporated:"Mitarbeiter haben die Kampagne noch nicht eingebunden",rememberthisemployees:"Diese(n) Mitarbeiter erinnern",Allemployeeshaveintegratedthecampaignbanner:"Alle Mitarbeiter haben den Kampagnenbanner integriert.",Createdon:"Erstellt am:",ThisdepartmentisnotassignedCampaign:"Dieser Abteilung ist keine Kampagne zugewiesen",Fromthedropthecampaignwhosebanneryou:"Wählen Sie im Dropdown die Kampagne aus, deren Banner Sie in den E-Mails der Abteilungsmitglieder anzeigen lassen möchten.",Employeesinthisdepartment:"Mitarbeiter in dieser Abteilung",selectall:"Alle auswählen",action:"Aktion",Delete:"Löschen",sort:"Sortieren",firstgivenname:"Vorname",Surname:"Nachname",Emailaddress:"E-Mail-Adresse",campaignstatus:"Kampagnenstatus",Addemployees:"Mitarbeiter hinzufügen",Createnew:"Neu erstellen",existing:"Vorhandener",Import:"Importieren",Current:" Aktuell",Notuptodate:" Nicht aktuell",Unassigned:" Keine zugewiesen",signature:"Signatur",active:"Aktiv",Inactive:"Inaktiv",Unassigned:"Keine zugewiesen",campaign:"Kampagne",Lookat:"Ansehen",Delete:"Löschen",Edit:"Bearbeiten",Sendinvitationagain:"Einladung erneut senden",WarningThisdepartmenthasnostaff:"Achtung - Diese Abteilung hat keine Mitarbeiter!",Nowaddemployees:"Fügen Sie jetzt Mitarbeiter hinzu",SharetheDepartmentofcurrentcampaignperformance:"Anteil der Abteilung an aktueller Kampagnenperformance",Absolute:"Absolut",Relative:"Relativ",Currentlyarenodata:"Aktuell liegen noch keine Daten vor",Oncefirstdataareavailableyoucansee:"Sobald erste Daten vorliegen, können Sie die Statistik hier einsehen.",Oncefirstdataperformanceofdepartments:"Sobald erste Daten vorliegen, können Sie die Performance der Abteilungen vergleichen.",Assignedsignature:"Zugewiesene Signatur",Thissignaturehasnotyetbeenrolled:"Diese Signatur wurde nach Ihrer Erstellung noch nicht ausgerollt.",Forsignature:" Zur Signatur",Employeeshavenotyetincorporatedthe:"Mitarbeiter haben noch nicht die aktuellste freigegebene Version dieser Signatur eingebunden.",rememberthisemployees:"Diese(n)  Mitarbeiter erinnern",Allemployeesofthisdepartmenthavecurrentlysignature:"Alle Mitarbeiter dieser Abteilung verfügen über die aktuell ausgerollte Signatur.",choosesignature:"Signatur wählen....",Thisdivisionisnotyetassignedasignature:"Dieser Abteilung ist noch keine Signatur zugewiesen",Fromthedropthesignaturethatyouwanttodisplayintheemails:"Wählen Sie im Dropdown die Signatur aus, die Sie in den E-Mails der Abteilungsmitglieder anzeigen lassen mï¿½chten.",Department:"Abteilung",Employee:"Mitarbeiter",Actions:"Aktionen",Addemployees:"Mitarbeiter hinzufügen",Delete:"Löschen",Edit:"Bearbeiten",Createnew:"Neu erstellen",existing:"Vorhandener",Import:"Importieren",Activecampaign:"Aktive Kampagne",Createdon:"Erstellt am:",ThisdepartmentisnotassignedCampaign:"Dieser Abteilung ist keine Kampagne zugewiesen",Fromthedropyouwantdepartmentmembers:"Wählen Sie im Dropdown die Kampagne aus, deren Banner Sie in den E-Mails der Abteilungsmitglieder anzeigen lassen möchten.",Aboutdepartmentstoorganizeyouremployeesandassigncampaignsandcampaignbanner:"Über Abteilungen können Sie Ihre Mitarbeiter organisieren und ihnen Kampagnen und Kampagnen-Banner zuweisen",Howwouldyouliketocallthedepartment:"Wie möchten Sie die Abteilung nennen?",title:"Titel",Whichcampaignshouldbeused:"Welche Kampagne soll verwendet werden?",campaign:"Kampagne",Selectcampaign:"Kampagne auswählen",abort:"Abbrechen",storedepartment:"Abteilung speichern",Selectexistingdepartment:"Vorhandene Abteilung auswählen",Whichdepartmentsyourcampaigntodisplay:"In welchen Abteilungen soll Ihre Kampagne angezeigt werden?",selectall:"Alle auswählen",Departmentswherethecampaignhasalreadybeenallocatedarenotincluded:"Abteilungen, denen die Kampagne bereits zugewiesen wurden, werden in der Liste nicht aufgeführt.",abort:"Abbrechen",AssignSelectedDepartments:"Ausgewählten Abteilungen zuweisen",Createanewdepartment:"Neue Abteilung erstellen",AddExistingDepartment:"Vorhandene Abteilung hinzufügen",All:"Alle",action:"Aktion",Delete:"Löschen",sort:"Sortieren",title:"Titel",Createdepartment:"Abteilung erstellen",Employee:"Mitarbeiter",campaign:"Kampagne",Inactive:"Inaktiv",active:"Aktiv",Nostatus:"Inaktiv",UnassignedCampaign:"Keine Kampagne zugewiesen",signature:"Signatur",Current:"Aktuell",Notuptodate:"Nicht aktuell",Nostatus:"Kein Status",Unassignedsignature:"Keine Signatur zugewiesen",Lookat:"Ansehen",Edit:"Bearbeiten",All:"Alle",action:"Aktion",Unassigntodepartment:"Zuweisung zu Abteilung aufheben",AddDivision:"Abteilung hinzufügen",Createnew:"Neu erstellen",Existing:"Vorhandene",sort:"Sortieren",Thiscampaignwillbeusedinanydepartment:"Diese Kampagne wird in keiner Abteilung verwendet",Assignaroundheretogetanoverview:"Weisen Sie einer Abteilung diese Kamapne zu, um hier eine Übersicht zu erhalten.",Employee:"Mitarbeiter",campaign:"Kampagne:",UnassignedCampaign:"Keine Kampagne zugewiesen",setcampaign:"Kampagne setzen",Lookat:"Ansehen",Edit:"Bearbeiten",campaigns:"Kampagnen",All:"Alle",active:"Aktiv",Inactive:"Inaktiv",Inthecentralregiononeormorecampaigns:"Wählen Sie im mittleren Bereich eine oder mehrere Kampagnen aus, um an dieser Stelle weitere Informationen zu erhalten.",Actions:"Aktionen",Delete:"Löschen",Lookat:"Ansehen",Edit:"Bearbeiten",Createdonca:"Erstellt am",Activeindepartments:"Aktiv in Abteilungen",Assigntogetthiscampaigntoadepartmentinformation:" Weisen Sie diese Kampagne einer Abteilung zu, um weitere Informationen zu erhalten.",deletecampaigns:"Kampagnen löschen",Currentlyinthecampaign:"Aktuell ist die Kampagne",assignedtoadepartment:"keiner Abteilung zugewiesen.",selectdepartment:"Abteilung wählen...",appearsinthesignaturesofthecorrespondingdepartmentmembers:"Eine Kampagne besteht aus einem Banner (Grafik) und der URL zum entsprechenden Inhalt. Erst wenn die Kampagne einer Abteilung zugewiesen wurde, erscheint der Banner in den Signaturen der entsprechenden Abteilungsmitgliedern.",CampaignTitle:"Kampagnentitel*",Workingtitleonlvisiblinternally:"Arbeitstitel, nur intern sichtbar",DestinationURLinclWww:"Ziel-Url (inkl. www)*",Whereshouldyourbannerleft:"Wohin soll Ihr Banner linken?",CampaigncolorStatistical:"Kampagnenfarbe (für Statistik)*",Colorofthecampaignforstatistics:"Farbe der Kampagne für die Statistik",Selectacampaignbanner:"Kampagnenbanner auswählen*",FileformatsofCampaigns:"Dateiformate: .jpg / .jpeg / .png / .gif<br>Maximale Dateigröße: 2MB<br>Maximale Bannergröße: 700x210 Pixel (Grüßere Grafiken werden automatisch angepasst)",Werecommendnottoexceedbannersize:"Wir empfehlen Ihnen eine Bannergröße von 500x150 px nicht zu überschreiten.",UploadPhoto:"Grafik hochladen",Preview:"Vorschau:",abort:"Abbrechen",campaigns:"Kampagnen",Activecampaigns:"Aktive Kampagnen",Inactivecampaigns:"Inaktive Kampagnen",Createanewcampaign:"Neue Kampagne erstellen",listsort:"Liste Sortieren",seen:"Gesehen",clicks:"Klicks",clickRate:"Klickrate",listfiltering:"Liste Filtern",All:"Alle",Inactive:"Inaktiv",active:"Aktiv",CreatedOn:"Erstellt am",appropriate:"Angezeigt",Nocampaignyet:"Noch keine Kampagnen vorhanden",Createyourfirstcampaigntogetanoverviewhere:"Erstellen Sie Ihre erste Kampagne, um hier eine Übersicht zu erhalten.",Activeindepartment:"Aktiv in Abteilung",and:"...und",more:"weitere.",activeinanydepartment:"In keiner Abteilung aktiv",All:"Alle",action:"Aktion",Createcampaign:" Kampagne erstellen",CreatedOn:"Erstellt am",campaign:"Kampagne",Assigningadepartment:"Einer Abteilung zuweisen",
Createnew:"Neu erstellen",existing:"Vorhandener",activein:"Aktiv in",departments:"Abteilungen,",Employee:"Mitarbeiter",nofiguresareyetavailableforthiscampaignbefore:"Zu dieser Kampagne liegen noch keine Zahlen vor",Assignthiscampaignepointto:"Weisen Sie dieser Kampagne einer aktiven Abteilung zu, um an dieser Stelle schon bald die Statistik einsehen zu können.",CreatedOn:"Erstellt am",statistics:"Statistik",Allcampaigns:"Alle Kampagnen",Nofiguresinthisperiodforthiscampaignbefore:"Zu dieser Kampagne liegen in diesem Zeitraum keine Zahlen vor",Assignthiscampaigntoanactivedepartmentstatisticssoon:"Weisen Sie dieser Kampagne einer aktiven Abteilung zu, um an dieser Stelle schon bald die Statistik einsehen zu können.",placedstoredvalue:"platziert, Wert hinterlegt",content:"Inhalte",company:"Unternehmen",Employee:"Mitarbeiter",placedvalueissetbystaff:"platziert, Wert wird vom Mitarbeiter gese   tzt",placednorelatedvalue:"platziert, kein Wert hinterlegt",campaignbanner:"Kampagnenbanner",Department:"Abteilung",Createasignature:"Signatur erstellen",signaturename:"Signaturname:",Editsignature:"Signatur bearbeiten:",Yoursignatureinafewsteps:"Ihre Signatur in wenigen Schritten:",Takealookinourtemplatgalleryandchoose:"Werfen Sie einen Blick in unsere Template-Gallerie und wählen Sie eine professionelle Vorlage.",chooseTemplate:"Vorlage wählen",Previewsignature:"Vorschau Signatur",Update:"Aktualisieren",Tagsforwhichnoinformationhasbeenstoredare:"Tags zu denen keine Informationen hinterlegt wurden, werden nicht angezeigt.",Contentswhicharerepresentedastags:"Inhalte die als Tags dargestellt werden, werden von den Mitarbeitern ergänzt.",YouhavemadechangesDoyouwanttosavethis:"Sie haben Anderungen vorgenommen. Möchten Sie diese speichern?",remainforaslongasyouremployeesyouremployees:'>Der jetzige Stand der Signatur (Stand vor der Bearbeitung) bleibt für Ihre Mitarbeiter solange "aktuell", bis Sie den gerade überarbeiteten Stand speichern und erneut auf Ihre Mitarbeiter ausrollen. Wann Sie den Stand ausrollen, können Sie später entscheiden.',abort:"Abbrechen",saveChanges:"Anderungen speichern",NameTags:"Name des Tags",targetlink:"Ziel Link",Viewas:"Darstellung als:",graphic:"Grafik",Alternativetextfordisplayerrors:"Alternativ-Text bei Darstellungsfehlern",linktext:"Linktext",GraphicsSource:"Quelle der Grafik",StandardDisplay:"Standardgrafik",owngraphic:"Eigene Grafik",UploadPhoto:"Grafik hochladen",Preview:"Vorschau:",Sizeofthepermanentlysetaftersavingthesignature:"Größe der Grafik (erst nach dem Speichern der Signatur dauerhaft gesetzt)",originalsize:"Originalgröße",Manually:"Manuell",Widthinpx:"Breite (in px)",Achangetothesignaturesallemployees:"Eine Anderung dieser Information gilt für die Signaturen aller Mitarbeiter.",Changesinthisinformationareincludedsignaturesemployees:"Anderungen in diesen Informationen werden in die Signaturen der Mitarbeiter übernommen, sobald der neuste Stand ausgerollt und von Ihren Mitarbeitern aktualisiert wurde.",rejection:"Verwerfen",Save:"Speichern",NameTags:"Name des Tags",targetlink:"Ziel Link",linkcolor:"Linkfarbe",linktext:"Linktext",Achangetothesignaturesallemployees:"Eine Anderung dieser Information gilt für die Signaturen aller Mitarbeiter.",Changesinthisinformationareincludedsignaturesemployees:"Anderungen in diesen Informationen werden in die Signaturen der Mitarbeiter übernommen, sobald der neuste Stand ausgerollt und von Ihren Mitarbeitern aktualisiert wurde.",rejection:"Verwerfen",Save:"Speichern",NameTags:"Name des Tags",value:"Wert",Add:"(Fügen Sie",onetocreateaparagraph:"ein, um einen Absatz zu erstellen)",Achangetothesignaturesallemployees:"Eine Anderung dieser Information gilt für die Signaturen aller Mitarbeiter.",Changesinthisinformationareincludedsignaturesemployees:"Anderungen in diesen Informationen werden in die Signaturen der Mitarbeiter übernommen, sobald der neuste Stand ausgerollt und von Ihren Mitarbeitern aktualisiert wurde.",rejection:"Verwerfen",Save:"Speichern",Acampaignconsistsofabannecorresponding:"Eine Kampagne besteht aus einem Banner (Grafik) und der URL zum entsprechenden Inhalt. Erst wenn die Kampagne einer Abteilung zugewiesen wurde, erscheint der Banner in den Signaturen der entsprechenden Abteilungsmitgliedern.",CampaignTitle:"Kampagnentitel*",Workingtitleonlyvisibleinternally:"Arbeitstitel, nur intern sichtbar",DestinationURLinclWww:"Ziel-Url (inkl. www)*",Whereshouldyourbannerleft:"Wohin soll Ihr Banner linken?",CampaigncolorStatistical:"Kampagnenfarbe (für Statistik)*",Colorofthecampaignforstatistics:"Farbe der Kampagne für die Statistik",Selectacampaignbanner:"Kampagnenbanner auswählen*",Fileformatsjpgjpeg:"Dateiformate: .jpg / .jpeg / .png<br>Maximale Dateigröße: 1MB<br>Maximale Bannergröße: 700x210 Pixel (Größere Grafiken werden automatisch angepasst)",Werecommendbannersizeof500x150px:"Wir empfehlen Ihnen eine Bannergröße von 500x150 px nicht zu überschreiten.",UploadPhoto:"Grafik hochladen",Preview:"Vorschau:",Colorofthecampaignforstatistics:"Farbe der Kampagne für die Statistik",Selectacampaignbanner:"Kampagnenbanner auswählen*",usetemplate:"Template verwenden",TemplateGallery:"Template-Gallerie",unlocking:"Entsperren",Lock:"Sperren","Import All":"Ausgewählte importieren","Activate All":"Ausgewählte aktivieren","Deactivate All":"Ausgewählte deaktivieren",signature:"Signatur:",rollout:"Ausrollen",Thissignatureisnotactive:"Diese Signatur ist in keiner Abteilung aktiv",Departments:"Abteilung(en)",activein:"Aktiv in",CreateNew:"Neue erstellen",Chooseexisting:"Vorhandene auswählen",Assigningadepartment:"Einer Abteilung zuweisen",preview:"Vorschau",Editsignature:"Signatur bearbeiten",Thesignaturehasnotyetbeenrolledmodification:"Die Signatur wurde nach der Erstellung bzw. Änderung noch nicht ausgerollt!",Someemployeeshaveinvolvedversionsignature:"Einige Mitarbeiter haben noch keine oder eine veraltete Version der Signatur eingebunden.",rollsignature:"Signatur ausrollen",Thesignaturewason:"Die Signatur wurde am",rolledpmandsinceneitherthesignaturenoramended:"Uhr ausgerollt und seit dem wurden weder die Signatur- noch die Unternehmensdaten geändert.",Departmentsthatareassignedtothissignature:"Abteilungen, denen diese Signatur zugewiesen ist",selectall:"Alle auswählen",action:"Aktion",Removeassignmentforsignature:"Zuordnung zur Signatur entfernen",sort:"Sortieren",title:"Titel",rolledout:"Ausgerollt",active:"Aktiv",Assigningadepartment:"Einer Abteilung zuweisen",Thissignatureisnotactiveinanydepartment:"Diese Signatur ist in keiner Abteilung aktiv!",Assignthissignatureemailsdepartmentmembers:"Weisen Sie diese Signatur einer Abteilung zu, um sie in den E-Mails der Abteilungsmitglieder anzeigen zu lassen.",Employee:"Mitarbeiter",campaign:"Kampagne",UnassignedCampaignbr:"Keine Kampagne<br> zugewiesen",Open:"Öffnen",Removeassignmentforsignature:"Zuordnung zur Signatur entfernen",Therearenogroupscampaign:"Es existieren keine Gruppen, die der Kampagne zugeordnet werden können.",NoteGroupsthatarealreadyassigneddisplayed:"Hinweis: Gruppen, die bereits der Kampagne zugeordnet sind, werden nicht angezeigt.",Selectexistingdepartment:"Vorhandene Abteilung auswählen",WhichdepartmentsYoursignatureshoulddisplayed:"In welchen Abteilungen soll Ihre Signatur angezeigt werden?",selectall:"Alle auswählen",Departmentsalreadybeenallocatedincludedlist:"Abteilungen, denen die Signatur bereits zugewiesen wurden, werden in der Liste nicht aufgeführt.",abort:"Abbrechen",AssignSelectedDepartments:"Ausgewählten Abteilungen zuweisen",Aboutdepartmentstoorganizbannerssignatures:"Über Abteilungen können Sie Ihre Mitarbeiter organisieren und ihnen Kampagnen, Kampagnen-Banner und Signaturen zuweisen",Howwouldyouliketocallthedepartment:"Wie möchten Sie die Abteilung nennen?",title:"Titel",Whichcampaignshouldbeused:"Welche Kampagne soll verwendet werden?",Selectacampaign:"Kampagne auswählen...",storedepartment:"Abteilung speichern",yoursignatures:"Ihre Signaturen",Allsignatures:"Alle Signaturen",title:"Titel",rolledout:"Ausgerollt",Createasignature:"Signatur erstellen",sendinvitationsagain:"Einladungen erneut senden",Addemployees:"Mitarbeiter hinzufügen",Import:"Importieren",updatedon:"aktualisiert am",InnoactiveDepartment:"In keiner<br>Abteilung aktiv",activein:"Aktiv in",EmployeeZero:"0 Mitarbeiter",Notrolled:"Nicht ausgerollt",LastReviewNever:"Zuletzt am: Nie",Recentlyat:"Zuletzt am",NoSignatureavailable:"Noch keine Signatur vorhanden",CreateobtainaSummaryhere:"Erstellen Sie Ihre erste Signatur, um hier eine <br>Übersicht zu erhalten",Thesignature:"Die Signatur",wassuccessfullycreated:"wurde erfolgreich erstellt.",hasbeensuccessfullyprocessed:"wurde erfolgreich bearbeitet.",hasbeen:"wurde",Employeeassigned:"Mitarbeiter) zugewiesen:",Thesignature:"Die Signatur",departments:"Abteilungen",is:"ist",assignedstaff:"Mitarbeiter) zugewiesen",employeewas:"Mitarbeiter wurde",successfullytothedepartment:"erfolgreich zur Abteilung",added:"hinzugefügt",Notallemployeeshavethelatestsignature:"Nicht alle Mitarbeiter verfügen über die aktuellste Signatur!",Thustheprocessedstateintegrationguide:"Damit der bearbeitete Stand der Signatur bei Ihren Mitarbeitern angezeigt wird, müssen diese Mailtastic in Ihren E-Mail-Client integrieren. Möchten Sie die betroffenen Mitarbeiter jetzt informieren und Ihnen eine kurze Integrationsanleitung zusenden?",Thesignaturewassuccessfully:"Die Signatur wurde erfolgreich auf",Staffrolledoutviaemail:"Mitarbeiter per E-Mail ausgerollt.",Theemployeeshavereceivedinstructionsreminder:"Die betroffenen Mitarbeiter haben eine Anleitung zum selbstständigen Einbinden der Mailtastic-Signatur erhalten. Sobald ein Mitarbeiter die neueste Version der Signatur integriert hat, wird angezeigt, dass seine Signatur “Aktuell” ist. Mitarbeitern deren Signatur “Nicht aktuell” ist, können Sie jederzeit eine Erinnerung senden.",rolledEasySynemployees:"Easy-Sync Mitarbeiter ausgerollt.",EmployeeswhouseEasySyncthecurrentsignature:"Mitarbeiter, die EasySync verwenden, bekommen voll automatisch die aktuelle Signatur zugespielt.",GoogleAppstaffrolledout:"GoogleApps Mitarbeiter ausgerollt.",EmployeesAppsthecurrentsignature:"Mitarbeiter, die GoogleApps verwenden, bekommen voll automatisch die aktuelle Signatur zugespielt.",Addmorepeople:"Weitere Mitarbeiter hinzufügen",rollLater:"Später ausrollen",Doneforsignature:"Fertig, zur Signatur",Thesignature:"Die Signatur",Thesignaturedepartmentwhichemployeesare:"Die Signatur ist keiner Abteilung zugewiesen, in der sich Mitarbeiter befinden.",hasbeensuccessfullyprocessed:"wurde erfolgreich bearbeitet.",Assignsignatureleast1department:"Weisen Sie die Signatur mindestens einer Abteilung zu, und stellen Sie sicher, dass sich mindestens 1 Mitarbeiter in dieser Abteilung befindet.",Forsignature:"Zur Signatur",Thesignature:"Die Signatur",hasbeensuccessfullysaved:"wurde erfolgreich gespeichert.",TorollsinglesignaturewillneedanactiveMailtasticfare:"Um die einheitliche Signatur auf Ihre Mitarbeiter auszurollen, benötigen Sie einen aktiven Mailtastic-Tarif.",WouldenableunlimiteduseyournewsignatureMailtasticfare:"Möchten Sie jetzt einen Mailtastic-Tarif aktivieren um Ihre neue Signatur uneingeschränkt nutzen zu können?",BookMailtasticfarenow:"Mailtastic-Tarif jetzt buchen",Aboutandassigncampaignsandcampaignbanner:"Über Abteilungen können Sie Ihre Mitarbeiter organisieren und ihnen Kampagnen und Kampagnen-Banner zuweisen",Howwouldtocallthedepartment:"Wie möchten Sie die Abteilung nennen?",Back:"Zurück",UnassignedCampaign:"Keine Kampagne<br> zugewiesen",Theredepartmentsthatcanbeassociatedwiththesignature:"Es existieren keine Abteilungen, die der Signatur zugeordnet werden können.",Notedepartmentsthatarealreadyassigneddisplayed:"Hinweis: Abteilungen, die bereits der Signatur zugeordnet sind, werden nicht angezeigt.",Thissignaturesignaturenowadepartment:"Diese Signatur ist noch nicht aktiv. Weisen Sie die Signatur jetzt einer Abteilung zu.",Inorderyoumustassignrelevantemployeesare:"Damit die Signatur in den E-Mails Ihrer Mitarbeiter angzeigt wird, müssen Sie die Signatur den Abteilungen zuweisen, in denen sich die entsprechenden Mitarbeiter befinden.",endprematurely:"Vorzeitig beenden",WhichdepartmentsYoursignatureshouldbedisplayed:"In welchen Abteilungen soll Ihre Signatur angezeigt werden?",Departmentsbeenassignedincludedthelist:"Abteilungen, denen die Signatur bereits zugewiesen wurde, werden in der Liste nicht aufgeführt.",AssignSelectedDepartments:"Ausgewählten Abteilungen zuweisen",Whichdepartmentassignthenewemployee:"Welcher Abteilung möchten Sie den neuen Mitarbeiter zuordnen?",WedisturbyouremployeenvitationemployeeWewillremindyouagain:"Wir wollen Ihre Mitarbeiter nicht stören. Neue Mitarbeiter erhalten erst eine Einladungs-E-Mail, wenn Sie Mailtastic anweisen, die Mitarbeiter zu benachrichtigen. Wir werden Sie noch einmal daran erinnern.",Sendasemailtome:"Beispiel E-Mail an mich senden",Whodowanttoadd:"Wen möchten Sie hinzufügen?",add:"Hinzufügen",Theassigneddepartmentsareempty:"Die zugewiesenen Abteilungen sind leer!",Atpresentthesignaturedepartmentsadded:"Derzeit wird die Signatur noch bei keinem Mitarbeiter angezeigt. Fügen Sie jetzt Mitarbeiter zu den entsprechenden Abteilungen hinzu.",Thereemployeewhocanbeassignedtothegroup:"Es existieren keine Mitarbeiter, die der Gruppe zugeordnet werden können.",NoteEmployeeswhothegrouparenotdisplayed:"Hinweis: Mitarbeiter, die bereits der Gruppe angehören, werden nicht angezeigt.",ViaExcel:"Via Excel",Othersources:"Andere Quellen",WedonotanMailtasticnotifywilremindyouagain:"Wir wollen Ihre Mitarbeiter nicht stören. Neue Mitarbeiter erhalten erst eine Einladungs-E-Mail, wenn Sie Mailtastic anweisen, die Mitarbeiter zu benachrichtigen. Wir werden Sie noch einmal daran erinnern.",Whichdepartmenttoassignthenewemployee:"Welcher Abteilung möchten Sie den neuen Mitarbeiter zuordnen?","1FilltheExceltemplate":"1. Excel-Vorlage ausfüllen",downloadtemplate:"Vorlage herunterladen","2UploadExceldocument":"2. Excel-Dokument hochladen",Chooseafile:"Datei auswählen","3StaffImport":"3. Mitarbeiter Importieren",Employeestoagaineveniftheyexistinthepresenttable:"Mitarbeiter, die bereits zu Mailtastic hinzugefügt wurden, werden nicht erneut importiert (auch wenn diese in der vorliegenden Tabelle vorhanden sind).",importstaff:"Mitarbeiter importieren",Whichdepartmenttoassignthenewemployee:"Welcher Abteilung möchten Sie den neuen Mitarbeiter zuordnen?",EmployeesareinformedconfirmationtheuseofMailtastic:"Mitarbeiter werden erst später und nur nach Bestätigung von Ihnen über die Nutzung von Mailtastic informiert.",Whichemployeesassignyournewdepartment:"Welche Mitarbeiter möchten Sie Ihrer neuen Abteilung zuweisen?",Employeesdepartmentarenotlisted:"Mitarbeiter die bereits Mitglied dieser Abteilung sind, werden in der Liste nicht aufgeführt.",Assignselectedemployees:"Ausgewählte Mitarbeiter zuweisen",Incentralinformationatthispoint:"Wählen Sie im mittleren Bereich eine oder mehrere Abteilungen aus, um an dieser Stelle weitere Informationen zu erhalten.",assignedtoanycampaign:"keine Kampagne zugewiesen.",Assigncampaigntobannercampaignthatdepartment:"Weisen Sie dieser Abteilung eine Kampagne zu, um einen Kampagnenbanner in der E-Mail dieses Abteilungsmitglieds anzeigen zu lassen.",Cleardivisions:"Abteilungen löschen",Assigncampaigns:"Kampagne zuweisen:",NeedHelp:"Sie benötigen Hilfe?",NoproblemIliketohelpSimply:"Kein Problem - gerne helfe Ich Ihnen persönlich weiter!<br> Nutzen Sie unseren<br>kostenlosen Live-Chat (unten<br> rechts) oder rufen Sie uns<br>einfach an: 06182 955 70 00",Gmailusers:"GoogleMail Nutzer",activebracket:"aktiv)",Imported:"Importiert",Synchronized:"Synchronisiert",cancelGmailSync:"GoogleMail-Sync aufheben",WarningGoogleAdminaccountcontinue:"Achtung: Sie sind im Begriff die Verbindung zum Google-Admin-Account zu löschen. Möchten Sie wirklich fortfahren?",BandagedGoogleAdminaccount:"Verbundener Google-Admin-Account:",WarningdeleteaccountDoyoureallywanttocontinue:"Achtung: Sie sind im Begriff die Verbindung zum Google-Admin-Account zu löschen. Möchten Sie wirklich fortfahren?",HowcoursesynchronizationwereappliedasMailtasticmember:"Wie möchten Sie mit den Mitarbeitern verfahren, die im Zuge der Synchronisation als Mailtastic-Nutzer angelegt wurden?",selectadjustment:"Einstellung wählen",Removeemployee:"Mitarbeiter entfernen",AllemployeesconnectionGoogleasMailtasticusers:"Alle Mitarbeiter die über die Verbindung mit Google als Mailtastic-Nutzer angelegt wurden, werden endgültig gelöscht und die Synchronisierung aufgehoben.",retainemployees:"Mitarbeiter behalten",AllMailtasticusersretainedandcanstillbemanaged:"Alle Mitarbeiter die über die Verbindung mit Google als Mailtastic-Nutzer angelegt wurden, bleiben erhalten und können weiterhin verwaltet werden.",deletetheconnectionaccountcontinue:"Achtung: Sie sind im Begriff die Verbindung zum Google-Admin-Account zu löschen. Möchten Sie wirklich fortfahren?",Pleaseenteryourpasswordtoconfirmthedeletion:"Bitte geben Sie Ihr Passwort ein, um die Löschung zu bestätigen:",Enterpassword:"Passwort eingeben",Clearconnectionnow:"Verbindung jetzt löschen",Setsynchronization:"Set synchronization",HowyouwanttosyncGmailwithMailtastic:"Wie möchten Sie die GoogleMail-Nutzer mit Mailtastic synchronisieren?",Automaticsynchronizationrecommended:"Automatische Synchronisation (empfohlen)",AllGmailsynchronizedMailtasticuptodateMore:"Alle GoogleMail-Nutzer und deren Signaturen werden automatisch mit Mailtastic synchronisiert und auf dem neusten Stand gehalten. Mehr... ",Manualsynchronization:"Manuelle Synchronisation",ThereGmailuserssynchronizedusersthemselves:"Es werden ausschließlich die Signaturen der manuell für Mailtastic aktivierten GoogleMail-Nutzer synchronisiert, nicht aber die Nutzer selbst.  Mehr...",Continue:"Weiter",OrganizationalstructureofyourGoogleAppaccounts:"Organisations-Struktur Ihres GoogleApp-Accounts übernehmen",GmaildepartmentsassignedcorrespondAccounts:"GoogleMail-Nutzer die zu Mailtastic hinzugefügt werden, werden Abteilungen zugewiesen, die den Organisationen Ihres Google-Accounts entsprechen.",Createanewstructure:"Neue Struktur erstellen",Gmailuserstheorganizedmanuallybyyou:"GoogleMail-Nutzer, die zu Mailtastic hinzugefügt werden, werden automatisch in die “Standard-Abteilung” verschoben und können von Ihnen manuell organisiert werden.",ConjunctionwithGooglemade:"Verbindung mit Google hergestellt",Settingorganization:"Organisation einstellen",TheconnectiontoyourWorksuccessfullyestablished:"Die Verbindung zu Ihrem “ Google Apps for Work ”  - Konto wurde erfolgreich hergestellt.",HoworganizetheGoogleAppusersinMailtastic:"Wie möchten Sie die GoogleApp-Nutzer in Mailtastic organisieren?",takeorganizationalstructureyourGoogleAppaccounts:"Organisations-Struktur Ihres GoogleApp-Accounts übernehmen",GmaildepartmentsorganizationsAccounts:"GoogleMail-Nutzer die zu Mailtastic hinzugefügt werden, werden Abteilungen zugewiesen, die den Organisationen Ihres Google-Accounts entsprechen.",Gmailmanuallybyyou:"GoogleMail-Nutzer, die zu Mailtastic hinzugefügt werden, werden automatisch in die “ Standard-Abteilung” verschoben und können von Ihnen manuell organisiert werden.",SyncCancel:"Sync Abbrechen",ConnectingtotheGooglemailaccount:"Verbindung zum GoogleMail-Account herstellen",Synchronizeyoursignatureautomaticallykeepdate:"Synchronisieren Sie den GoogleMail-Account Ihres Unternehmens mit Mailtastic, um eine einheitliche E-Mail-Signatur auf alle Mitarbeiter auszurollen und automatisch auf dem neusten Stand zu halten.",Itthiseasy:"So einfach funktioniert's:",ClickConnecttoGoogleApps:"Klicken sie auf “Mit Google Apps verbinden”,",selectMailtasticthehortsetupwizard:"wählen Sie den Google-Admin-Account, den Sie mit Mailtastic verbinden möchten und folgen Sie dem kurzen Einrichtungsassistenten.",DuringallTheSynchronizationdisabledatanytime:"Im Laufe des folgenden Prozesses können Sie wählen, ob Sie die Synchronisation für alle GoogleMail-Nutzer aktivieren möchten (empfohlen), oder nur für bestimmte Nutzer. Die Synchronisation kann jederzeit deaktiviert werden.",ConnecttoGoogleApps:"Mit Google Apps verbinden",ConnecttoGmailprepared:"Verbindung mit GoogleMail hergestellt",Organizationwasmade:"Organisation wurde vorgenommen",ThetheGoogleaccountwassuccessfullyestablished:"Die Verbindung zum Google Konto wurde erfolgreich hergestellt",OrganisationoftheforWorkstructure:"Organisation der “Google Apps for Work” - Nutzer in Mailtastic wurde auf “Neue Struktur erstellen” gesetzt",OrganisationtakedepartmentalstructureofGoogleset:" Organisation der “Google Apps for Work” - Nutzer in Mailtastic wurde auf “Abteilungs-Struktur von Google übernehmen” gesetzt",Whichyouwanttoenablesynchronization:"(Google-Apps-Nutzer die bereits zu Mailtastic hinzugefügt wurden, erscheinen nicht in dieser Liste, können aber später über Google-Apps-Sync verwaltet werden.)",googleuserswhicharealreadyexistingarenotshowed:"Google Users which are already added to mailtastic are not showed here but can be managed in the next step.",SignaturesSyncinactive:"Signaturen-Sync inaktiv",importNostaffavailable:"Keine Mitarbeiter zum importieren vorhanden",EitheremployeesMailtasticavailable:"Entweder Ihr Google Apps For Work Account beinhaltet keine Mitarbeiter oder alle Mitarbeiter sind bereits in Mailtastic vorhanden",managewithgoogle:"Mit Google verwalten",SignaturesSyncactive:"Signaturen-Sync aktiv",enablesync:"Synchronisation aktivieren",disablesynchronization:"Synchronisation deaktivieren",importusers:"Nutzer importieren",disableemployeessync:"Mitarbeiter-Sync deaktivieren",Cautionyouareabout:"Achtung, Sie sind im Begriff",Gmailsynchronizationreallywanttocontinue:"GoogleMail-Nutzer von der automatischen Synchronisierung auszuschließen. Möchten Sie wirklich fortfahren?",Userstherelevantemployeesyourtariff:"Die Nutzer bleiben weiterhin als Mitarbeiter bei Mailtastic erhalten und können jederzeit wieder für die Synchronisierung aktiviert werden. Löschen Sie die entsprechenden Mitarbeiter, um die Nutzer aus Ihrem Tarif zu entfernen.",CautionyouareabouttoGmail:"Achtung, Sie sind im Begriff den GoogleMail-Nutzer",excludefromautomaticsynchronizationcontinue:"von der automatischen Synchronisierung auszuschließen. Möchten Sie wirklich fortfahren?",Theusewillstillbeperformedyourtariff:"Der Nutzer bleibt weiterhin als Mitarbeiter bei Mailtastic erhalten und kann jederzeit wieder für die Synchronisierung aktiviert werden. Löschen Sie den entsprechenden Mitarbeiter, um den Nutzer aus Ihrem Tarif zu entfernen.",Enableemployeessync:"Mitarbeiter-Sync aktivieren",Manualoptionsynchronizationandthentryagain:"Um die Synchronisation fﬁr einzelne Nutzer zu aktivieren. w'a‘uhlen Sie bitte fiir die Mitarbeiter-Synchronisation die Option Manuelle~Synchronisation und versuchen Sie es dann erneut.",shoot:"Schheßen",AutoSyncforthisemployeewasstopped:"Die automatische Synchronisierung für diese(n) Mitarbeiter wurde gestoppt.",Changessnippetreservessignature:"Änderungen an Signaturen werden nicht mehr an diese(n) Mitarbeiter ausgespielt. Die Kampagne wird weiterhin aktualisiert, solange der Mitarbeiter existiert und den Mailtastic-Snippet in seiner Signatur behält.",done:"Fertig",TheChangesautomatically:"Der bzw. die Mitarbeiter wurde(n) erfolgreich zur Liste der zu synchronsierenden Mitarbeiter hinzugefügt. Änderungen an Signatur und Kampagne werden ab jetzt automatisch in deren Signatur übertragen.",settings:"Einstellungen",WarningreconcilingoverMailtastic:"Achtung: Es gibt Nutzer in Ihrem GoogleMail-Account, deren Signaturen nicht über Mailtastic synchronisiert werden!",Inthelowertheusersandenablesync:"Im unteren Bereich können Sie die Nutzer importieren bzw. die Synchronisierung aktivieren",TheyourGoogleAdminaccountisactive:"Die Verbindung zu Ihrem Google-Admin-Account ist aktiv",ConnectedtoGooglmailaccount:"Verbunden mit GoogleMail-Account:",solvingconnection:"Verbindung lösen",SettingfortheorganizationofGoogleusers:"Einstellung für die Organisation neuer Google-Nutzer",GoogleAppassumestructure:"GoogleApp-Struktur übernehmen",departmentsassignedthatcorrespondyourGoogleAccounts:"Google-Nutzer die zu Mailtastic hinzugefügt werden, werden Abteilungen zugewiesen, die den Organisationen Ihres Google-Accounts entsprechen.",Googleuserstobeaddedtostandarddepartment:"Google-Nutzer die zu Mailtastic hinzugefügt werden, werden der Standard-Abteilung zugewiesen.",Change:"Ändern",Cautionyouareabout:"Achtung, Sie sind im Begriff",excludesynchronizationcontinue:"GoogleMail-Nutzer von der automatischen Synchronisierung auszuschließen. Mochten Sie wirklich fortfahren?",Theuserwillstillbeperformedsynchronizationyourtariff:"Der Nutzer bleibt weiterhin als Mitarbeiter bei Mailtastic erhalten und kann jederzeit wieder für die Synchronisierung aktiviert werden. Löschen Sie den entsprechenden Mitarbeiter, um den Nutzer aus Ihrem Tarif zu entfernen.",Mailtastic14days:"Testen Sie Mailtastic 14 Tage lang kostenlos",Noautomaticrenewal:"Keine automatische Verlängerung",Setupinminutes:"Setup in wenigen Minuten",achievedirectresults:"Direkte Ergebnisse erzielen",Pleasevalidemailaddress:"Bitte geben Sie eine gültige E-Mail Adresse ein",Please6characters:"Bitte vergeben Sie mindestens 6 Zeichen",Thepasswordsdonotmatch:"Die eingegebenen Passwörter stimmen nicht überein",Registernow:"Jetzt anmelden",PleaseaccepttheTermsandConditions:"Bitte akzeptieren Sie die AGB",Iacceptthe:"Ich akzeptiere die",Conditions:"AGBs",and:"und",PrivacyPolicy:"Datenschutzbestimmungen",Youalreadyhaveanaccount:"Sie haben bereits einen Account?",loginnow:"Jetzt einloggen",Equalwego:"Gleich geht's los!",company:"Unternehmen",recommender:"Empfehlungsgeber",now:"jetzt",create:"erstellen",Pleaseopennowinbox:"Bitte öffnen Sie jetzt<br> Ihr E-Mail-Postfach!",Tocompleteregistrationactivation:"Um den Anmeldeprozess abzuschließen, klicken Sie bitte auf den Aktivierungslink, den Sie per E-Mail",havereceived:"erhalten haben.",Shouldyourspamfolder:"Sollten Sie in den nächsten Minuten keine E-Mail erhalten, überprüfen Sie bitte, ob die E-Mail ggf. in Ihrem Spam-Ordner gelandet ist.",SavePassword:"Passwort speichern",Resetnow:"Jetzt zurücksetzen",Emailaddress:"E-Mail-Adresse*",RepeatEmail:"E-Mail wiederholen*",NewPassword:"Neues Passwort*",Repeatnewpassword:"Neues Passwort wiederholen*",Hello:"Hallo",welcomeMailtastic:"willkommen bei Mailtastic",introduction:"Einleitung",completedata:"Daten ergänzen",askspersonaldatasheet:"bittet Sie, Ihr persönliches Datenblatt zu ergänzen:",Donotworrycompanyemailsignature:"Keine Angst – die eingegebenen Daten werden lediglich verwendet, um Ihre persönliche Unternehmens-E-Mail-Signatur zu erstellen.",Alldataarealreadycomplete:"Alle Daten sind bereits komplett.",Ineedhelp:"Ich brauche Hilfe",storedataandtothenextstep:"Daten speichern und zum nächsten Schritt",Thatitthanksforyourhelp:"Das war’s - danke für Ihre Hilfe!",Yournewsuccessfullyactive:"Ihre neue Signatur wird jetzt unter Ihren E-Mails angezeigt, sofern Sie die Integration erfolgreich durchgeführt haben. Sobald Sie die erste E-Mail mit der neuen Signatur verfassen, werden Sie für den Administrator als “aktiv” angezeigt.",Yourpersonalalwaysreachlink:"Ihre persönlichen Daten können Sie jederzeit über den folgenden Link erreichen und anpassen:",introduction:"Einleitung",instructions:"Anleitung",Anyquestions:"Sie haben Fragen?",Yourcontactpersoninyourcompany:"Ihr Ansprechpartner in Ihrem Unternehmen:",Fortechnicalquestionstime:"Bei technischen Fragen steht Ihnen das Mailtastic-Team gerne jederzeit kostenlos zur Verfügung:",Yoursuccessfullytestedcompletely:"Ihre Daten wurden erfolgreich geprüft und sind komplett!",Thisisyournew:"Das ist Ihre neue",Mailtasticsignature:"Mailtastic-Signatur.",Campaignbannerss:"Kampagnen-Banner.",asksyouyournew:"bittet Sie, Ihre neue",nowintegrate:"jetzt einzubinden.",asksyouyournewMailtastic:"bittet Sie, Ihren neuen Mailtastic",CampaignBanner:"Kampagnen-Banner",nowinyouremailsignature:"jetzt in Ihre E-Mail-Signatur einzubinden.",Simplyfollowinginstructions:"Folgen Sie dazu einfach der folgenden Anleitung:",IntegrationInstructions:"Integrations-Anleitung",Wheresignatureoryourcampaignbanner:"Wo möchten Sie Ihre Signatur bzw. Ihren Kampagnen-Banner einbinden?",Choose:"Auswählen...",Other:"Andere...",Ineedhelp:"Ich brauche Hilfe",DoneImailtasticintegrated:"Fertig, ich habe mailtastic integriert!",asksyourhelp:"bittet <br> um Ihre Mithilfe:","1WHATISIT":"1. WORUM GEHT'S?",ForthecentralpresentationservicesofMailtastic:"Für das zentrale E-Mail-Marketing-Management und die Darstellung einer einheitlichen E-Mail-Signatur nutzt Ihr Unternehmen den Service von Mailtastic.",asksyourcompanyignaturenow:"bittet Sie, Ihre Unternehmens-Signatur jetzt zu aktualisieren:","2WHATDOIMAKE":"2. WAS MUSS ICH MACHEN?",ToensureThatsisquiteeasy:"Damit Ihre E-Mail-Signatur in Zukunft immer auf dem neusten Stand ist, müssen Sie Mailtasitc in Ihre E-Mail-Signatur einbinden. Das ist ganz einfach:",Pamperintegrationprocessconduct:"Lassen Sie sich im nächsten Abschnitt einfach Schritt für Schritt durch den kurzen Integrationsprozess leiten.",Continuetonextstep:"Weiter zum nächsten Schritt",Exceptionalabout3minutes:"Einmaliger Zeitaufwand: ca. 3 Min.",STEP1:"SCHRITT 1",OpenGmailrightandchooseSettings:"Öffnen Sie Gmail, klicken Sie rechts oben auf das Zahnrad-Symbol und wählen Sie “Einstellungen” aus",STEP2:"SCHRITT 2",Scrolldowntothetoinsert:"Scrollen Sie nach unten bis zum Abschnitt “Signatur” und wählen Sie das E-Mail-Konto aus, bei dem Sie den Kampagnenbanner einfügen möchten.",CopyMailtasticblueButtonstotheclipboard:"Kopieren Sie die Mailtastic-Signatur bzw. den Kampagnen-Banner durch klicken des blauen Buttons in die Zwischenablage:",MailtasticCampaignBannertoclipboard:"Mailtastic-Signatur / Kampagnen-Banner<br>in die Zwischenablage kopieren",IfContentsyouroldcopiedblankField:"Sofern Sie ein komplette Mailtastic-Signatur zugeordnet bekommen haben, löschen Sie den Inhalt Ihrer alten Signatur und fügen Sie die kopierte Mailtastic-Signatur in das leere Feld ein.",Iftheexistingsignaturetext:"Sofern Sie einen Kampagnen-Banner zugeordnet bekommen haben, fügen Sie diesen mit einem Absatz Abstand unter den bestehenden Signatur-Text ein.",SavetheSaveChangesThatit:"Speichern Sie Ihre Einstellungen jetzt noch, indem Sie am unteren Ende der Seite auf “Änderungen speichern” klicken. Das war’s!",Done:"Geschafft!",YourMailtasticEmailsdisplayed:"Ihre Mailtastic-Signatur bzw. Ihr Kampagnen-Banner wird nun in Ihren E-Mails angezeigt.",CautionMozillaFirefoxbanner:"Achtung: Dieser Prozess funktioniert aktuell nicht mit dem Browser “Safari”. Bitte nutzen Sie vorübergehend “Mozilla Firefox” oder “Google Chrome”, um den Banner einzubinden.",StarttheprogramMailonyourMac:"Starten Sie das Programm “Mail” auf Ihrem Mac ...",AndMailmenusettings:"... und öffnen Sie unter “Mail” den Menüpunkt “Einstellungen ...”",Clickthisemailaccounteasilycreatehereon:"Klicken Sie auf den Menüpunkt “Signaturen” und wählen Sie das E-Mail-Konto (linker Bereich) und die Signatur (mittlerer Bereich) aus, in die Sie den Kampagnenbanner einbinden wollen. (Wenn Sie bei diesem E-Mail-Konto noch keine Signatur haben, können Sie diese hier einfach über “+” erstellen.)",STEP4:"SCHRITT 4",CopytheblueButtonstotheclipboard:"Kopieren Sie die Mailtastic-Signatur bzw. den Kampagnen-Banner durch klicken des blauen Buttons in die Zwischenablage:",UnlesstheContentsemptybox:"Sofern Sie ein komplette Mailtastic-Signatur zugeordent bekommen haben, löschen Sie den Inhalt Ihrer alten Signatur und fügen Sie die kopierte Mailtastic-Signatur in das leere Feld ein.",UnlesswithParagraphexistingsignaturetext:"Sofern Sie einen Kampagnen-Banner zugeordent bekommen haben, fügen Sie diesen mit einem Absatz Abstand unter den bestehenden Signatur-Text ein.",Importantex:"Wichtig:",Ifyouonlywantleastyet:"Wenn Sie nur den Kampagnen-Banner einfügen möchten, muss neben dem Banner mindestens noch ein Buchstabe in der Signatur vorhanden sein.",STEP5:"SCHRITT 5",NowtheSelectCampaignbannersdisplayed:"Schließen Sie nun das Signaturfenster. Sobald Sie nun eine neue E-Mail schreiben und die entsprechende Signatur auswählen, wird Ihre neue Mailtastic-Signatur bzw. Ihr Kampagnen-Banner angezeigt.",
NOINSTRUCTIONSFOUND:"KEINE ANLEITUNG GEFUNDEN?",SoonUntilhappyhelpyou:"Bald können wir Ihnen an dieser Stelle Anleitungen für noch mehr E-Mail-Clients anbieten. Bis es soweit ist, teilen Sie uns bitte mit, welchen Client Sie nutzen und wenden Sie sich an unser Support-Team. Wir helfen Ihnen gerne weiter!",WhatclientDOYOUUSE:"WELCHEN E-MAIL-CLIENT NUTZEN SIE?",Uniquetimeabout3minutes:"Einmaliger Zeitaufwand: ca. 3 Min.",OpenMicrosoftoutlook:"Öffnen Sie Microsoft Outlook ...",AndleftofNewMail:"... und klicken Sie oben links auf “Neue E-Mail”.",Thisopenssignaturesedit:"Nun öffnet sich das E-Mail-Schreiben-Dialogfenster. Klicken Sie oben rechts unter “Signatur” auf “Signaturen bearbeiten...”",STEP3:"SCHRITT 3",ThisopenstheToinserthavepointabout:"Nun öffnet sich der Signatur-Verwaltungsbereich. Wählen Sie die Signatur aus, in die Sie die Mailtastic-Signatur bzw. den Signaturbanner einfügen möchten. (Sofern Sie noch keine Signatur angelegt haben, können Sie dies an dieser Stelle über “+” tun.)",CopytheMailtasticsignatureblueButtonstotheclipboard:"Kopieren Sie die Mailtastic-Signatur bzw. den Kampagnen-Banner durch klicken des blauen Buttons in die Zwischenablage:",UnlessMailtasticsignatureemptybox:"Sofern Sie ein komplette Mailtastic-Signatur zugeordent bekommen haben, löschen Sie den Inhalt Ihrer alten Signatur und fügen Sie die kopierte Mailtastic-Signatur in das leere Feld ein.",Unlessyoucampaignexistingsignaturetext:"Sofern Sie einen Kampagnen-Banner zugeordent bekommen haben, fügen Sie diesen mit einem Absatz Abstand unter den bestehenden Signatur-Text ein:",Ifyouonlywantleastyet:"Wenn Sie nur den Kampagnen-Banner einfügen möchten, muss neben dem Banner mindestens noch ein Buchstabe in der Signatur vorhanden sein.",Closedialogboxcorrespondingsignaturfrom:"Schließen Sie das Signaturen-Dialogfenster. Sobald Sie nun eine neue E-Mail schreiben, wählen Sie unter “Signatur” einfach die entsprechende Signatur aus ...",NowtheSelectCampaignbannersdisplayed:"Schließen Sie nun das Signaturfenster. Sobald Sie nun eine neue E-Mail schreiben und die entsprechende Signatur auswählen, wird Ihre neue Mailtastic-Signatur bzw. Ihr Kampagnen-Banner angezeigt.",Exceptionaltimeabout1minute:"Einmaliger Zeitaufwand: ca. 1 Min.",STEP1OF3:"SCHRITT 1 VON 3",ClickonthebuttontotheMailtasticProgramdownload:"Klicken Sie auf den folgenden Button um das Mailtastic Programm “EasySync” herunterzuladen:",STEP2OF3:"SCHRITT 2 VON 3",OpenEasySyncandrunthefiledouble:"Öffnen Sie den Ordner, in dem Sie EasySync gespeichert haben und führen Sie die Datei aus (Doppelklick).",Followtheinstallationinstructions:"Folgen Sie den Installationshinweisen.",ImportantNOTE:"Wichtiger Hinweis:",Ifprogramsrequiresnoinstallation:"Sollte es Ihnen nicht möglich sein Programme zu installieren,können Sie den Mailtastic Integrationsassistenten herunterladen, der ohne Installation auskommt. Diesen finden Sie",STEP3OF3:"SCHRITT 3 VON 3",MailtasticEasySyncopensenteryourintegration:"Mailtastic EasySync wird geöffnet. Geben Sie Ihre E-Mail Adresse ein, an die Sie die Einladungsmail erhalten haben und geben Sie anschließend Ihren Integrations-Code ein:",Copyintegrationcodetotheclipboard:"Integration-Code in die Zwischenablage kopieren",Selectthesignatureunderyourexistingsignature:"Wählen Sie die Signatur aus, in die ihre neue Mailtastic-Signatur oder Ihr Kampagnen-Banner integriert werden soll und starten Sie die Integration. Wenn Ihnen eine Mailtastic-Signatur zugeordnet wurde, wird Ihre alte Signatur ersetzt. Wenn Sie einen Kampagnen-Banner zugewiesen bekommen haben, wird dieser unter Ihre bestehende Signatur angefügt.",Thatautomaticallysynchronizedfromnow:"Das war’s - Ihre Signatur wird ab jetzt voll automatisch synchronisiert.",IfyouassignedCampaignBannerComposingcampaigndisplayedcorrectly:"Wenn der Ihnen zugeordnete Kampagnenbannergeändert wird, während Sie Outlook geöffnet haben, kann beim Verfassen einer E-Mail noch der alte Banner in der Signatur ihrer E-Mail angezeigt werden. Das ist kein Problem - der Empfänger erhält trotzdem den aktuellen Kampagnenbanner. Nach dem Neustart von Outlook wird die neue Kampagne korrekt angezeigt.",ClicktheIntegrationWizarddownload:"Klicken Sie auf den folgenden Button um den Integrations-Assistenten herunterzuladen:",OpenEasyIntegrateandrunthefiledouble:"Öffnen Sie den Ordner, in dem Sie EasyIntegrate gespeichert haben und führen Sie die Datei aus (Doppelklick).",mayRunthesoftwareonRun:"Sollten Sie eine Sicherheitswarnung erhalten, können Sie die Software über “Ausführen” starten.",TheMailtasticEnteryourintegrationcode:"Der Mailtastic Inntegrations-Assistent wird geöffnet. Geben Sie Ihren Integrations-Code ein:",CopyIntegrationtotheclipboard:"Integration-Ccode in die Zwischenablage kopieren",Selectthesignatureaddedyourexistingsignature:"Wählen Sie die Signatur aus, in die ihre neue Mailtastic-Signatur oder Ihr Kampagnen-Banner integriert werden soll und starten Sie die Integration. Wenn Ihnen eine Mailtastic-Signatur zugeordnet wurde, wird Ihre alte Signatur ersetzt. Wenn Sie einen Kampagnen-Banner zugewiesen bekommen haben, wird dieser unter Ihre bestehende Signatur angefügt.",Thatityouignaturehasbeenupdated:"Das war’s - Ihre Signatur wurde aktualisiert.",IfyouassignedCampaignBannerinout:"Wenn der Ihnen zugeordnete Kampagnenbanner geändert wird, während Sie Outlook geöffnet haben, kann beim Verfassen einer E-Mail noch der alte Banner in der Signatur ihrer E-Mail angezeigt werden. Das ist kein Problem - der Empfänger erhält trotzdem den aktuellen Kampagnenbanner. Nach dem Neustart von Outlook wird die neue Kampagne korrekt angezeigt.",OpenMozillaThunderbird:"Öffnen Sie Mozilla Thunderbird",RightclickontheemailaccountselectSettings:"Klicken Sie mit Rechtsklick auf das E-Mail-Konto, zu dem Sie den Kampagnenbanner hinzufügen möchten und wählen Sie dann “Einstellungen”",Copythemailtasticsignaturbuttonsintheclipboard:"Kopieren Sie die Mailtastic-Signatur bzw. den Kampagnen-Banner durch klicken des blauen Buttons in die Zwischenablage:",MailtasticSignaturcampaignbannerscopytotheclipboard:"Mailtastic-Signatur / Kampagnen-Banner<br>in die Zwischenablage kopieren",STEP4A:"SCHRITT 4 A",UnlessuseHTMLtheMailtasticintotheopenfield:"Sofern Sie “HTML verwenden” aktiviert haben, und die Mailtastic-Signatur einfügen wollen, löschen Sie ggf. vorhandenen Code und fügen Sie die Mailtastic-Signatur in das freie Feld ein.",Ifcampaigncodeexistexistingcode:"Sofern sie einen Kampagnen-Banner integrieren wollen und bereits Signatur-Code existiert, fügen Sie den Kampagnen-Banner einfach mit einem Absatz Abstand unter den bestehenden Code ein.",Thebottomrightconfirmwithandthatwasit:"Unten rechts noch mit “Ok” bestätigen und das war’s!",STEP4B:"SCHRITT 4 B",signatureenabledpleaseclickonBrowse:"Sofern Sie “Stattdessen eine Datei als Signatur anhängen” aktiviert haben, klicken Sie bitte auf “Durchsuchen”.",WordPadoreditorrightclickonthefileOpenWithWordPad:"... und öffnen Sie die entsprechende Signaturdatei mit WordPad oder Editor (Rechtsklick auf die Datei -> Öffnen mit -> WordPad).",Thebottomrightconfirmwithandthatwasit:"Unten rechts noch mit “Ok” bestätigen und das war’s!",gotacampaignexistingsignaturetexton:"Sofern Sie einen Kampagnen-Banner zugeordent bekommen haben, fügen Sie diesen mit einem Absatz Abstand unter den bestehenden Signatur-Text ein.",Nowjustyetandyouredone:"Jetzt einfach noch “Speichern” und das war’s!",MADE:"GESCHAFFT!",campaignbannerwillbedisplayedinyouremails:"Ihre Mailtatic-Signatur bzw. Ihr Kampagnen-Banner wird nun in Ihren E-Mails angezeigt.",Mailtasticcountlessapplicationsintegrateuchas:"Mailtastic lässt sich in zahllose weitere Anwendungen integrieren, wie z.B.",followingHTMLsnippetHTMLsignatureareatargetapplication:"und viele mehr.Kopieren Sie dazu bitte das folgende HTML-Snippet Ihrer Mailtastic-Signatur bzw. Ihres Kampagnen-Banners und integrieren Sie es in den HTML-Signatur-Bereich der Zielanwendung.",Shouldquestionsariseintheintegrationpleaseus:"Sollten Fragen bei der Integration auftreten, zögern Sie bitte nicht uns zu kontaktieren.",Selecttheimageontherightside:"Selektieren Sie das Bild auf der rechten Seite",Clickonceinordertoselectitontheimage:"Klicken Sie einmal auf das Bild um es zu selektieren.",Copytheimagetotheclipboard:"Kopieren Sie das Bild in die Zwischenablage",MailtasticSignaturcampaignbannerscopytotheclipboard:"Mailtastic-Signatur / Kampagnen-Banner<br>in die Zwischenablage kopieren",STEP4A:"SCHRITT 4 A",UnlessuseHTMLtheMailtasticintotheopenfield:"Sofern Sie “HTML verwenden” aktiviert haben, und die Mailtastic-Signatur einfügen wollen, löschen Sie ggf. vorhandenen Code und fügen Sie die Mailtastic-Signatur in das freie Feld ein.",Ifcampaigncodeexistexistingcode:"Sofern sie einen Kampagnen-Banner integrieren wollen und bereits Signatur-Code existiert, fügen Sie den Kampagnen-Banner einfach mit einem Absatz Abstand unter den bestehenden Code ein.",Thebottomrightconfirmwithandthatwasit:"Unten rechts noch mit “Ok” bestätigen und das war’s!",STEP4B:"SCHRITT 4 B",signatureenabledpleaseclickonBrowse:"Sofern Sie “Stattdessen eine Datei als Signatur anhängen” aktiviert haben, klicken Sie bitte auf “Durchsuchen”.",WordPadoreditorrightclickonthefileOpenWithWordPad:"... und öffnen Sie die entsprechende Signaturdatei mit WordPad oder Editor (Rechtsklick auf die Datei -> Öffnen mit -> WordPad).",Thebottomrightconfirmwithandthatwasit:"Unten rechts noch mit “Ok” bestätigen und das war’s!",gotacampaignexistingsignaturetexton:"Sofern Sie einen Kampagnen-Banner zugeordent bekommen haben, fügen Sie diesen mit einem Absatz Abstand unter den bestehenden Signatur-Text ein.",Nowjustyetandyouredone:"Jetzt einfach noch “Speichern” und das war’s!",MADE:"GESCHAFFT!",campaignbannerwillbedisplayedinyouremails:"Ihre Mailtatic-Signatur bzw. Ihr Kampagnen-Banner wird nun in Ihren E-Mails angezeigt."};;"use strict";function alert(a){bootbox.alert(a)}angular.module("mailtasticApp.modalExpired",[]).controller("AccountExpiredModalCtrl",["$scope","$uibModal","$log",function(a,b,c){a.animationsEnabled=!0,a.openExpiredModal=function(){a.openModal("booking/accountexpiredmodal/modals/account_expired_modal.html")},a.openTrialInfoModal=function(){a.openModal("booking/accountexpiredmodal/modals/trialinfo_modal.html")},a.openUnallowedActionModal=function(){a.openModal("booking/accountexpiredmodal/modals/unallowed_action_modal.html")},a.openModal=function(d){var e=b.open({animation:a.animationsEnabled,templateUrl:d,controller:"AccountExpiredModalInstanceCtrl",size:"lg",windowClass:"expiredmodalcontainer"});e.result.then(function(b){a.selected=b},function(){c.info("Modal dismissed at: "+new Date)})},a.openPersonalContactModal=function(b){var c={mode:"onexit",who:b};a.openModal("snippets/livedemo/modals/personalcontact_modal.html",c)},a.toggleAnimation=function(){a.animationsEnabled=!a.animationsEnabled}}]).controller("AccountExpiredModalInstanceCtrl",["$scope","$modalInstance","$state","userService",function(a,b,c,d){a.cancel=function(){b.dismiss("cancel")},a.goToBooking=function(){c.go("base.booking"),a.cancel()},a.modaldata={firstname:""},a.initData=function(){d.getAccountData().then(function(b){b.firstname&&(a.modaldata.firstname=b.firstname)})},a.initData()}]);;"use strict";function alert(a){bootbox.alert(a)}angular.module("mailtasticApp.modalGroup",["ui.bootstrap"]).controller("GroupModalCtrl",["$scope","$uibModal","$log","groupsService",function(a,b,c,d){a.animationsEnabled=!0,a.open=function(d,e,f){var g={campaignId:e,groupId:d,step:f},h=b.open({animation:a.animationsEnabled,templateUrl:"groups/modal/group_modal.html",controller:"GroupModalInstanceCtrl",size:null,windowClass:"employeeModal",resolve:{dataObject:g}});h.result.then(function(){},function(){c.info("Modal dismissed at: "+new Date)})},a.toggleAnimation=function(){a.animationsEnabled=!a.animationsEnabled}}]).controller("GroupModalInstanceCtrl",["$scope","$modalInstance","dataObject","groupsService","browseService","campaignService","$log","$uibModal","alertService",function(a,b,c,d,e,f,g,h,i){a.toggleObjSelection=function(b,c,d,e){b.stopPropagation(),a.changeMember(c,!d,e)},a.membersToRemove=[],a.membersToAdd=[],a.campaigns=[],a.data={selectedGroups:[],groups:[]},a.modaloptions={heading:"Neue Abteilung hinzufügen",mode:"create",campaignId:null,currentStep:"choose",groupId:null},a.init=function(){a.modaloptions.groupId=c.groupId,a.modaloptions.campaignId=c.campaignId,a.modaloptions.currentStep=c.step},a.init(),a.loadingPromise=null,a.selectedCampaign={selected:{}},a.groupdata={title:"",activeCampaign:"empty"},a.members=[],a.loadGroups=function(){a.modaloptions.campaignId&&"existing"===a.modaloptions.currentStep&&d.get().then(function(b){a.data.groups=[];for(var c=0;c<b.length;c++)b[c].activeCampaign!==a.modaloptions.campaignId&&a.data.groups.push(b[c])})},a.loadGroups(),a.loadMembers=function(){a.loadingPromise=d.getPotentialMembers(a.modaloptions.groupId).then(function(b){a.members=b})},a.loadMembers(),a.loadCampaigns=function(){a.loadingPromise=f.get().then(function(b){a.campaigns=b,a.modaloptions.groupId?(a.modaloptions.heading="Abteilung bearbeiten",a.loadingPromise=d.getOne(a.modaloptions.groupId).then(function(b){a.groupdata=b[0],b[0].activeCampaign?a.groupdata.activeCampaign=b[0].activeCampaign.toString():a.groupdata.activeCampaign="empty",a.modaloptions.mode="update"})):a.modaloptions.campaignId&&(a.groupdata.activeCampaign=a.modaloptions.campaignId.toString())})},a.loadCampaigns(),a.createGroup=function(){"empty"===a.groupdata.activeCampaign&&(a.groupdata.activeCampaign=null),a.groupdata.membersToRemove=a.membersToRemove,a.groupdata.membersToAdd=a.membersToAdd,"create"===a.modaloptions.mode?a.loadingPromise=d.add(a.groupdata).then(function(c){e.reload(),i.defaultSuccessMessage("Die Abteilung "+a.groupdata.title+" wurde erfolgreich erstellt."),b.close()}):"update"===a.modaloptions.mode&&(a.loadingPromise=d.update(a.groupdata).then(function(){e.reload(),i.defaultSuccessMessage("Ihre Änderungen wurden erfolgreich gespeichert."),b.close()}))},a.cancel=function(){b.dismiss("cancel")},a.isSelectedAll=function(){return a.data.selectedGroups.length===a.data.groups.length},a.selectAll=function(b){for(var c=b.target,d=c.checked?"add":"remove",e=0;e<a.data.groups.length;e++){var f=a.data.groups[e];j(d,f)}},a.selectAllOuter=function(){for(var b=a.data.selectedGroups.length===a.data.groups.length?"remove":"add",c=0;c<a.data.groups.length;c++){var d=a.data.groups[c];j(b,d)}};var j=function(b,c){var d=jQuery.grep(a.data.selectedGroups,function(a,b){return a.id===c.id});if("add"===b&&0===d.length&&(a.data.selectedGroups.push(c),a.recalcAvatars()),"remove"===b&&d.length>0)for(var e=0;e<a.data.selectedGroups.length;e++){var f=a.data.selectedGroups[e];if(f.id===c.id){a.data.selectedGroups.splice(e,1);break}}1===a.data.selectedGroups.length?a.selectedCampaign.selected={title:a.data.selectedGroups[0].campaignTitle,id:a.data.selectedGroups[0].campaignId,color:a.data.selectedGroups[0].campaignColor}:a.data.selectedGroups.length>1&&(a.selectedCampaign.selected={})};a.updateSelection=function(a,b){var c=a.target,d=c.checked?"add":"remove";j(d,b)},a.isSelected=function(b){var c=jQuery.grep(a.data.selectedGroups,function(a,c){return a.id===b.id});return 0!==c.length},a.rowClicked=function(b){for(var c=b.id,d="add",e=0;e<a.data.selectedGroups.length;e++)if(c===a.data.selectedGroups[e].id){d="remove";break}j(d,b)},a.setCampaignForGroups=function(){if(a.modaloptions.campaignId)if(0===a.data.selectedGroups.length)alert("Bitte wählen Sie zumindest eine Abteilung aus.");else{for(var b=[],c=0;c<a.data.selectedGroups.length;c++)b.push(a.data.selectedGroups[c].id);d.setCampaign(b,a.modaloptions.campaignId).then(function(b){b.success===!0?i.defaultSuccessMessage("Die Kampagne wurde den ausgewählten Abteilungen zugewiesen."):alert(Strings.errors.TECHNISCHER_FEHLER),e.reload(),a.cancel()})}else alert(Strings.errors.TECHNISCHER_FEHLER),a.cancel()}}]);;"use strict";function alert(a){bootbox.alert(a)}angular.module("mailtasticApp.groupSigModal",[]).controller("GroupSignatureModalCtrl",["$scope","$uibModal","$log","groupsService",function(a,b,c,d){a.animationsEnabled=!0,a.open=function(d,e){var f={signatureId:d,step:e},g=b.open({animation:a.animationsEnabled,templateUrl:"signature/details/addtogroupmodal/group_signature_modal.html",controller:"GroupSignatureModalCtrlInstanceCtrl",size:null,windowClass:"employeeModal",resolve:{dataObject:f}});g.result.then(function(){},function(){c.info("Modal dismissed at: "+new Date)})},a.toggleAnimation=function(){a.animationsEnabled=!a.animationsEnabled}}]).controller("GroupSignatureModalCtrlInstanceCtrl",["$scope","$modalInstance","dataObject","groupsService","browseService","campaignService","$log","$uibModal","alertService",function(a,b,c,d,e,f,g,h,i){a.campaigns=[],a.data={selectedGroups:[],groups:[]},a.modaloptions={heading:"Neue Abteilung erstellen",signatureId:null,currentStep:"choose",groupId:null},a.campaigns=[],a.groupdata={title:"",activeSignature:"",activeCampaign:"empty"},a.selectedCampaign={selected:{}},a.init=function(){a.modaloptions.currentStep=c.step,c.signatureId?a.groupdata.activeSignature=c.signatureId:(i.defaultErrorMessage(Strings.errors.DATEN_NICHT_GELADEN),a.ok())},a.init(),a.loadGroups=function(){a.groupdata.activeSignature&&"existing"===a.modaloptions.currentStep&&d.get().then(function(b){a.data.groups=[];for(var c=0;c<b.length;c++)b[c].activeSignature!==a.groupdata.activeSignature&&a.data.groups.push(b[c])})},a.loadGroups(),a.loadCampaigns=function(){a.loadingPromise=f.get().then(function(b){a.campaigns=b,a.modaloptions.campaignId&&(angular.forEach(a.campaigns,function(b,c){b.id==a.modaloptions.campaignId&&(a.selectedCampaign.selected=a.campaigns[c])}),a.groupdata.activeCampaign=a.modaloptions.campaignId.toString())})},a.loadCampaigns(),a.createGroup=function(){a.groupdata.activeCampaign&&"empty"!==a.groupdata.activeCampaign||(a.groupdata.activeCampaign=null),a.groupdata.activeSignature?a.loadingPromise=d.add(a.groupdata).then(function(c){c.success===!0?i.defaultSuccessMessage("Die Abteilung "+a.groupdata.title+" wurde erfolgreich erstellt und die Signatur für diese Gruppe gesetzt."):i.defaultErrorMessage("Die Abteilung "+a.groupdata.title+" konnte nicht erstellt werden."),e.reload(),b.close()}):i.defaultErrorMessage(Strings.errors.TECHNISCHER_FEHLER)},a.cancel=function(){b.dismiss("cancel")},a.isSelectedAll=function(){return a.data.selectedGroups.length===a.data.groups.length},a.selectAll=function(b){for(var c=b.target,d=c.checked?"add":"remove",e=0;e<a.data.groups.length;e++){var f=a.data.groups[e];j(d,f)}},a.selectAllOuter=function(){for(var b=a.data.selectedGroups.length===a.data.groups.length?"remove":"add",c=0;c<a.data.groups.length;c++){var d=a.data.groups[c];j(b,d)}};var j=function(b,c){var d=jQuery.grep(a.data.selectedGroups,function(a,b){return a.id===c.id});if("add"===b&&0===d.length&&(a.data.selectedGroups.push(c),a.recalcAvatars()),"remove"===b&&d.length>0)for(var e=0;e<a.data.selectedGroups.length;e++){var f=a.data.selectedGroups[e];if(f.id===c.id){a.data.selectedGroups.splice(e,1);break}}1===a.data.selectedGroups.length?a.selectedCampaign.selected={title:a.data.selectedGroups[0].campaignTitle,id:a.data.selectedGroups[0].campaignId,color:a.data.selectedGroups[0].campaignColor}:a.data.selectedGroups.length>1&&(a.selectedCampaign.selected={})};a.updateSelection=function(a,b){var c=a.target,d=c.checked?"add":"remove";j(d,b)},a.isSelected=function(b){var c=jQuery.grep(a.data.selectedGroups,function(a,c){return a.id===b.id});return 0!==c.length},a.rowClicked=function(b){for(var c=b.id,d="add",e=0;e<a.data.selectedGroups.length;e++)if(c===a.data.selectedGroups[e].id){d="remove";break}j(d,b)},a.setSignatureForGroups=function(){if(a.groupdata.activeSignature)if(0===a.data.selectedGroups.length)i.defaultErrorMessage("Bitte wählen Sie mindestens eine Abteilung aus.");else{for(var b=[],c=0;c<a.data.selectedGroups.length;c++)b.push(a.data.selectedGroups[c].id);d.setSignature(b,a.groupdata.activeSignature).then(function(b){b.success===!0?i.defaultSuccessMessage("Die Signatur wurde den ausgewählten Abteilungen zugewiesen."):i.defaultErrorMessage(Strings.errors.TECHNISCHER_FEHLER),e.reload(),a.cancel()})}else i.defaultErrorMessage(Strings.errors.TECHNISCHER_FEHLER),a.cancel()}}]);;function enablebuybutton(){var a=$(".employeebuybutton").hasClass("disabled");a===!0?$(".employeebuybutton").removeClass("disabled"):$(".employeebuybutton").addClass("disabled")}function searchObjectInArray(a,b,c){for(var d={found:!1,object:""},e=0;e<c.length;e++)if(c[e][b]===a[b])return d.found=!0,d.object=c[e],d;return d}Colors={},Colors.names={aqua:"#00ffff",azure:"#f0ffff",beige:"#f5f5dc",black:"#000000",blue:"#0000ff",brown:"#a52a2a",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgrey:"#a9a9a9",darkgreen:"#006400",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkviolet:"#9400d3",fuchsia:"#ff00ff",gold:"#ffd700",green:"#008000",indigo:"#4b0082",khaki:"#f0e68c",lightblue:"#add8e6",lightcyan:"#e0ffff",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightyellow:"#ffffe0",lime:"#00ff00",magenta:"#ff00ff",maroon:"#800000",navy:"#000080",olive:"#808000",orange:"#ffa500",pink:"#ffc0cb",purple:"#800080",violet:"#800080",red:"#ff0000",silver:"#c0c0c0",yellow:"#ffff00",actiongreen:"#9bdb42"},Colors.pieColors=["#009fe3","#e6391e","#a0d117","#143d60","#ffc000","#d11796","#008000","#4b0082","#3dc0a0","#dd7d2f"],Colors.random=function(){var a,b=0;for(var c in this.names)Math.random()<1/++b&&(a=c);return{name:"same",rgb:this.names[a]}};var colorcounter=0;Colors.getNext=function(){var a={name:"same",rgb:this.pieColors[colorcounter]};return colorcounter++,colorcounter>=10&&(colorcounter=0),a},Array.prototype.remove=function(){for(var a,b,c=arguments,d=c.length;d&&this.length;)for(a=c[--d];(b=this.indexOf(a))!==-1;)this.splice(b,1);return this},String.prototype.endsWith=function(a){return this.indexOf(a,this.length-a.length)!==-1},String.prototype.replaceAll=function(a,b){var c=this;return c.split(a).join(b)},String.prototype.replaceAllRegex=function(a,b){var c=this;return c.replace(new RegExp(a,"g"),b)};;var $tooltip=$(".tooltip-linegraph").appendTo($("#linegraph"));$(document).on("mouseenter",".ct-point",function(){var a=$(".tooltip-hidden");if(a.length<2){var b=$(".tooltipwrapper").html();"undefined"!=typeof InstallTrigger;$tooltip=$(b).appendTo($("body"))}var c=$(this),d=$(this).closest(".ct-series"),e=d.attr("ct:series-name"),f=d.attr("ct:meta");f=Chartist.deserialize(f);var g=c.attr("ct:meta");g=Chartist.deserialize(g);var h=g.label,i=g.impressions,j=g.clicks,k=0===i||0===j?0:j/i*100;k=k.toFixed(2);var l=f.color;$(".tooltip-linegraph .date").text(h),$(".tooltip-linegraph .impressions").text(i),$(".tooltip-linegraph .clicks").text(j),$(".tooltip-linegraph .rate").text(k+"%"),$(".tooltip-linegraph .title").text(e),$(".tooltip-linegraph .dot").css({"background-color":l}),$tooltip.removeClass("tooltip-hidden")}),$(document).on("mouseleave",".ct-point",function(){$tooltip.addClass("tooltip-hidden")}),$(document).on("mousemove",".ct-point",function(a){var b,c,d=("undefined"!=typeof InstallTrigger,$(document).width()),b=0,c=$(this).offset();c.left>d-70?(b=30,$(".tooltip-linegraph").addClass("rightend")):$(".tooltip-linegraph").removeClass("rightend"),$tooltip.css({left:c.left-$tooltip.width()/2-10-b,top:c.top-$tooltip.height()-30})});;"use strict";function alert(a){bootbox.alert(a)}angular.module("mailtasticApp.modal",[]),angular.module("mailtasticApp.modalPassReset",["ui.bootstrap"]).controller("PassResetModalCtrl",["$scope","$uibModal","$log","campaignService",function(a,b,c,d){a.animationsEnabled=!0,a.enteremailmodaltpl="login/passwordlost/enteremailmodal.html",a.setpasswordmodaltpl="login/passwordlost/setpasswordmodal.html",a.$on("passResetEvent",function(b,c){a.open("setpassword",c)}),a.open=function(d,e){var f={mode:d,passdata:e},g=b.open({animation:a.animationsEnabled,templateUrl:"login/passwordlost/resetpassmodal.html",controller:"PassResetInstanceCtrl",size:"md",resolve:{dataObject:f}});g.result.then(function(b){a.selected=b},function(){c.info("Modal dismissed at: "+new Date)})},a.toggleAnimation=function(){a.animationsEnabled=!a.animationsEnabled}}]).controller("PassResetInstanceCtrl",["$scope","$modalInstance","dataObject","userService","$rootScope",function(a,b,c,d,e){a.cancel=function(){b.dismiss("cancel")},a.modaloptions={mode:"",heading:"Passwort vergessen"},a.passwordData={password:"",passwordrep:"",activationCode:"",employeeId:""},a.emaildata={email:"",emailrep:""},a.initData=function(){a.modaloptions.mode=c.mode,"setpassword"===c.mode&&(a.modaloptions.heading="Neues Passwort vergeben",a.passwordData.activationCode=c.activationCode,a.passwordData.employeeId=c.employeeId)},a.initData(),a.resetPassword=function(){a.emaildata.email!==a.emaildata.emailrep?alert(Strings.passreset.EMAIL_NOT_EQU):e.loadingPromise=d.resetPassword(a.emaildata.email).then(function(b){b.success===!0?(alert(Strings.passreset.PASS_MAIL_SENT),a.cancel()):alert(3===b.code?Strings.passreset.NO_ACCOUNT:Strings.errors.TECHNISCHER_FEHLER)})},a.setNewPassword=function(){a.passwordData.password!==a.passwordData.passwordrep?alert(Strings.registration.PASSWORD_REP_NOT_EQU):a.passwordData.password.length<6?alert(Strings.registration.PASSWORD_TOO_SHORT):a.passwordData.activationCode&&a.passwordData.employeeId?e.loadingPromise=d.setNewPassword(a.passwordData).then(function(b){b.success===!0?(alert(Strings.passreset.PASS_SUC_RESET),a.cancel()):alert(3===b.code?Strings.passreset.NO_ACCOUNT:Strings.errors.TECHNISCHER_FEHLER)}):alert(Strings.errors.TECHNISCHER_FEHLER)}}]);;"use strict";function alert(a){bootbox.alert(a)}angular.module("mailtasticApp.sigTemplatesModal",[]).controller("SigTemplatesModalCtrl",["$scope","$modalInstance","alertService","$http",function(a,b,c,d){a.modaloptions={heading:"",headingAddition:"",mode:"create"},a.templates=[{title:"#1",previewImagePath:"signature/designer/modal/templategallery/templates/1.jpg"},{title:"#2",previewImagePath:"signature/designer/modal/templategallery/templates/2.jpg"},{title:"#3",previewImagePath:"signature/designer/modal/templategallery/templates/3.jpg"},{title:"#4",previewImagePath:"signature/designer/modal/templategallery/templates/5.jpg"},{title:"#5",previewImagePath:"signature/designer/modal/templategallery/templates/7.jpg"}],a.initData=function(){},a.chooseTemplate=function(b){if(a.templates[b]){var c="signature/designer/modal/templategallery/templates/"+(b+1)+".html";d.get(c).then(function(b){a.ok(b.data)},function(){a.ok(null)})}},a.myPromise=null,a.ok=function(a){b.close(a)},a.cancel=function(){b.dismiss("cancel")}}]);;"use strict";angular.module("mailtasticApp.modal",[]).controller("TourModalCtrl",["$scope","$modalInstance","alertService",function(a,b,c){a.steps=[{image:"tour/images/1.png"},{image:"tour/images/2.png"},{image:"tour/images/3.png"},{image:"tour/images/4.png"},{image:"tour/images/5.png"},{image:"tour/images/6.png"},{image:"tour/images/7.png"}],a.currentStep=0,a.next=function(){a.currentStep=a.currentStep+1,a.currentStep===a.steps.length&&a.ok()},a.prev=function(){a.currentStep=(a.currentStep-1)%(a.steps.length-1)},a.ok=function(a){b.close(a)},a.cancel=function(){b.dismiss("cancel")}}]);